import{r as a,h as e,T as l,U as t,k as s,l as i,w as n,y as o,B as u,C as c,j as A,$ as d,D as p,n as r,p as g,H as f,I as v,J as _,K as b,L as B,M as m,N as x,q as h,O as w,P as U,c as y,Z as C,x as I,a4 as S,g as k,a5 as E,V as Q,E as R}from"./index-f8a6b33f.js";import{_ as j,a as L,c as G,b as O,d as Y}from"./ti-layout-table-list.534c1c1a.js";const X=j({__name:"ti-layout-setserver",setup(S){const k=a({ip:"",port:"",device_id:""}),E=()=>{const a=r();k.value.ip=(null==a?void 0:a.ip)||g()||"127.0.0.1",k.value.port=(null==a?void 0:a.port)||"8080"},Q=a=>{k.value.ip=a},R=a=>{k.value.port=a},j=a("");a([]);const Y=a(),X=a(!1),D=async()=>{var a;const e={...k.value};if(e.ip)if(e.port)try{const l=await v(_(`${null==e?void 0:e.ip}:${e.port}`));b(e),B(l.data.app_id),m(l.data.shop_supplier_id),x(null==(a=l.data)?void 0:a.currency),setTimeout((()=>{X.value=!0}),150)}catch(l){f({title:d("绑定失败"),icon:"none"})}else f({title:d("請輸入連接埠"),icon:"none"});else f({title:d("請輸入伺服器位址"),icon:"none"})},H=a=>{X.value=!1,a&&(Y.value=a,j.value=a.table_no)},J=()=>{E(),j.value=h().table_no,Y.value=h()},M=async()=>{var a;const e={...k.value};if(e.ip)if(e.port)try{const l=await v(_(`${null==e?void 0:e.ip}:${e.port}`));if(!Y.value)return void f({title:d("請查找桌位"),icon:"none"});b(e),B(l.data.app_id),m(l.data.shop_supplier_id),x(null==(a=l.data)?void 0:a.currency),setTimeout((()=>{N()}),150)}catch(l){f({title:d("绑定失败"),icon:"none"})}else f({title:d("請輸入連接埠"),icon:"none"});else f({title:d("請輸入伺服器位址"),icon:"none"})},N=async()=>{try{const a=await w({table_id:Y.value.table_id,key:k.value.device_id});U(Y.value),y({url:"/pages/index/index"}),f({title:a.msg,icon:"none"})}catch(a){}};return E(),e({success:a=>{k.value.device_id=a.deviceId}}),(a,e)=>{const r=C,g=I,f=l(t("ti-input"),L),v=l(t("ti-button"),G),_=l(t("ti-layout-table-list"),O);return s(),i(g,null,{default:n((()=>[o(g,{class:"ti-item-input"},{default:n((()=>[o(g,{class:"ti-label-box"},{default:n((()=>[o(g,{class:"ti-label-left"},{default:n((()=>[o(r,{class:"ti-label-server"},{default:n((()=>[u(c(A(d)("服務器連接地址")),1)])),_:1})])),_:1})])),_:1}),o(g,{class:"ti-input-box"},{default:n((()=>[o(f,{type:"text",onInput:Q,placeholder:A(d)("伺服器位址"),value:k.value.ip,clearable:!1},null,8,["placeholder","value"]),o(g,{class:"ti-colon"},{default:n((()=>[u(":")])),_:1}),o(g,{class:"ti-input-port"},{default:n((()=>[o(f,{type:"number",onInput:R,placeholder:A(d)("端口"),value:k.value.port,clearable:!1},null,8,["placeholder","value"])])),_:1})])),_:1})])),_:1}),o(g,{class:"ti-bottom"},{default:n((()=>[o(v,{title:A(d)("重置"),onClick:J},null,8,["title"]),o(v,{title:A(d)("確定"),type:"primary",onClick:M},null,8,["title"])])),_:1}),o(g,{class:"ti-select-table-box",onClick:D},{default:n((()=>[o(r,{class:"ti-label-table"},{default:n((()=>[u(c(j.value?A(d)("已選 : ")+A(p)(j.value,21):A(d)("查找桌位")),1)])),_:1})])),_:1}),o(_,{show:X.value,"onUpdate:show":e[0]||(e[0]=a=>X.value=a),onConfirm:H},null,8,["show"])])),_:1})}}},[["__scopeId","data-v-d7e2797f"]]),D=""+new URL("binding-page-bg-image-db048039.png",import.meta.url).href,H=""+new URL("logo-fcaec045.png",import.meta.url).href,J=j({__name:"set-language",props:{firstBind:{type:Boolean,default:!1}},setup(e){const A=e,d=a(S[k()]),p=a(),r=a=>{p.value.isShow()?p.value.close():p.value.open()},g=()=>{d.value=S[k()]};return(a,e)=>{const f=l(t("ti-layout-language-item"),Y),v=I,_=Q,b=C;return s(),i(v,{class:"ti-language",onClick:[r,e[0]||(e[0]=E((()=>{}),["stop"]))]},{default:n((()=>[o(v,{class:"ti-language-box"},{default:n((()=>[o(f,{ref_key:"refShowLanguage",ref:p,firstBind:A.firstBind,onLanguageText:g},null,8,["firstBind"])])),_:1}),o(_,{class:"ti-language-global",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIeSURBVHgB5VXdcdswDAYUKpXVPrAbeASNoExQZ4ImE7QbxB6hE9gb1BvYnSDaoN6gfOg5PsshA0CyJEbUnZK7vCTfnX9EfvgAkAAE8CGgP8c3ehL/1Wns6s+9nnz6OcY2GhRNL2ckWolY9x0Qpp3tjBa/CY84HMCLHOhU3QG43+BcoTVoQMx7JIRc9ogDDpYU0N0oB5U4zuUhORVwUBkMgfeYI3DzkBP0xBNKNYJlxYeteSiv+KjoODJwaMBZU1lFlJXTUOLalGWhJ2rTZmmvzf5xHQxIzjNRlDol/0Kwjdie7y2UQUWkc+XUH0/GlFBQxSwpm/zZJXOGO1rbmn15q9OLGVjKkI7LGDBdWtSJ/gd9NnCM/0GEG4jVrBbqi1eh8VpeP2RiQ7as0a0q1Rq4GyE2EaLpCA1h2nCxcZxTULy+8jLwxGXHGhgL1+NOGxl4Y7QO+NK6sNH4SsIetwg5WFBXblsjp4OOfew8rvBJA+HX+bG5ZHMoV/Szkh44/KeqqI0Q/pATGCpT+U8NBxcknHyhMjXDd9c2Gryi0SDYaMpjoaWoIq5nclaPijjOIHbUSG7ncSOc0ldh9se1jIojjYpIMr31JHuRpGpOy9XQuiy/SldzE4Vg3ZUMO27OSm5BDudeHM9tzP5EBLeQB29aBuBN27540EHjxFKqiJnMlm51ncHTlveQGxSvQ+KjIZefqvvmlcmvz2T4Lfa+8ARyhNbiDRkX2gAAAABJRU5ErkJggg=="}),o(b,{class:"ti-language-text"},{default:n((()=>[u(c(d.value),1)])),_:1}),o(_,{class:"ti-language-arrow-down",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACPSURBVHgB7Y9BCoUwDESH/w3EuskRPIpH8AZ6M72ZR9ClO60KQRGtYF0ofbRQmslMAgQC70TEHkb6SM8kEkPDfBMqcIFJpz02aF377dSMTt8DalfIXLc6/ehZ4JyIqdSJTjbZTL7oSlzFFXLL3BXixfwwxFDlzfwkxJ+5hph/LjE1i3nUCkcZnkAsCAS+xQhmhzo19D7FAAAAAABJRU5ErkJggg=="})])),_:1})}}},[["__scopeId","data-v-4af10a1b"]]),M=j({__name:"first-binding",setup:a=>(a,e)=>{const p=Q,r=I,g=C,f=l(t("ti-layout-setserver"),X);return s(),i(r,{class:"page",onClick:e[0]||(e[0]=a=>A(R)())},{default:n((()=>[o(r,{class:"ti-page-bg"},{default:n((()=>[o(p,{class:"ti-bg-image",src:D})])),_:1}),o(r,{class:"ti-flex"},{default:n((()=>[o(r,{class:"ti-flex-round"},{default:n((()=>[o(r,{class:"ti-round-box"},{default:n((()=>[o(r,{class:"ti-round-content"},{default:n((()=>[o(r,{class:"ti-item-logo"},{default:n((()=>[o(p,{class:"ti-logo",src:H}),o(g,{class:"ti-platform m-top-24px"},{default:n((()=>[u(c(A(d)("平板端")),1)])),_:1})])),_:1}),o(f,{class:"m-top-32px"})])),_:1})])),_:1})])),_:1})])),_:1}),o(r,{class:"ti-language-box"},{default:n((()=>[o(J,{firstBind:!0})])),_:1})])),_:1})}},[["__scopeId","data-v-dc34464c"]]);export{M as default};
