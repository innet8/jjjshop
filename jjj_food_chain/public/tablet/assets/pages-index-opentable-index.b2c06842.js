import{a6 as e,k as l,l as i,a7 as a,a0 as t,Z as n,r as c,a8 as o,a9 as d,aa as s,T as u,U as _,z as r,y as f,w as m,F as p,A as v,B as h,C as b,m as g,ab as y,x as w,_ as k,ac as x,$ as C,ad as A,ae as I,j as S,af as T,a1 as L,a2 as P,ag as U,ah as O,v as N,ai as B,H as R,V as j,a5 as z,aj as K,ak as D,e as F,al as q,am as E,a3 as $,an as Q,h as V,ao as W,o as H,f as J,n as Y,p as M,ap as G,q as X,N as Z,aq as ee,D as le,E as ie,I as ae,J as te,K as ne,L as ce,M as oe,Q as de,c as se,O as ue,P as _e}from"./index-36ffbed1.js";import{a as re,b as fe,D as me,v as pe,_ as ve}from"./verify.545aeb1e.js";import{_ as he,c as be,e as ge,f as ye,u as we,a as ke,b as xe}from"./ti-layout-table-list.0be6113e.js";const Ce=""+new URL("icon-ring-192350e1.svg",import.meta.url).href,Ae=""+new URL("icon-lock-bd74ef9c.svg",import.meta.url).href;const Ie={id:"2852637",name:"uniui图标库",font_family:"uniicons",css_prefix_text:"uniui-",description:"",glyphs:[{icon_id:"25027049",name:"yanse",font_class:"color",unicode:"e6cf",unicode_decimal:59087},{icon_id:"25027048",name:"wallet",font_class:"wallet",unicode:"e6b1",unicode_decimal:59057},{icon_id:"25015720",name:"settings-filled",font_class:"settings-filled",unicode:"e6ce",unicode_decimal:59086},{icon_id:"25015434",name:"shimingrenzheng-filled",font_class:"auth-filled",unicode:"e6cc",unicode_decimal:59084},{icon_id:"24934246",name:"shop-filled",font_class:"shop-filled",unicode:"e6cd",unicode_decimal:59085},{icon_id:"24934159",name:"staff-filled-01",font_class:"staff-filled",unicode:"e6cb",unicode_decimal:59083},{icon_id:"24932461",name:"VIP-filled",font_class:"vip-filled",unicode:"e6c6",unicode_decimal:59078},{icon_id:"24932462",name:"plus_circle_fill",font_class:"plus-filled",unicode:"e6c7",unicode_decimal:59079},{icon_id:"24932463",name:"folder_add-filled",font_class:"folder-add-filled",unicode:"e6c8",unicode_decimal:59080},{icon_id:"24932464",name:"yanse-filled",font_class:"color-filled",unicode:"e6c9",unicode_decimal:59081},{icon_id:"24932465",name:"tune-filled",font_class:"tune-filled",unicode:"e6ca",unicode_decimal:59082},{icon_id:"24932455",name:"a-rilidaka-filled",font_class:"calendar-filled",unicode:"e6c0",unicode_decimal:59072},{icon_id:"24932456",name:"notification-filled",font_class:"notification-filled",unicode:"e6c1",unicode_decimal:59073},{icon_id:"24932457",name:"wallet-filled",font_class:"wallet-filled",unicode:"e6c2",unicode_decimal:59074},{icon_id:"24932458",name:"paihangbang-filled",font_class:"medal-filled",unicode:"e6c3",unicode_decimal:59075},{icon_id:"24932459",name:"gift-filled",font_class:"gift-filled",unicode:"e6c4",unicode_decimal:59076},{icon_id:"24932460",name:"fire-filled",font_class:"fire-filled",unicode:"e6c5",unicode_decimal:59077},{icon_id:"24928001",name:"refreshempty",font_class:"refreshempty",unicode:"e6bf",unicode_decimal:59071},{icon_id:"24926853",name:"location-ellipse",font_class:"location-filled",unicode:"e6af",unicode_decimal:59055},{icon_id:"24926735",name:"person-filled",font_class:"person-filled",unicode:"e69d",unicode_decimal:59037},{icon_id:"24926703",name:"personadd-filled",font_class:"personadd-filled",unicode:"e698",unicode_decimal:59032},{icon_id:"24923351",name:"back",font_class:"back",unicode:"e6b9",unicode_decimal:59065},{icon_id:"24923352",name:"forward",font_class:"forward",unicode:"e6ba",unicode_decimal:59066},{icon_id:"24923353",name:"arrowthinright",font_class:"arrow-right",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923353",name:"arrowthinright",font_class:"arrowthinright",unicode:"e6bb",unicode_decimal:59067},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrow-left",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923354",name:"arrowthinleft",font_class:"arrowthinleft",unicode:"e6bc",unicode_decimal:59068},{icon_id:"24923355",name:"arrowthinup",font_class:"arrow-up",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923355",name:"arrowthinup",font_class:"arrowthinup",unicode:"e6bd",unicode_decimal:59069},{icon_id:"24923356",name:"arrowthindown",font_class:"arrow-down",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923356",name:"arrowthindown",font_class:"arrowthindown",unicode:"e6be",unicode_decimal:59070},{icon_id:"24923349",name:"arrowdown",font_class:"bottom",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923349",name:"arrowdown",font_class:"arrowdown",unicode:"e6b8",unicode_decimal:59064},{icon_id:"24923346",name:"arrowright",font_class:"right",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923346",name:"arrowright",font_class:"arrowright",unicode:"e6b5",unicode_decimal:59061},{icon_id:"24923347",name:"arrowup",font_class:"top",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923347",name:"arrowup",font_class:"arrowup",unicode:"e6b6",unicode_decimal:59062},{icon_id:"24923348",name:"arrowleft",font_class:"left",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923348",name:"arrowleft",font_class:"arrowleft",unicode:"e6b7",unicode_decimal:59063},{icon_id:"24923334",name:"eye",font_class:"eye",unicode:"e651",unicode_decimal:58961},{icon_id:"24923335",name:"eye-filled",font_class:"eye-filled",unicode:"e66a",unicode_decimal:58986},{icon_id:"24923336",name:"eye-slash",font_class:"eye-slash",unicode:"e6b3",unicode_decimal:59059},{icon_id:"24923337",name:"eye-slash-filled",font_class:"eye-slash-filled",unicode:"e6b4",unicode_decimal:59060},{icon_id:"24923305",name:"info-filled",font_class:"info-filled",unicode:"e649",unicode_decimal:58953},{icon_id:"24923299",name:"reload-01",font_class:"reload",unicode:"e6b2",unicode_decimal:59058},{icon_id:"24923195",name:"mic_slash_fill",font_class:"micoff-filled",unicode:"e6b0",unicode_decimal:59056},{icon_id:"24923165",name:"map-pin-ellipse",font_class:"map-pin-ellipse",unicode:"e6ac",unicode_decimal:59052},{icon_id:"24923166",name:"map-pin",font_class:"map-pin",unicode:"e6ad",unicode_decimal:59053},{icon_id:"24923167",name:"location",font_class:"location",unicode:"e6ae",unicode_decimal:59054},{icon_id:"24923064",name:"starhalf",font_class:"starhalf",unicode:"e683",unicode_decimal:59011},{icon_id:"24923065",name:"star",font_class:"star",unicode:"e688",unicode_decimal:59016},{icon_id:"24923066",name:"star-filled",font_class:"star-filled",unicode:"e68f",unicode_decimal:59023},{icon_id:"24899646",name:"a-rilidaka",font_class:"calendar",unicode:"e6a0",unicode_decimal:59040},{icon_id:"24899647",name:"fire",font_class:"fire",unicode:"e6a1",unicode_decimal:59041},{icon_id:"24899648",name:"paihangbang",font_class:"medal",unicode:"e6a2",unicode_decimal:59042},{icon_id:"24899649",name:"font",font_class:"font",unicode:"e6a3",unicode_decimal:59043},{icon_id:"24899650",name:"gift",font_class:"gift",unicode:"e6a4",unicode_decimal:59044},{icon_id:"24899651",name:"link",font_class:"link",unicode:"e6a5",unicode_decimal:59045},{icon_id:"24899652",name:"notification",font_class:"notification",unicode:"e6a6",unicode_decimal:59046},{icon_id:"24899653",name:"staff",font_class:"staff",unicode:"e6a7",unicode_decimal:59047},{icon_id:"24899654",name:"VIP",font_class:"vip",unicode:"e6a8",unicode_decimal:59048},{icon_id:"24899655",name:"folder_add",font_class:"folder-add",unicode:"e6a9",unicode_decimal:59049},{icon_id:"24899656",name:"tune",font_class:"tune",unicode:"e6aa",unicode_decimal:59050},{icon_id:"24899657",name:"shimingrenzheng",font_class:"auth",unicode:"e6ab",unicode_decimal:59051},{icon_id:"24899565",name:"person",font_class:"person",unicode:"e699",unicode_decimal:59033},{icon_id:"24899566",name:"email-filled",font_class:"email-filled",unicode:"e69a",unicode_decimal:59034},{icon_id:"24899567",name:"phone-filled",font_class:"phone-filled",unicode:"e69b",unicode_decimal:59035},{icon_id:"24899568",name:"phone",font_class:"phone",unicode:"e69c",unicode_decimal:59036},{icon_id:"24899570",name:"email",font_class:"email",unicode:"e69e",unicode_decimal:59038},{icon_id:"24899571",name:"personadd",font_class:"personadd",unicode:"e69f",unicode_decimal:59039},{icon_id:"24899558",name:"chatboxes-filled",font_class:"chatboxes-filled",unicode:"e692",unicode_decimal:59026},{icon_id:"24899559",name:"contact",font_class:"contact",unicode:"e693",unicode_decimal:59027},{icon_id:"24899560",name:"chatbubble-filled",font_class:"chatbubble-filled",unicode:"e694",unicode_decimal:59028},{icon_id:"24899561",name:"contact-filled",font_class:"contact-filled",unicode:"e695",unicode_decimal:59029},{icon_id:"24899562",name:"chatboxes",font_class:"chatboxes",unicode:"e696",unicode_decimal:59030},{icon_id:"24899563",name:"chatbubble",font_class:"chatbubble",unicode:"e697",unicode_decimal:59031},{icon_id:"24881290",name:"upload-filled",font_class:"upload-filled",unicode:"e68e",unicode_decimal:59022},{icon_id:"24881292",name:"upload",font_class:"upload",unicode:"e690",unicode_decimal:59024},{icon_id:"24881293",name:"weixin",font_class:"weixin",unicode:"e691",unicode_decimal:59025},{icon_id:"24881274",name:"compose",font_class:"compose",unicode:"e67f",unicode_decimal:59007},{icon_id:"24881275",name:"qq",font_class:"qq",unicode:"e680",unicode_decimal:59008},{icon_id:"24881276",name:"download-filled",font_class:"download-filled",unicode:"e681",unicode_decimal:59009},{icon_id:"24881277",name:"pengyouquan",font_class:"pyq",unicode:"e682",unicode_decimal:59010},{icon_id:"24881279",name:"sound",font_class:"sound",unicode:"e684",unicode_decimal:59012},{icon_id:"24881280",name:"trash-filled",font_class:"trash-filled",unicode:"e685",unicode_decimal:59013},{icon_id:"24881281",name:"sound-filled",font_class:"sound-filled",unicode:"e686",unicode_decimal:59014},{icon_id:"24881282",name:"trash",font_class:"trash",unicode:"e687",unicode_decimal:59015},{icon_id:"24881284",name:"videocam-filled",font_class:"videocam-filled",unicode:"e689",unicode_decimal:59017},{icon_id:"24881285",name:"spinner-cycle",font_class:"spinner-cycle",unicode:"e68a",unicode_decimal:59018},{icon_id:"24881286",name:"weibo",font_class:"weibo",unicode:"e68b",unicode_decimal:59019},{icon_id:"24881288",name:"videocam",font_class:"videocam",unicode:"e68c",unicode_decimal:59020},{icon_id:"24881289",name:"download",font_class:"download",unicode:"e68d",unicode_decimal:59021},{icon_id:"24879601",name:"help",font_class:"help",unicode:"e679",unicode_decimal:59001},{icon_id:"24879602",name:"navigate-filled",font_class:"navigate-filled",unicode:"e67a",unicode_decimal:59002},{icon_id:"24879603",name:"plusempty",font_class:"plusempty",unicode:"e67b",unicode_decimal:59003},{icon_id:"24879604",name:"smallcircle",font_class:"smallcircle",unicode:"e67c",unicode_decimal:59004},{icon_id:"24879605",name:"minus-filled",font_class:"minus-filled",unicode:"e67d",unicode_decimal:59005},{icon_id:"24879606",name:"micoff",font_class:"micoff",unicode:"e67e",unicode_decimal:59006},{icon_id:"24879588",name:"closeempty",font_class:"closeempty",unicode:"e66c",unicode_decimal:58988},{icon_id:"24879589",name:"clear",font_class:"clear",unicode:"e66d",unicode_decimal:58989},{icon_id:"24879590",name:"navigate",font_class:"navigate",unicode:"e66e",unicode_decimal:58990},{icon_id:"24879591",name:"minus",font_class:"minus",unicode:"e66f",unicode_decimal:58991},{icon_id:"24879592",name:"image",font_class:"image",unicode:"e670",unicode_decimal:58992},{icon_id:"24879593",name:"mic",font_class:"mic",unicode:"e671",unicode_decimal:58993},{icon_id:"24879594",name:"paperplane",font_class:"paperplane",unicode:"e672",unicode_decimal:58994},{icon_id:"24879595",name:"close",font_class:"close",unicode:"e673",unicode_decimal:58995},{icon_id:"24879596",name:"help-filled",font_class:"help-filled",unicode:"e674",unicode_decimal:58996},{icon_id:"24879597",name:"plus-filled",font_class:"paperplane-filled",unicode:"e675",unicode_decimal:58997},{icon_id:"24879598",name:"plus",font_class:"plus",unicode:"e676",unicode_decimal:58998},{icon_id:"24879599",name:"mic-filled",font_class:"mic-filled",unicode:"e677",unicode_decimal:58999},{icon_id:"24879600",name:"image-filled",font_class:"image-filled",unicode:"e678",unicode_decimal:59e3},{icon_id:"24855900",name:"locked-filled",font_class:"locked-filled",unicode:"e668",unicode_decimal:58984},{icon_id:"24855901",name:"info",font_class:"info",unicode:"e669",unicode_decimal:58985},{icon_id:"24855903",name:"locked",font_class:"locked",unicode:"e66b",unicode_decimal:58987},{icon_id:"24855884",name:"camera-filled",font_class:"camera-filled",unicode:"e658",unicode_decimal:58968},{icon_id:"24855885",name:"chat-filled",font_class:"chat-filled",unicode:"e659",unicode_decimal:58969},{icon_id:"24855886",name:"camera",font_class:"camera",unicode:"e65a",unicode_decimal:58970},{icon_id:"24855887",name:"circle",font_class:"circle",unicode:"e65b",unicode_decimal:58971},{icon_id:"24855888",name:"checkmarkempty",font_class:"checkmarkempty",unicode:"e65c",unicode_decimal:58972},{icon_id:"24855889",name:"chat",font_class:"chat",unicode:"e65d",unicode_decimal:58973},{icon_id:"24855890",name:"circle-filled",font_class:"circle-filled",unicode:"e65e",unicode_decimal:58974},{icon_id:"24855891",name:"flag",font_class:"flag",unicode:"e65f",unicode_decimal:58975},{icon_id:"24855892",name:"flag-filled",font_class:"flag-filled",unicode:"e660",unicode_decimal:58976},{icon_id:"24855893",name:"gear-filled",font_class:"gear-filled",unicode:"e661",unicode_decimal:58977},{icon_id:"24855894",name:"home",font_class:"home",unicode:"e662",unicode_decimal:58978},{icon_id:"24855895",name:"home-filled",font_class:"home-filled",unicode:"e663",unicode_decimal:58979},{icon_id:"24855896",name:"gear",font_class:"gear",unicode:"e664",unicode_decimal:58980},{icon_id:"24855897",name:"smallcircle-filled",font_class:"smallcircle-filled",unicode:"e665",unicode_decimal:58981},{icon_id:"24855898",name:"map-filled",font_class:"map-filled",unicode:"e666",unicode_decimal:58982},{icon_id:"24855899",name:"map",font_class:"map",unicode:"e667",unicode_decimal:58983},{icon_id:"24855825",name:"refresh-filled",font_class:"refresh-filled",unicode:"e656",unicode_decimal:58966},{icon_id:"24855826",name:"refresh",font_class:"refresh",unicode:"e657",unicode_decimal:58967},{icon_id:"24855808",name:"cloud-upload",font_class:"cloud-upload",unicode:"e645",unicode_decimal:58949},{icon_id:"24855809",name:"cloud-download-filled",font_class:"cloud-download-filled",unicode:"e646",unicode_decimal:58950},{icon_id:"24855810",name:"cloud-download",font_class:"cloud-download",unicode:"e647",unicode_decimal:58951},{icon_id:"24855811",name:"cloud-upload-filled",font_class:"cloud-upload-filled",unicode:"e648",unicode_decimal:58952},{icon_id:"24855813",name:"redo",font_class:"redo",unicode:"e64a",unicode_decimal:58954},{icon_id:"24855814",name:"images-filled",font_class:"images-filled",unicode:"e64b",unicode_decimal:58955},{icon_id:"24855815",name:"undo-filled",font_class:"undo-filled",unicode:"e64c",unicode_decimal:58956},{icon_id:"24855816",name:"more",font_class:"more",unicode:"e64d",unicode_decimal:58957},{icon_id:"24855817",name:"more-filled",font_class:"more-filled",unicode:"e64e",unicode_decimal:58958},{icon_id:"24855818",name:"undo",font_class:"undo",unicode:"e64f",unicode_decimal:58959},{icon_id:"24855819",name:"images",font_class:"images",unicode:"e650",unicode_decimal:58960},{icon_id:"24855821",name:"paperclip",font_class:"paperclip",unicode:"e652",unicode_decimal:58962},{icon_id:"24855822",name:"settings",font_class:"settings",unicode:"e653",unicode_decimal:58963},{icon_id:"24855823",name:"search",font_class:"search",unicode:"e654",unicode_decimal:58964},{icon_id:"24855824",name:"redo-filled",font_class:"redo-filled",unicode:"e655",unicode_decimal:58965},{icon_id:"24841702",name:"list",font_class:"list",unicode:"e644",unicode_decimal:58948},{icon_id:"24841489",name:"mail-open-filled",font_class:"mail-open-filled",unicode:"e63a",unicode_decimal:58938},{icon_id:"24841491",name:"hand-thumbsdown-filled",font_class:"hand-down-filled",unicode:"e63c",unicode_decimal:58940},{icon_id:"24841492",name:"hand-thumbsdown",font_class:"hand-down",unicode:"e63d",unicode_decimal:58941},{icon_id:"24841493",name:"hand-thumbsup-filled",font_class:"hand-up-filled",unicode:"e63e",unicode_decimal:58942},{icon_id:"24841494",name:"hand-thumbsup",font_class:"hand-up",unicode:"e63f",unicode_decimal:58943},{icon_id:"24841496",name:"heart-filled",font_class:"heart-filled",unicode:"e641",unicode_decimal:58945},{icon_id:"24841498",name:"mail-open",font_class:"mail-open",unicode:"e643",unicode_decimal:58947},{icon_id:"24841488",name:"heart",font_class:"heart",unicode:"e639",unicode_decimal:58937},{icon_id:"24839963",name:"loop",font_class:"loop",unicode:"e633",unicode_decimal:58931},{icon_id:"24839866",name:"pulldown",font_class:"pulldown",unicode:"e632",unicode_decimal:58930},{icon_id:"24813798",name:"scan",font_class:"scan",unicode:"e62a",unicode_decimal:58922},{icon_id:"24813786",name:"bars",font_class:"bars",unicode:"e627",unicode_decimal:58919},{icon_id:"24813788",name:"cart-filled",font_class:"cart-filled",unicode:"e629",unicode_decimal:58921},{icon_id:"24813790",name:"checkbox",font_class:"checkbox",unicode:"e62b",unicode_decimal:58923},{icon_id:"24813791",name:"checkbox-filled",font_class:"checkbox-filled",unicode:"e62c",unicode_decimal:58924},{icon_id:"24813794",name:"shop",font_class:"shop",unicode:"e62f",unicode_decimal:58927},{icon_id:"24813795",name:"headphones",font_class:"headphones",unicode:"e630",unicode_decimal:58928},{icon_id:"24813796",name:"cart",font_class:"cart",unicode:"e631",unicode_decimal:58929}]};const Se=he({name:"UniIcons",emits:["click"],props:{type:{type:String,default:""},color:{type:String,default:"#333333"},size:{type:[Number,String],default:16},customPrefix:{type:String,default:""}},data:()=>({icons:Ie.glyphs}),computed:{unicode(){let e=this.icons.find((e=>e.font_class===this.type));return e?unescape(`%u${e.unicode}`):""},iconSize(){return"number"==typeof(e=this.size)||/^[0-9]*$/g.test(e)?e+"px":e;var e}},methods:{_onClick(){this.$emit("click")}}},[["render",function(e,c,o,d,s,u){const _=n;return l(),i(_,{style:a({color:o.color,"font-size":u.iconSize}),class:t(["uni-icons",["uniui-"+o.type,o.customPrefix,o.customPrefix?o.type:""]]),onClick:u._onClick},null,8,["style","class","onClick"])}],["__scopeId","data-v-fd626ef1"]]),Te=he({__name:"dish-menu",props:{list:{type:Array,default:()=>[]},menuId:{type:Number,default:null}},emits:["update:menuId"],setup(e,{emit:a}){const x=e,C=c(0),A=c(0),I=c([]),S=c(!1),T=c(!1),L=c(0);o((()=>x.list),(async e=>{if(await d(),!e||0==e.length)return;const l=s().in(this);if(e.map(((e,i)=>{l.select(`#scroll-item-${i}`).boundingClientRect((e=>{if(!e)return;const l=I.value;l[i]=e.width+10,I.value=l})).exec()})),x.menuId>0){const e=x.list.findIndex((e=>e.category_id==x.menuId));e>-1&&P(e)}l.select("#ti-menu-box").boundingClientRect((e=>{I.value.reduce(((e,l)=>e+l),0)>(null==e?void 0:e.width)?T.value=!0:T.value=!1})).exec()}),{deep:!0,immediate:!0});const P=e=>{A.value=e,C.value=I.value.slice(0,e+1).reduce(((e,l)=>e+l),0)-(I.value[e]+100),a("update:menuId",x.list[e].category_id)},U=e=>{0!=e.detail.scrollLeft?S.value=!0:S.value=!1,!T.value&&L.value>e.detail.scrollLeft&&(T.value=!0),L.value=e.detail.scrollLeft},O=e=>{T.value=!1};function N(){C.value=L.value+y().screenWidth/2,L.value=C.value,S.value=!0}function B(){C.value=L.value-y().screenWidth/2,L.value=C.value,T.value=!0}return(e,a)=>{const c=n,o=w,d=k,s=u(_("uni-icons"),Se);return l(),r("div",{id:"ti-menu-box"},[f(d,{class:"ti-dish-menu","scroll-left":C.value,"scroll-x":"","enable-flex":"","scroll-with-animation":"",onScroll:U,onScrolltolower:O},{default:m((()=>[f(o,{class:"ti-menu-content"},{default:m((()=>[(l(!0),r(p,null,v(x.list,((a,n)=>(l(),i(o,{key:n,class:t(["ti-menu-item",{active:n==A.value}]),id:`scroll-item-${n}`,onClick:e=>P(n)},{default:m((()=>[f(c,{class:"ti-menu-title"},{default:m((()=>[h(b(0===n?e.$t(a.name_text):a.name_text),1)])),_:2},1024)])),_:2},1032,["id","class","onClick"])))),128))])),_:1})])),_:1},8,["scroll-left"]),T.value?(l(),i(o,{key:0,class:"stepper stepper-right",onClick:N},{default:m((()=>[f(o,{class:"ti-category-btn"},{default:m((()=>[f(s,{type:"right",size:"11",color:"#000000"})])),_:1})])),_:1})):g("",!0),S.value?(l(),i(o,{key:1,class:"stepper stepper-left",onClick:B},{default:m((()=>[f(o,{class:"ti-category-btn"},{default:m((()=>[f(s,{type:"left",size:"11",color:"#000000"})])),_:1})])),_:1})):g("",!0)])}}},[["__scopeId","data-v-a26111e9"]]),Le=he({__name:"dish-category",props:{categoryId:{type:Number,default:null}},emits:["update:categoryId","update:isSpecial"],setup(a,{emit:n}){const T=c([]),L=c(0),P=c(0),U=x((()=>{let e=(T.value.find((e=>e.category_id==L.value))||{}).child||[];return e&&e.length>0&&(e=[{name_text:C("全部"),category_id:0}].concat(e)),e})),O=x((()=>T.value.find((e=>e.category_id==L.value)))),N=x((()=>U.value.find((e=>e.category_id==P.value))));o((()=>L.value),(()=>{var e;z.value=!1,j.value=!1,U&&U.value.length>0&&(P.value=U.value[0].category_id,d((()=>{const e=s().in(this);e.selectAll(".ti-secondary-item").boundingClientRect(),e.select("#ti-dish-secondary-box").boundingClientRect(),e.exec((e=>{var l,i;(null==(l=e[0])?void 0:l.reduce(((e,l)=>e+l.width+10),0))>(null==(i=e[1])?void 0:i.width)?z.value=!0:z.value=!1}))}))),K.value=0,n("update:isSpecial",null==(e=O.value)?void 0:e.is_special),n("update:categoryId",L.value)}));const B=async(l,i)=>{try{const a=await function(l){return e("product.category/index",{},{isLoading:l})}(l);a.data.list&&(T.value=[{name_text:C("全部"),category_id:0}].concat(a.data.list),i&&(L.value=T.value[0].category_id))}catch(a){}};B(!0,!0),A("closeShowLanguage",(e=>{e.isSelectLanguage&&I()&&setTimeout((()=>{B(!1)}),500)})),A("refresh",(e=>{B(!1,!1)}));const R=c(0),j=c(!1),z=c(!1),K=c(0),D=e=>{0!=e.detail.scrollLeft?j.value=!0:j.value=!1,!z.value&&K.value>e.detail.scrollLeft&&(z.value=!0),K.value=e.detail.scrollLeft},F=e=>{z.value=!1};function q(){R.value=K.value+y().screenWidth/2,K.value=R.value,j.value=!0}function E(){R.value=K.value-y().screenWidth/2,K.value=R.value,z.value=!0}return(e,a)=>{const c=w,o=k,d=u(_("uni-icons"),Se);return l(),i(c,{class:"ti-category-box"},{default:m((()=>[f(Te,{list:T.value,menuId:L.value,"onUpdate:menuId":a[0]||(a[0]=e=>L.value=e)},null,8,["list","menuId"]),f(c,{id:"ti-dish-secondary-box"},{default:m((()=>[f(o,{class:"ti-dish-secondary-menu","scroll-x":"","enable-flex":"","scroll-with-animation":"","scroll-left":R.value,onScroll:D,onScrolltolower:F},{default:m((()=>[f(c,{class:"ti-dish-secondary"},{default:m((()=>[(l(!0),r(p,null,v(S(U),((e,a)=>(l(),i(c,{key:a,class:t([{active:e.category_id==P.value},"ti-secondary-item"]),onClick:l=>{return i=e.category_id,P.value=i,n("update:isSpecial",null==(a=N.value)?void 0:a.is_special),void n("update:categoryId",P.value>0?P.value:L.value);var i,a}},{default:m((()=>[h(b(0===a?S(C)(e.name_text):e.name_text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1},8,["scroll-left"]),z.value?(l(),i(c,{key:0,class:"stepper stepper-right",onClick:q},{default:m((()=>[f(c,{class:"ti-category-btn"},{default:m((()=>[f(d,{type:"right",size:"11",color:"#000000"})])),_:1})])),_:1})):g("",!0),j.value?(l(),i(c,{key:1,class:"stepper stepper-left",onClick:E},{default:m((()=>[f(c,{class:"ti-category-btn"},{default:m((()=>[f(d,{type:"left",size:"11",color:"#000000"})])),_:1})])),_:1})):g("",!0)])),_:1})])),_:1})}}},[["__scopeId","data-v-8ebc930e"]]);function Pe(l){return e("order.Order/add",l)}function Ue(l,i){return e("order.Order/getUnSendKitchen",l,{isLoading:i})}function Oe(l){return e("order.Order/sendKitchen",l,{isLoading:!0,isMessage:!1})}const Ne=he({__name:"goods-detail",props:{show:{type:Boolean,default:!1},productId:{type:Number,default:null}},emits:["update:show","success"],setup(a,{emit:d}){const s=a,y=c({}),x=c(!1),A=c(!1),I=c({product_id:null,product_num:1,price:null,product_price:null,product_sku_id:null,attr:[],feed:[],bag_price:0,delivery:T()?30:40,describe:null,is_buffet:1});o((()=>s.show),(()=>{s.show&&z()}));const z=async()=>{var l,i,a,t,n,c,o,d,u,_,r;if(!x.value||s.productId)try{x.value=!0;const f=await(r=s.productId,e("product.product/detail",{product_id:r}));y.value=f.data,I.value.product_id=null==(l=y.value)?void 0:l.product_id,I.value.price=null==(i=y.value)?void 0:i.product_price,I.value.product_price=null==(a=y.value)?void 0:a.product_price,I.value.is_buffet=null==(t=y.value)?void 0:t.is_buffet,(null==(n=y.value)?void 0:n.sku)&&(null==(c=y.value)?void 0:c.sku.length)>0&&(null==(o=y.value)||o.sku.some((e=>{if(e.stock_num>0)return I.value.product_sku_id=e.product_sku_id,!0}))),(null==(d=y.value)?void 0:d.product_attr)&&(null==(u=y.value)?void 0:u.product_attr.length)>0&&(null==(_=y.value)||_.product_attr.map(((e,l)=>{(null==e?void 0:e.attribute_value)&&(null==e?void 0:e.attribute_value.length)>0?I.value.attr[l]=0:I.value.attr[l]=null}))),I.value.feed&&I.value.feed.length>0&&(I.value.feed=[])}catch(f){}finally{x.value=!1}},K=async()=>{var e,l,i,a,t,n,c,o,s;if(A.value)return;const u={...I.value};u.attr=u.attr.join(","),u.feed=u.feed.join(",");let _=[];(null==(e=y.value)?void 0:e.sku)&&(null==(l=y.value)?void 0:l.sku.length)>0&&_.push(null==(i=y.value)?void 0:i.sku.find((e=>e.product_sku_id==I.value.product_sku_id)).spec_name_text),(null==(a=y.value)?void 0:a.product_attr)&&(null==(t=y.value)?void 0:t.product_attr.length)&&(null==(n=y.value)||n.product_attr.map(((e,l)=>{(null==e?void 0:e.attribute_value)&&(null==e?void 0:e.attribute_value.length)>0&&(null==e?void 0:e.attribute_value[I.value.attr[l]])&&_.push(null==e?void 0:e.attribute_value[I.value.attr[l]])}))),(null==(c=y.value)?void 0:c.product_feed)&&(null==(o=y.value)?void 0:o.product_feed.length)>0&&(null==(s=y.value)||s.product_feed.map(((e,l)=>{D(l)&&(_.push(e.feed_name_text),u.price=U(u.price,null==e?void 0:e.price))}))),u.describe=_.join(";"),u.delivery=T()?30:40,u.order_id=O(),u.table_id=N();try{A.value=!0;const e=await Pe(u);1==e.code&&(B(e.data.order_id),R({title:e.msg,icon:"none"}),d("update:show",!1),setTimeout((()=>{d("success")}),100))}catch(r){}finally{A.value=!1}},D=e=>I.value.feed.indexOf(e)>-1,F=(e,l)=>I.value.attr[e]==l;return(e,a)=>{const c=j,o=w,x=n,T=k,U=u(_("ti-modal"),re);return l(),i(U,{show:s.show,title:S(C)("商品詳情"),cancelText:S(C)("取消"),confirmText:S(C)("確定"),confirmLoading:A.value,onCancel:a[0]||(a[0]=e=>d("update:show",!1)),onConfirm:K},{content:m((()=>[f(o,{class:"ti-dialog-content"},{default:m((()=>[f(o,{class:"ti-detail-box"},{default:m((()=>[f(o,{class:"ti-detail-image"},{default:m((()=>{var e,a,t,n;return[(null==(e=y.value)?void 0:e.image)&&(null==(a=y.value)?void 0:a.image[0])&&(null==(t=y.value)?void 0:t.image[0].file_path)?(l(),i(c,{key:0,src:null==(n=y.value)?void 0:n.image[0].file_path,mode:"widthFix"},null,8,["src"])):g("",!0)]})),_:1}),f(o,{class:"ti-detail-con"},{default:m((()=>[f(o,{class:"ti-detail-title text-ellipsis"},{default:m((()=>{var e;return[h(b(null==(e=y.value)?void 0:e.product_name_text),1)]})),_:1}),f(o,{class:"ti-price-box"},{default:m((()=>[f(x,{class:"ti-detail-unit"},{default:m((()=>[h(b(S(C)("單價：")),1)])),_:1}),f(x,{class:"ti-detail-price"},{default:m((()=>{var e;return[h(b(S(L)((null==(e=y.value)?void 0:e.product_price)||0)),1)]})),_:1}),f(x,{class:"ti-detail-subPrice"},{default:m((()=>{var e;return[h(b(S(P)((null==(e=y.value)?void 0:e.product_price)||0)),1)]})),_:1})])),_:1}),f(o,{class:"ti-price-box"},{default:m((()=>[f(x,{class:"ti-detail-unit"},{default:m((()=>[h(b(S(C)("單位：")),1)])),_:1}),f(x,{class:"ti-detail-price"},{default:m((()=>{var e;return[h(b(null==(e=y.value)?void 0:e.product_unit_text),1)]})),_:1})])),_:1})])),_:1})])),_:1}),f(o,{class:"ti-detail-specs"},{default:m((()=>[f(T,{"scroll-y":""},{default:m((()=>[f(o,{class:"ti-specs-box"},{default:m((()=>{var e,a,n,c,d,s,u;return[(null==(e=y.value)?void 0:e.sku)&&(null==(a=y.value)?void 0:a.sku.length)>0?(l(),i(o,{key:0,class:"ti-specs-item"},{default:m((()=>[f(o,{class:"ti-specs-title"},{default:m((()=>[h(b(S(C)("規格")),1)])),_:1}),f(o,{class:"ti-specs-child"},{default:m((()=>{var e;return[(l(!0),r(p,null,v(null==(e=y.value)?void 0:e.sku,(e=>(l(),i(o,{key:e.product_sku_id,class:t([{active:e.product_sku_id==I.value.product_sku_id,disabled:e.stock_num<=0},"ti-child-item"]),onClick:l=>(e=>{e.stock_num<=0||I.value.product_sku_id!=e.product_sku_id&&(I.value.product_sku_id=e.product_sku_id)})(e)},{default:m((()=>[f(x,{class:"ti-child-name"},{default:m((()=>[h(b(e.spec_name_text),1)])),_:2},1024),f(x,{class:"ti-child-price"},{default:m((()=>[h(b(S(L)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024),f(x,{class:"ti-child-subPrice"},{default:m((()=>[h(b(S(P)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1})):g("",!0),(null==(n=y.value)?void 0:n.product_attr)&&(null==(c=y.value)?void 0:c.product_attr.length)>0?(l(!0),r(p,{key:1},v(null==(d=y.value)?void 0:d.product_attr,((e,a)=>(l(),i(o,{key:a,class:"ti-specs-item"},{default:m((()=>[f(o,{class:"ti-specs-title"},{default:m((()=>[h(b(e.attribute_name_text),1)])),_:2},1024),f(o,{class:"ti-specs-child"},{default:m((()=>[(l(!0),r(p,null,v(null==e?void 0:e.attribute_value_text,((e,n)=>(l(),i(o,{key:n,class:t([{active:F(a,n)},"ti-child-item"]),onClick:e=>((e,l)=>{I.value.attr[e]=l})(a,n)},{default:m((()=>[f(x,{class:"ti-child-name"},{default:m((()=>[h(b(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)])),_:2},1024)))),128)):g("",!0),(null==(s=y.value)?void 0:s.product_feed)&&(null==(u=y.value)?void 0:u.product_feed.length)>0?(l(),i(o,{key:2,class:"ti-specs-item"},{default:m((()=>[f(o,{class:"ti-specs-title"},{default:m((()=>[h(b(S(C)("加料")),1)])),_:1}),f(o,{class:"ti-specs-child"},{default:m((()=>{var e;return[(l(!0),r(p,null,v(null==(e=y.value)?void 0:e.product_feed,((e,a)=>(l(),i(o,{key:a,class:t([{active:D(a)},"ti-child-item"]),onClick:e=>(e=>{const l=I.value.feed.indexOf(e);l>=0?I.value.feed.splice(l,1):I.value.feed.push(e)})(a)},{default:m((()=>[f(x,{class:"ti-child-name"},{default:m((()=>[h(b(e.feed_name_text),1)])),_:2},1024),f(x,{class:"ti-child-price"},{default:m((()=>[h(b(S(L)((null==e?void 0:e.price)||0)),1)])),_:2},1024),f(x,{class:"ti-child-subPrice"},{default:m((()=>[h(b(S(P)((null==e?void 0:e.price)||0)),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))]})),_:1})])),_:1})):g("",!0)]})),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show","title","cancelText","confirmText","confirmLoading"])}}},[["__scopeId","data-v-9d75414c"]]),Be=he({__name:"dish-car-order-nav",emits:["car","confirm"],setup(e,{expose:a,emit:t}){const o=()=>{t("car")},d=()=>{t("confirm")},s=c(),u=c(!1),_=async()=>{var e;try{const l=await Ue({table_id:N()},!1);s.value=(null==(e=l.data)?void 0:e.detail)||{},s.value.totalNum>0?u.value=!0:u.value=!1}catch(l){}};return _(),a({getCarData:_}),(e,a)=>{const t=j,c=n,_=w;return l(),i(_,{class:"ti-car-order"},{default:m((()=>[f(_,{class:"ti-order-total",onClick:o},{default:m((()=>[f(t,{class:"ti-total-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE9SURBVHgB7ZjxrcIgEMY/Xt4AbvAYwRHc4DmKbuAG6gR1A92g3UA3sE6gTnAesZqG1gLKSf/oL7nQwKV8Be6AAj1DPR6IaMTF6NmgVIlUGDFsR2qSVUJ7I8iQIwWVKF2zWU3UBH2AhexJhtx8dFufPw5NF8gwYTu2jbxLkIYsmV3hEiQdYdoepdSCGn38OpzXbP+Qo2Q7YCAA9aqhyhNbyK6jHe+Zcy9PFrQgec52v11R9o0IayTe1IJKu6JL0B8S4EqM0lztii5BGvIELWoNeU52ReopC4qyAvL472PmWECyZAiF5LJ1Ti9uM8pDlMb9yKnxOWbNHHj/KjDwJs4pq8PTN+VizFb4DHuofxD88qW1MGcx/UPFjFsi5RzLv84nmTr0eBL3OEPNnxGrmP7vCDKXuk2V1Bax/Qd8uQE+N6CHpHz4IAAAAABJRU5ErkJggg=="}),f(c,{class:"ti-total-price"},{default:m((()=>{var e;return[h(b(S(L)((null==(e=s.value)?void 0:e.total_product_price)||0)),1)]})),_:1}),f(c,{class:"ti-total-subPrice"},{default:m((()=>{var e;return[h(b(S(P)((null==(e=s.value)?void 0:e.total_product_price)||0)),1)]})),_:1})])),_:1}),u.value?(l(),i(_,{key:0,class:"ti-total-badge-box"},{default:m((()=>[f(c,{class:"ti-total-badge"},{default:m((()=>{var e;return[h(b(null==(e=s.value)?void 0:e.totalNum),1)]})),_:1})])),_:1})):g("",!0),f(_,{class:"ti-order-btn",onClick:d},{default:m((()=>[f(c,{class:"ti-btn-text"},{default:m((()=>[h(b(e.$t("下單")),1)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-8a746374"]]),Re=he({__name:"cart-number",props:{productItem:{type:Object,default:()=>({})},isOverTime:{type:Boolean,default:!1},buyContinue:{type:Boolean,default:!1}},emits:["change"],setup(a,{emit:t}){const n=a,o=c(!1),d=async l=>{var i,a,c;if(0==n.buyContinue&&1==n.isOverTime&&"up"==l)return void K("buffet_remain",C("用餐時間已到，無法繼續下單"));if(1==n.isOverTime&&1==(null==(i=n.productItem)?void 0:i.is_buffet_product)&&"up"==l)return void K("buffet_remain",C("自助餐时间已到达，自助餐商品不可继续下单"));const d={order_product_id:null==(a=n.productItem)?void 0:a.order_product_id,product_num:null==(c=n.productItem)?void 0:c.total_num,type:l};"up"==l?d.product_num+=1:d.product_num-=1;try{o.value=!0;const l=await function(l){return e("order.Order/sub",l)}(d);1==l.code&&t("change")}catch(s){}finally{o.value=!1}};return(e,t)=>{const n=w;return l(),i(n,{class:"ti-number-box",onClick:t[2]||(t[2]=z((()=>{}),["stop"]))},{default:m((()=>[f(n,{class:"ti-number-btn ti-number-minus",disabled:!1,onClick:t[0]||(t[0]=e=>d("down"))},{default:m((()=>[f(n,{class:"ti-number-minus-reduce"})])),_:1}),f(n,{class:"ti-number-input"},{default:m((()=>[h(b(a.productItem.total_num),1)])),_:1}),f(n,{class:"ti-number-btn ti-number-plus",disabled:!1,onClick:t[1]||(t[1]=e=>d("up"))},{default:m((()=>[f(n,{class:"ti-number-plus-add"}),f(n,{class:"ti-number-plus-add2"})])),_:1})])),_:1})}}},[["__scopeId","data-v-a257d356"]]),je=he({__name:"dish-car-ordering-list",props:{isOverTime:{type:Boolean,default:!1},buyContinue:{type:Boolean,default:!1}},emits:["success","change","sendkitchenFail"],setup(e,{emit:a}){const t=e,o=c(!1),d=c(),s=c(),y=c({table_id:""}),x=async e=>{var l;y.table_id=N();try{const e=await Ue(y,!1);d.value=e.data.detail,s.value=(null==(l=e.data.detail)?void 0:l.unSendKitchenProduct)||[],a("change")}catch(i){}},I=async e=>{try{o.value=!0;const e=await Oe({table_id:N()});R({title:C(e.msg),icon:"none"}),setTimeout((()=>{a("success")}),500)}catch(l){a("sendkitchenFail",l)}finally{o.value=!1}};return x(),A("handleDelProuct",(e=>{x()})),(e,a)=>{const c=w,o=n,y=k,A=u(_("ti-button"),be),T=u(_("ti-empty-data"),ge);return l(),i(c,{class:"ti-shop-list-box"},{default:m((()=>{var e,n;return[(null==(e=s.value)?void 0:e.length)>0?(l(),i(c,{key:0,class:"ti-shop-list"},{default:m((()=>[f(c,null,{default:m((()=>[f(c,{class:"ti-cart-shop-head"},{default:m((()=>[f(c,{class:"ti-shop-head-title"},{default:m((()=>[h(b(S(C)("商品名稱")),1)])),_:1}),f(c,{class:"ti-shop-head-money"},{default:m((()=>[h(b(S(C)("金額")),1)])),_:1}),f(c,{class:"ti-shop-head-num"},{default:m((()=>[h(b(S(C)("數量")),1)])),_:1})])),_:1})])),_:1}),f(c,{class:"ti-scroll-box"},{default:m((()=>[f(y,{class:"ti-shop-scroll","scroll-y":""},{default:m((()=>[f(c,{class:"ti-shop-box"},{default:m((()=>[(l(!0),r(p,null,v(s.value,((e,n)=>(l(),i(c,{class:"ti-shop-item",key:e},{default:m((()=>[f(c,{class:"ti-shop-item-box"},{default:m((()=>[f(c,{class:"ti-shop-box"},{default:m((()=>[f(c,{class:"ti-shop-body-top"},{default:m((()=>[f(c,{class:"ti-shop-title text-ellipsis"},{default:m((()=>[h(b(e.product_name_text),1)])),_:2},1024),f(c,{class:"ti-shop-spec"},{default:m((()=>[h(b(e.product_attr),1)])),_:2},1024)])),_:2},1024),f(c,{class:"ti-shop-body-money"},{default:m((()=>[f(o,{class:"ti-shop-price"},{default:m((()=>[h(b(S(L)((null==e?void 0:e.total_pay_price)||0)),1)])),_:2},1024),f(o,{class:"ti-shop-subPrice"},{default:m((()=>[h(b(S(P)((null==e?void 0:e.total_pay_price)||0)),1)])),_:2},1024)])),_:2},1024),f(c,{class:"ti-shop-body-number"},{default:m((()=>[f(Re,{buyContinue:t.buyContinue,isOverTime:t.isOverTime,productItem:e,onChange:a[0]||(a[0]=e=>x())},null,8,["buyContinue","isOverTime","productItem"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1}),f(c,{class:"ti-content-bottom"},{default:m((()=>[f(c,{class:"ti-car-shop-bottom"},{default:m((()=>[f(c,{class:"ti-shop-bottom-item"},{default:m((()=>[f(c,null,{default:m((()=>[f(o,{class:"ti-shop-bottom-text"},{default:m((()=>{var e;return[h(b(S(C)("共")+((null==(e=d.value)?void 0:e.unSendKitchenProductTotalNum)||0)+S(C)("件")),1)]})),_:1})])),_:1}),f(c,null,{default:m((()=>[f(o,{class:"ti-shop-bottom-text"},{default:m((()=>[h(b(S(C)("小計：")),1)])),_:1}),f(o,{class:"ti-shop-bottom-price"},{default:m((()=>{var e;return[h(b(S(L)((null==(e=d.value)?void 0:e.unSendKitchenProductTotalPrice)||0)),1)]})),_:1}),f(o,{class:"ti-shop-bottom-subPrice"},{default:m((()=>{var e;return[h(b(S(P)((null==(e=d.value)?void 0:e.unSendKitchenProductTotalPrice)||0)),1)]})),_:1})])),_:1})])),_:1})])),_:1}),f(A,{title:S(C)("確認下單"),type:"primary",onClick:I},null,8,["title"])])),_:1})])),_:1})):g("",!0),(null==(n=s.value)?void 0:n.length)<=0?(l(),i(c,{key:1,class:"ti-empty-data-box"},{default:m((()=>[f(T,{title:S(C)("當前無待下單商品")},null,8,["title"])])),_:1})):g("",!0)]})),_:1})}}},[["__scopeId","data-v-0c6353cf"]]),ze=he({__name:"dish-car-ordered-list",setup(a){const t=c([]);(async()=>{try{const i=await(l={table_id:N()},e("order.Order/getSendKitchen",l));t.value=i.data.list||[]}catch(i){}var l})();return(e,a)=>{const c=w,o=n,d=k,s=u(_("ti-empty-data"),ge);return l(),i(c,{class:"ti-shop-list"},{default:m((()=>[Object.keys(t.value).length>0?(l(),i(d,{key:0,class:"ti-shop-scroll","scroll-y":""},{default:m((()=>[(l(!0),r(p,null,v(t.value,((e,a)=>(l(),i(c,{class:"ti-shop-item",key:a},{default:m((()=>[f(c,{class:"ti-shop-time-top"}),f(c,{class:"ti-shop-time-box"},{default:m((()=>[h(b(e.date+" "+S(C)("下單")),1)])),_:2},1024),(l(!0),r(p,null,v(e.plist,((a,t)=>(l(),i(c,{key:t},{default:m((()=>[f(c,{class:"ti-shop-item-box"},{default:m((()=>[f(c,{class:"ti-shop-box"},{default:m((()=>[f(c,{class:"ti-shop-body-top"},{default:m((()=>[f(c,{class:"ti-shop-title text-ellipsis"},{default:m((()=>[h(b(a.product_name_text||a.name_text),1)])),_:2},1024),f(c,{class:"ti-shop-spec"},{default:m((()=>[h(b(a.product_attr),1)])),_:2},1024)])),_:2},1024),f(c,{class:"ti-shop-body-money"},{default:m((()=>[f(o,{class:"ti-shop-price"},{default:m((()=>[h(b(S(L)((null==a?void 0:a.total_product_price)||0)),1)])),_:2},1024),f(o,{class:"ti-shop-subPrice"},{default:m((()=>[h(b(S(P)((null==a?void 0:a.total_product_price)||0)),1)])),_:2},1024)])),_:2},1024),f(c,{class:"ti-shop-body-state"},{default:m((()=>[null!=a.finish_num?(l(),i(c,{key:0,class:"ti-state-left"},{default:m((()=>[h(b(null!=a.finish_num?a.finish_num:a.num),1)])),_:2},1024)):g("",!0),null!=a.finish_num?(l(),i(c,{key:1,class:"ti-state-line"},{default:m((()=>[h("/")])),_:1})):g("",!0),f(c,{class:"ti-state-right"},{default:m((()=>[h(b(a.total_num||a.num),1)])),_:2},1024),null!=a.finish_num?(l(),i(c,{key:2,class:"ti-state-text"},{default:m((()=>{return[h(b((e=null!=a.finish_num?a.kitchen_status:a.is_comb,C(0===e?"製作中":1===e?"已完成":"未知"))),1)];var e})),_:2},1024)):g("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),t!=e.length-1?(l(),i(c,{key:0,class:"ti-shop-item-box-bottom-border"})):g("",!0)])),_:2},1024)))),128))])),_:2},1024)))),128))])),_:1})):g("",!0),Object.keys(t.value).length<=0?(l(),i(s,{key:1,class:"ti-empty-data",title:S(C)("當前無已下單商品")},null,8,["title"])):g("",!0)])),_:1})}}},[["__scopeId","data-v-dea5eece"]]),Ke=he({__name:"goods-not-enough",props:{show:{type:Boolean,default:!1},productList:{type:Array,default:[]}},emits:["update:show","confirm"],setup(e,{emit:a}){const t=e,c=()=>{a("confirm")};return(o,d)=>{const s=n,g=w,y=k,x=u(_("ti-modal"),re);return l(),i(x,{class:"ti-action-tip",show:t.show,isCancelShow:!1,title:o.$t("温馨提示"),confirmText:o.$t("確定"),onCancel:d[0]||(d[0]=e=>a("update:show",!1)),onConfirm:c},{content:m((()=>[f(g,{class:"ti-dialog-content"},{default:m((()=>[f(g,{class:"ti-detail-box"},{default:m((()=>[f(s,{class:"ti-detail-des"},{default:m((()=>[h(b(o.$t("商品庫存不足，請重新選擇")),1)])),_:1})])),_:1}),f(g,{class:"ti-detail-specs"},{default:m((()=>[f(y,{"scroll-y":""},{default:m((()=>[(l(!0),r(p,null,v(e.productList,((e,a)=>(l(),i(g,{class:"ti-specs-box"},{default:m((()=>[f(g,{class:"ti-specs-item"},{default:m((()=>[f(g,{class:"ti-specs-title"},{default:m((()=>[h(b(e.product_name_text),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1})])),_:1},8,["show","title","confirmText"])}}},[["__scopeId","data-v-a9bc6e2e"]]),De=he({__name:"dish-list",emits:["success"],setup(a,{emit:d}){const s=c(!1),y=c({category_id:null,shop_supplier_id:null,page:1,list_rows:100}),x=c([]),U=c(!1),B=c(),z=c(!1),K=c(!1),V=c(0);c(!1);const W=c(!1),H=c(!1),J=c("");c(!1);const Y=c(!1);o((()=>y.value.category_id),(()=>{Z()}));const M=(e=!1)=>{we.value.getCarData(),Z(e)},G=()=>{z.value&&(y.value.page+=1,le())},X=e=>{H.value=!0,J.value=e},Z=e=>{y.value.page=1,y.value.shop_supplier_id=D(),le(e)},ee=c(0),le=async l=>{var i,a,t,n,c,o;if(U.value)return;const d={...y.value};d.category_id||(d.category_id=null),1==ee.value&&(d.is_special=1);try{l&&(U.value=!0);const s=await function(l){return e("product.product/index",l,{isLoading:!1})}(d);let u=x.value||[];1==y.value.page&&(u=[]),u=u.concat((null==(a=null==(i=s.data)?void 0:i.list)?void 0:a.data)||[]),x.value=u,z.value=(null==(n=null==(t=s.data)?void 0:t.list)?void 0:n.last_page)>(null==(o=null==(c=s.data)?void 0:c.list)?void 0:o.current_page)}catch(s){}finally{l&&(U.value=!1)}};Z(),A("closeShowLanguage",(e=>{e.isSelectLanguage&&I()&&setTimeout((()=>{Z()}),500)})),A("refresh",(e=>{Z()})),c([]);const ie=c(),ae=()=>{ie.value=!0,ve.value=!0},te=()=>{ce(!1)},ne=c([]),ce=async e=>{var l;try{const i=await Ue({table_id:N()},e);ne.value=(null==(l=i.data.detail)?void 0:l.unSendKitchenProduct)||[],ne.value.length>0?ue():(ie.value=!0,ve.value=!1)}catch(i){}},oe=async e=>{var l;const i={product_id:e.product_id,product_num:1,price:e.product_price,product_price:e.product_price,product_sku_id:null==(l=e.sku[0])?void 0:l.product_sku_id,attr:"",feed:"",bag_price:e.bag_price,delivery:T()?30:40,describe:"",is_buffet:e.is_buffet,table_id:N()};i.order_id=O();try{const e=await Pe(i);R({title:e.msg,icon:"none"}),M(!1)}catch(a){}},de=c([]),se=c(!1),ue=async()=>{try{const e=await Oe({table_id:N()});R({title:C(e.msg),icon:"none"}),setTimeout((()=>{d("success"),we.value.getCarData(),ie.value=!0,ve.value=!1}),300)}catch(e){me(e)}},_e=(e,l)=>{e||(ie.value=!1)},me=e=>{0==e.data.length?X(e.msg):(de.value=e.data,se.value=!0)};c([]);const pe=async()=>{se.value=!1},ve=c(!0),he=e=>{ve.value=e},be=()=>{ve.value=!1};ve.value=!0;const we=c(),ke=c(-1),xe=c(!0);return F((()=>{A("globalLock",(e=>{W.value=1==e})),A("remind",(e=>{const l=-1!=parseInt(e.buffet_expired_time);if(xe.value=e.is_buy_continue,!l)return;const i=e.buffet_remaining_time,a=60*parseInt(e.minute);i<=a&&ke.value>=a&&(V.value=e.minute,K.value=!0),ke.value=i})),A("buffetOver",(e=>{const l=Y.value;Y.value=0==e,Y.value!=l&&1==Y.value&&(K.value=!0)})),A("buffet_remain",(e=>{X(e)}))})),q((()=>{E("globalLock"),E("closeShowLanguage"),E("refresh"),E("buffet_remain")})),(e,a)=>{const c=u(_("ti-loading"),fe),o=j,d=n,A=w,I=u(_("ti-empty-data"),ge),T=k,O=u(_("ti-drawer"),ye),N=u(_("ti-modal"),re);return l(),r(p,null,[f(A,{class:"ti-dish-box"},{default:m((()=>[f(Le,{categoryId:y.value.category_id,"onUpdate:categoryId":a[0]||(a[0]=e=>y.value.category_id=e),isSpecial:ee.value,"onUpdate:isSpecial":a[1]||(a[1]=e=>ee.value=e)},null,8,["categoryId","isSpecial"]),f(A,{class:"ti-dish-list"},{default:m((()=>[f(T,{class:"ti-scroll","scroll-y":"","lower-threshold":50,onScrolltolower:G},{default:m((()=>[U.value?(l(),i(c,{key:0})):x.value&&x.value.length>0?(l(),r(p,{key:1},[f(A,{class:"ti-dish-goods"},{default:m((()=>[(l(!0),r(p,null,v(x.value,((e,a)=>(l(),i(A,{key:a,class:t([{"sold-out":e.product_stock<=0||1==e.limit_num_status},"ti-goods-item"]),onClick:l=>(e=>{if(e.product_stock<=0)return R({title:C("已售罄"),icon:"none"});if(1==e.limit_num_status)return R({title:C("已限購"),icon:"none"});if(0!=xe.value||1!=Y.value)if(1!=Y.value||1!=e.is_buffet){if((null==e?void 0:e.sku)&&(null==e?void 0:e.sku.length)<=1&&e.product_attr&&0==e.product_attr.length&&e.product_feed&&0==e.product_feed.length)return oe(e);s.value=!0,B.value=e.product_id}else X(C("自助餐时间已到达，自助餐商品不可继续下单"));else X(C("用餐時間已到，無法繼續下單"))})(e)},{default:m((()=>[f(A,{class:"ti-goods-image"},{default:m((()=>[e.image&&e.image[0]&&e.image[0].file_path?(l(),i(o,{key:0,src:e.image[0].file_path,mode:"widthFix"},null,8,["src"])):g("",!0),e.product_stock<=0?(l(),i(d,{key:1,class:"sold-out-text"},{default:m((()=>[h(b(S(C)("已售罄")),1)])),_:1})):g("",!0),1==e.limit_num_status?(l(),i(d,{key:2,class:"sold-out-text"},{default:m((()=>[h(b(S(C)("已限購")),1)])),_:1})):g("",!0)])),_:2},1024),f(A,{class:"ti-goods-content"},{default:m((()=>[f(A,{class:"ti-goods-title line-clamp-2"},{default:m((()=>[h(b(e.product_name_text),1)])),_:2},1024),f(A,{class:"ti-price-box"},{default:m((()=>[f(d,{class:"ti-goods-price"},{default:m((()=>[h(b(S(L)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024),f(d,{class:"ti-goods-subPrice"},{default:m((()=>[h(b(S(P)((null==e?void 0:e.product_price)||0)),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),1==(null==e?void 0:e.is_buffet)&&(null==e?void 0:e.buffet_limit_num)>0||0==(null==e?void 0:e.is_buffet)&&(null==e?void 0:e.limit_num)>0?(l(),i(A,{key:0,class:"ti-restriction"},{default:m((()=>[h(b(S($)("限購{count}份",{count:1==(null==e?void 0:e.is_buffet)?null==e?void 0:e.buffet_limit_num:(null==e?void 0:e.limit_num)||0})),1)])),_:2},1024)):g("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1}),f(c,{status:z.value?"loading":"no-more"},null,8,["status"])],64)):(l(),i(I,{key:2}))])),_:1})])),_:1}),f(A,{class:"ti-car-order-nav"},{default:m((()=>[f(Be,{ref_key:"carRef",ref:we,onCar:ae,onConfirm:te},null,512)])),_:1})])),_:1}),f(Ne,{show:s.value,"onUpdate:show":a[2]||(a[2]=e=>s.value=e),productId:B.value,onSuccess:M},null,8,["show","productId"]),f(Ke,{style:{"z-index":"9999"},show:se.value,"onUpdate:show":a[3]||(a[3]=e=>se.value=e),productList:de.value,onConfirm:pe},null,8,["show","productList"]),f(O,{show:ie.value,width:603.992,title:S(C)("我點的菜"),maskClick:!0,onChange:_e},{content:m((()=>[f(A,{class:"ti-drawer-content"},{default:m((()=>[f(A,{class:"ti-content-head"},{default:m((()=>[f(A,{class:"ti-switch-box"},{default:m((()=>[f(A,{class:t(ve.value?"ti-switch-on":"ti-switch-off"),onClick:a[4]||(a[4]=e=>he(!0))},{default:m((()=>[f(d,{class:t(ve.value?"ti-switch-text-on":"ti-switch-text-off")},{default:m((()=>[h(b(S(C)("未下單")),1)])),_:1},8,["class"])])),_:1},8,["class"]),f(A,{class:"ti-switch-space"}),f(A,{class:t(ve.value?"ti-switch-off":"ti-switch-on"),onClick:a[5]||(a[5]=e=>he(!1))},{default:m((()=>[f(d,{class:t(ve.value?"ti-switch-text-off":"ti-switch-text-on")},{default:m((()=>[h(b(S(C)("已下單")),1)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1})])),_:1}),ve.value?(l(),i(je,{key:0,buyContinue:xe.value,isOverTime:Y.value,onSuccess:be,onChange:M,onSendkitchenFail:me},null,8,["buyContinue","isOverTime"])):g("",!0),ve.value?g("",!0):(l(),i(ze,{key:1}))])),_:1})])),footer:m((()=>[f(A)])),_:1},8,["show","width","title"]),f(N,{class:"ti-action-tips",show:K.value,"onUpdate:show":a[6]||(a[6]=e=>K.value=e),isCancelShow:!1,content:Y.value?S(C)("如有需要，請呼叫服務員"):S(C)("請在剩餘時間完成選購"),onConfirm:a[7]||(a[7]=e=>K.value=!1)},{title:m((()=>[f(A,{class:"warning-header"},{default:m((()=>[f(A,{class:"warning-image-round"},{default:m((()=>[f(o,{class:"warning-image",src:Ce})])),_:1}),Y.value?(l(),i(A,{key:1,class:"warning-text"},{default:m((()=>[h(b(S(C)("時間結束")),1)])),_:1})):(l(),i(A,{key:0,class:"warning-text"},{default:m((()=>[f(d,null,{default:m((()=>[h(b(S(C)("剩余")),1)])),_:1}),f(d,{class:"warning-text red"},{default:m((()=>[h(b(V.value),1)])),_:1}),f(d,null,{default:m((()=>[h(b(S(C)("分鐘")),1)])),_:1})])),_:1}))])),_:1})])),default:m((()=>[Q("template",null,[f(A)])])),_:1},8,["show","content"]),f(N,{class:"ti-action-tips",show:W.value,"onUpdate:show":a[8]||(a[8]=e=>W.value=e),isCancelShow:!1,isConfirmShow:!1},{title:m((()=>[f(A,{class:"warning-header"},{default:m((()=>[f(A,{class:"warning-image-round"},{default:m((()=>[f(o,{class:"warning-image",src:Ae})])),_:1}),f(A,{class:"warning-text"},{default:m((()=>[h(b(S(C)("订单已锁定")),1)])),_:1})])),_:1})])),footer:m((()=>[f(A)])),_:1},8,["show"]),f(N,{class:"ti-action-tips",show:H.value,"onUpdate:show":a[9]||(a[9]=e=>H.value=e),isCancelShow:!1,isConfirmShow:!0,onConfirm:a[10]||(a[10]=e=>H.value=!1),title:S(C)("溫馨提示"),content:J.value},{title:m((()=>[f(A,{class:"warning-header"},{default:m((()=>[f(A,{class:"warning-image-round"},{default:m((()=>[f(o,{class:"warning-image",src:Ce})])),_:1}),f(A,{class:"warning-text"},{default:m((()=>[h(b(S(C)("温馨提示")),1)])),_:1})])),_:1})])),_:1},8,["show","title","content"])],64)}}},[["__scopeId","data-v-dfb468eb"]]),Fe=he({__name:"opentable-index",setup(e){we(),c(!1);const a=()=>{B()},t=()=>{K("refresh",{})},o=c(),d=c(),s=c("");c([]);const r=c(),p=c(!1),v=c({ip:"",port:"",device_id:""}),g=()=>{const e=Y();v.value.ip=(null==e?void 0:e.ip)||M()||"127.0.0.1",v.value.port=(null==e?void 0:e.port)||"8080"},y=e=>{v.value.ip=e},k=e=>{v.value.port=e},x=async()=>{var e;const l={...v.value};if(l.ip)if(l.port)try{const i=await ae(te(`${null==l?void 0:l.ip}:${l.port}`));ne(l),ce(i.data.app_id),oe(i.data.shop_supplier_id),Z(null==(e=i.data)?void 0:e.currency),setTimeout((()=>{p.value=!0}),150)}catch(i){R({title:C("绑定失败"),icon:"none"})}else R({title:C("請輸入連接埠"),icon:"none"});else R({title:C("請輸入伺服器位址"),icon:"none"})},T=e=>{p.value=!1,e&&(r.value=e,s.value=e.table_no)},L=()=>{g(),s.value=X().table_no,r.value=X()},P=async()=>{var e;const l={...v.value};if(l.ip)if(l.port)try{const i=await ae(te(`${null==l?void 0:l.ip}:${l.port}`));if(!r.value)return void R({title:C("請查找桌位"),icon:"none"});ne(l),ce(i.data.app_id),oe(i.data.shop_supplier_id),Z(null==(e=i.data)?void 0:e.currency),setTimeout((()=>{U()}),150)}catch(i){R({title:C("绑定失败"),icon:"none"})}else R({title:C("請輸入連接埠"),icon:"none"});else R({title:C("請輸入伺服器位址"),icon:"none"})},U=async()=>{if(N()===r.value.table_id)return R({title:C("绑定成功"),icon:"none"}),d.value=!1,de(!1),void setTimeout((()=>{se({url:"/pages/index/index"})}),150);try{await ue({table_id:r.value.table_id,old_table_id:N()});_e(r.value),R({title:C("绑定成功"),icon:"none"}),d.value=!1,de(!1),setTimeout((()=>{se({url:"/pages/index/index"})}),150)}catch(e){}},O=c(!1),B=()=>{O.value=!0},j=async e=>{if(e)try{await pe({password:e});d.value=!0,r.value=X(),s.value=r.value.table_no,z()}catch(l){}else R({title:C("請輸入密碼"),icon:"none"})},z=()=>{O.value=!1};g(),V({success:e=>{v.value.device_id=e.deviceId}});const D=c();W((()=>{clearTimeout(D.value)}));const F=c({name:"",logo:"",tableNo:"",is_call_service:1}),$=async e=>{var l,i,a;if(I())try{const t=await G(e);F.value.name=t.data.name,F.value.logo=t.data.logo,F.value.tableNo=X().table_no,F.value.is_call_service=parseInt(null==(i=null==(l=null==t?void 0:t.data)?void 0:l.tablet)?void 0:i.is_call_service),Z(null==(a=t.data)?void 0:a.currency),ee(t)}catch(t){}};return A("refresh",(e=>{$(!1)})),H((()=>{$(!1)})),q((()=>{E("refresh")})),J((()=>{var e;null==(e=o.value)||e.showBuffet(!0,0)})),(e,c)=>{const r=u(_("ti-layout-head"),ve),g=w,A=n,I=u(_("ti-input"),ke),U=u(_("ti-layout-table-list"),xe),N=u(_("ti-modal"),re);return l(),i(g,{class:"ti-page",onClick:c[1]||(c[1]=e=>S(ie)())},{default:m((()=>[f(g,null,{default:m((()=>[f(r,{ref_key:"refCallServer",ref:o,isPay:!0,isTableNo:!0,onDoubleLogo:a,onRefresh:t,is_call_service:F.value.is_call_service},null,8,["is_call_service"])])),_:1}),f(me,{show:O.value,title:S(C)("密碼"),password:!0,placeholder:S(C)("請輸入密碼"),onExit:z,onConfirm:j},null,8,["show","title","placeholder"]),f(De),f(N,{show:d.value,title:S(C)("設置"),cancelText:S(C)("重置"),confirmText:S(C)("確定"),onCancel:L,onConfirm:P},{content:m((()=>[f(g,{class:"ti-item-input"},{default:m((()=>[f(g,{class:"ti-label-box"},{default:m((()=>[f(g,{class:"ti-label-left"},{default:m((()=>[f(A,{class:"ti-label-server"},{default:m((()=>[h(b(S(C)("服務器連接地址")),1)])),_:1})])),_:1}),f(g,{class:"ti-label-right",onClick:x},{default:m((()=>[f(A,{class:"ti-label-table"},{default:m((()=>[h(b(s.value?S(C)("已選 : ")+S(le)(s.value,19):S(C)("查找桌位")),1)])),_:1})])),_:1})])),_:1}),f(g,{class:"ti-input-box"},{default:m((()=>[f(I,{type:"text",onInput:y,value:v.value.ip,placeholder:S(C)("伺服器位址"),clearable:!1},null,8,["value","placeholder"]),f(g,{class:"ti-colon"},{default:m((()=>[h(":")])),_:1}),f(g,{class:"ti-input-port"},{default:m((()=>[f(I,{type:"number",onInput:k,value:v.value.port,placeholder:S(C)("端口"),clearable:!1},null,8,["value","placeholder"])])),_:1})])),_:1})])),_:1}),f(U,{show:p.value,"onUpdate:show":c[0]||(c[0]=e=>p.value=e),onConfirm:T},null,8,["show"])])),_:1},8,["show","title","cancelText","confirmText"])])),_:1})}}},[["__scopeId","data-v-f1624263"]]);export{Fe as default};
