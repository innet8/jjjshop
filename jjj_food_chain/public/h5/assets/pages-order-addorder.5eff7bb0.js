import{_ as e,l as t,o as s,c as a,w as r,n as i,g as d,b as o,d as l,t as p,f as _,r as u,F as n,e as c,j as m,I as y,h as f,x as h,i as g}from"./index-1a637619.js";import{_ as k}from"./timepicker.abe79155.js";import{r as b}from"./uni-app.es.041617b8.js";import"./uni-popup.bcc5e38f.js";/* empty css                                                                  */const v=e({components:{timepicker:k},data:()=>({loading:!0,options:{},indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,tab_type:4,product_id:"",product_num:"",ProductData:[],OrderData:[],exist_address:!1,Address:{region:[]},extract_store:{},last_extract:{},product_sku_id:0,delivery:0,store_id:1,is_use_points:0,remark:"",pay_type:20,deliverySetting:[],temlIds:[],showAlipay:!1,takeout_address:{},isTimer:!1,mealtime:"",wmtime:"",is_pack:1,supplier:{},dinner_type:10,cart_type:0,store_set:[],table_id:0}),onLoad(e){let t=this;t.options=e,t.cart_type=e.cart_type,t.table_id=e.table_id||0,t.dinner_type=e.dinner_type,t.delivery=e.delivery},onShow(){this.$fire.on("takeout",(function(e){self.takeout_address=e,self.orderType="takeout"})),this.getData()},methods:{hasType(e){return-1!=this.deliverySetting.indexOf(e)},getData(){let e=this;t({title:"加载中"});let s={delivery:e.delivery,store_id:1,is_use_points:e.is_use_points,pay_source:e.getPlatform(),mealtime:""};"cart"===e.options.order_type&&e._get("order.order/addMeal",Object.assign({},s,{cart_ids:e.options.cart_ids||0,shop_supplier_id:e.options.shop_supplier_id||0,order_id:e.options.order_id}),(function(t){!function(t){e.OrderData=t.data.orderInfo,e.temlIds=t.data.template_arr,e.exist_address=e.OrderData.exist_address,e.Address=e.OrderData.address,e.extract_store=e.OrderData.extract_store,e.last_extract=e.OrderData.last_extract,e.ProductData=e.OrderData.product_list,e.supplier=t.data.orderInfo.supplier;let s=new Date,a=s.getHours();a<10&&(a="0"+a);let r=s.getMinutes();r<10&&(r="0"+r);let i=s.getHours(),d=s.getMinutes()+15;d>=60&&(d-=60,i+=1),d<10&&(d="0"+d),i<10&&(i="0"+i),e.wmtime=i+":"+d,e.mealtime=a+":"+r,e.deliverySetting=e.OrderData.deliverySetting,0==e.OrderData.order_pay_price&&(e.pay_type=10),!e.isWeixin()&&t.data.h5_alipay&&(e.showAlipay=!0),e.loading=!1}(t)}),(function(e){}))},SubmitOrder(){let e=this;t({title:"加载中",mask:!0});let s={delivery:e.delivery,store_id:1,is_use_points:0,remark:e.remark,pay_type:e.pay_type,pay_source:e.getPlatform(),mealtime:e.mealtime,shop_supplier_id:e.options.shop_supplier_id};10==e.delivery&&(s.mealtime=e.wmtime);let a="";"buy"===e.options.order_type&&(a="order.order/buy",s=Object.assign(s,{product_id:e.options.product_id,product_num:e.options.product_num,product_sku_id:e.options.product_sku_id})),"cart"===e.options.order_type&&(a="order.order/addMeal",s=Object.assign(s,{dinner_type:e.dinner_type,cart_ids:e.options.cart_ids||0,shop_supplier_id:e.options.shop_supplier_id||0,order_id:e.options.order_id}));e.subMessage(e.temlIds,(function(){e._post(a,s,(function(t){e.gotoPage("/pages/order/myorder")}))}))},timepick(){this.isTimer=!0},closetimer(e){""!=e&&(this.wmtime=e,this.mealtime=e),this.isTimer=!1},packTypeFunc(e){this.is_pack=e}}},[["render",function(e,t,v,x,D,O){const w=m,j=d,T=g,I=y,S=f,P=b(h("timepicker"),k);return s(),a(j,{"data-theme":e.theme(),class:i(e.theme()||"")},{default:r((()=>[D.loading?c("",!0):(s(),a(j,{key:0,class:"wrap"},{default:r((()=>[o(j,{class:"vender"},{default:r((()=>[o(j,{class:"left"},{default:r((()=>[o(j,{class:"store-name"},{default:r((()=>[o(w,null,{default:r((()=>[l(p(D.supplier.name),1)])),_:1})])),_:1})])),_:1}),o(j,{class:"list"},{default:r((()=>[(s(!0),_(n,null,u(D.ProductData,((e,t)=>(s(),a(j,{class:"item d-b-c",key:t},{default:r((()=>[o(j,{class:"info d-s-s"},{default:r((()=>[o(j,{class:"cover"},{default:r((()=>[o(T,{src:e.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1024),o(j,null,{default:r((()=>[o(j,{class:"title f30 fb mb16"},{default:r((()=>[l(p(e.product.product_name),1)])),_:2},1024),o(j,{class:"num-wrap pl-30 gray9 f22"},{default:r((()=>[l(p(e.describe),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),o(j,{class:"",style:{height:"148rpx"}},{default:r((()=>[o(j,{class:"f32 order_item mb16"},{default:r((()=>[l("¥"+p(e.price),1)])),_:2},1024),o(j,{class:"f22 order_item"},{default:r((()=>[l("×"+p(e.product_num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),o(j,{class:"other_box"},{default:r((()=>[o(j,{class:"item"},{default:r((()=>[o(w,{class:"key"},{default:r((()=>[l("商品小计：")])),_:1}),o(w,{class:"f32"},{default:r((()=>[l("￥"+p(D.OrderData.pay_money),1)])),_:1})])),_:1})])),_:1})])),_:1}),o(j,{class:"meal_item"},{default:r((()=>[o(j,{class:"d-b-c item"},{default:r((()=>[o(j,{class:"mr20"},{default:r((()=>[l("备注:")])),_:1}),o(I,{class:"flex-1",type:"text",modelValue:D.remark,"onUpdate:modelValue":t[0]||(t[0]=e=>D.remark=e),placeholder:"请填写您的其他要求"},null,8,["modelValue"])])),_:1})])),_:1}),o(j,{class:"foot-pay-btns"},{default:r((()=>[o(j,{class:"price"},{default:r((()=>[l(" ¥"),o(w,{class:"num"},{default:r((()=>[l(p(D.OrderData.pay_money),1)])),_:1})])),_:1}),o(S,{type:"primary",onClick:O.SubmitOrder},{default:r((()=>[l("确认订单")])),_:1},8,["onClick"])])),_:1}),o(P,{isTimer:D.isTimer,onClose:O.closetimer},null,8,["isTimer","onClose"])])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-e6bbe9cf"]]);export{v as default};
