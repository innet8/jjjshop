import{_ as e,l as t,p as a,G as l,a as d,E as s,o as i,c as r,w as u,n as _,g as o,b as c,d as n,t as f,e as p,j as m,i as y}from"./index-1a637619.js";import{p as g}from"./pay.6f221c8b.js";const h=e({data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,isPayPopup:!1,order_id:0,detail:{order_status:[],address:{region:[]},product:[],pay_type:[],delivery_type:[],pay_status:[]},extractStore:{},is_fightgroup:!1,showAlipay:!1,qrimg:""}),onLoad(e){this.order_id=e.order_id},mounted(){this.getData()},methods:{gotoExpress(e){this.gotoPage("/pages/order/express/express?type=1&order_id="+e)},getData(){t({title:"加载中"});let e=this,l=e.order_id;e._get("plus.points.order/detail",{order_id:l},(function(t){e.detail=t.data.order,e.extractStore=t.data.order.extractStore,e.loadding=!1,a()}))},hidePopupFunc(){this.isPayPopup=!1},cancelOrder(e){let s=this,i=e;l({title:"提示",content:"您确定要取消当前订单吗?",success:function(e){e.confirm&&(t({title:"正在处理"}),s._get("user.order/cancel",{order_id:i},(function(e){a(),d({title:"操作成功",duration:2e3,icon:"success"}),s.getData()})))}})},orderReceipt(e){let s=this;l({title:"提示",content:"您确定要收货吗?",success:function(l){l.confirm&&(t({title:"正在处理"}),s._post("user.order/receipt",{order_id:e},(function(e){a(),d({title:e.msg,duration:2e3,icon:"success"}),s.getData()})))}})},onApplyRefund(e){s({url:"/pages/order/refund/apply/apply?order_product_id="+e})},payTypeFunc(e){let l=this,d=l.order_id;l.isPayPopup=!1,t({title:"加载中"}),l._post("user.order/pay",{payType:e,order_id:d,pay_source:l.getPlatform()},(function(e){a(),g(e,l)}))},onPayOrder(e){this.isPayPopup=!0,this.order_id=e}}},[["render",function(e,t,a,l,d,s){const g=o,h=m,x=y;return i(),r(g,{"data-theme":e.theme(),class:_(e.theme()||"")},{default:u((()=>[d.loadding?p("",!0):(i(),r(g,{key:0,class:"order-box"},{default:u((()=>[c(g,{class:"f40 fb mb40"},{default:u((()=>[n(f(d.detail.state_text),1)])),_:1}),10==d.detail.pay_status.value?(i(),r(g,{key:0,class:"d-s-c mt20 mb40"},{default:u((()=>[c(g,{class:"f26"},{default:u((()=>[n("交易将在："),c(h,{class:"orange"},{default:u((()=>[n(f(d.detail.pay_end_time),1)])),_:1}),n("后关闭，请及时付款")])),_:1})])),_:1})):p("",!0),c(g,{class:"order-content"},{default:u((()=>[c(g,{class:"order-prolist"},{default:u((()=>[c(g,{class:"d-s-c proitem"},{default:u((()=>[c(g,{class:"pro-image"},{default:u((()=>[c(x,{src:d.detail.file_path,mode:"aspectFill"},null,8,["src"])])),_:1}),c(g,{class:"d-b-s pro-price flex-1"},{default:u((()=>[c(g,{class:""},{default:u((()=>[c(g,{class:"f28 text-ellipsis fb mb10"},{default:u((()=>[n(f(d.detail.product_name),1)])),_:1})])),_:1}),c(g,{class:"pro-price-item"},{default:u((()=>[c(g,{class:"f24 gray3 mb10"},{default:u((()=>[c(g,null,{default:u((()=>[n(f(d.detail.product_points)+"积分",1)])),_:1}),d.detail.product_price>0?(i(),r(g,{key:0},{default:u((()=>[n("￥"+f(d.detail.product_price),1)])),_:1})):p("",!0)])),_:1}),c(g,{class:"f22 gray9"},{default:u((()=>[n("*"+f(d.detail.total_num),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(g,{class:"pro-cont-item"},{default:u((()=>[c(g,null,{default:u((()=>[n("商品小计")])),_:1}),c(g,{class:"flex-1 tr"},{default:u((()=>[c(h,null,{default:u((()=>[n(f(d.detail.points_num)+"积分",1)])),_:1}),d.detail.total_price>0?(i(),r(h,{key:0},{default:u((()=>[n(" +￥"+f(d.detail.total_price),1)])),_:1})):p("",!0)])),_:1})])),_:1}),10==d.detail.delivery_type.value?(i(),r(g,{key:0,class:"pro-cont-item"},{default:u((()=>[c(g,null,{default:u((()=>[n("配送费")])),_:1}),c(g,null,{default:u((()=>[n("￥"+f(d.detail.express_price),1)])),_:1})])),_:1})):p("",!0),c(g,{class:"pro-cont-item pro-cont-total"},{default:u((()=>[n(" 共"+f(d.detail.total_num)+"件商品 小计 ",1),c(h,null,{default:u((()=>[n(f(d.detail.points_num)+"积分",1)])),_:1}),d.detail.pay_price>0?(i(),r(h,{key:0},{default:u((()=>[n(" + ￥"+f(d.detail.pay_price),1)])),_:1})):p("",!0)])),_:1})])),_:1})])),_:1}),10==d.detail.delivery_type.value&&20==d.detail.delivery_status.value?(i(),r(g,{key:1,class:"group bg-white",style:{"border-radius":"15rpx"},onClick:t[0]||(t[0]=e=>s.gotoExpress(d.detail.order_id))},{default:u((()=>[c(g,{class:"d-b-c"},{default:u((()=>[c(g,{class:"f28"},{default:u((()=>[c(g,{class:"p-20-0"},{default:u((()=>[c(h,{class:"gray9"},{default:u((()=>[n("物流公司：")])),_:1}),c(h,null,{default:u((()=>[n(f(d.detail.express.express_name),1)])),_:1})])),_:1}),c(g,{class:"p-20-0"},{default:u((()=>[c(h,{class:"gray9"},{default:u((()=>[n("物流单号：")])),_:1}),c(h,null,{default:u((()=>[n(f(d.detail.express_no),1)])),_:1})])),_:1})])),_:1}),c(g,null,{default:u((()=>[c(h,{class:"icon iconfont icon-jiantou"})])),_:1})])),_:1})])),_:1})):p("",!0),c(g,{class:"other_box"},{default:u((()=>[c(g,{class:"meal_item-title"},{default:u((()=>[n("配送信息")])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("配送服务")])),_:1}),c(g,{class:"right"},{default:u((()=>[n(f(d.detail.delivery_type.text),1)])),_:1})])),_:1}),1!=d.detail.order_type?(i(),r(g,{key:0,class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("配送地址")])),_:1}),""!=d.detail.address?(i(),r(g,{key:0,class:"right"},{default:u((()=>[c(g,null,{default:u((()=>[n(f(d.detail.address.detail),1)])),_:1}),c(g,null,{default:u((()=>[n(f(d.detail.address.name+" "+d.detail.address.phone),1)])),_:1})])),_:1})):""!=d.detail.store?(i(),r(g,{key:1,class:"right"},{default:u((()=>[c(g,null,{default:u((()=>[n(f(d.detail.store.address),1)])),_:1}),c(g,null,{default:u((()=>[n(f(d.detail.store.link_name+" "+d.detail.store.link_phone),1)])),_:1})])),_:1})):p("",!0)])),_:1})):p("",!0)])),_:1}),c(g,{class:"other_box"},{default:u((()=>[c(g,{class:"meal_item-title"},{default:u((()=>[n("订单信息")])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("订单号码")])),_:1}),c(g,{class:"right"},{default:u((()=>[n(f(d.detail.order_no),1)])),_:1})])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("下单时间")])),_:1}),c(g,{class:"right"},{default:u((()=>[n(f(d.detail.create_time),1)])),_:1})])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("支付金额")])),_:1}),c(g,{class:"right"},{default:u((()=>[c(h,null,{default:u((()=>[n(f(d.detail.points_num)+"积分",1)])),_:1}),c(h,null,{default:u((()=>[n(" + ￥"+f(d.detail.pay_price),1)])),_:1})])),_:1})])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("支付方式")])),_:1}),c(g,{class:"right"},{default:u((()=>[n(f(d.detail.pay_type.text),1)])),_:1})])),_:1}),c(g,{class:"meal_item"},{default:u((()=>[c(g,null,{default:u((()=>[n("备注")])),_:1}),c(g,{class:"right"},{default:u((()=>[c(g,null,{default:u((()=>[n(f(d.detail.buyer_remark),1)])),_:1})])),_:1})])),_:1})])),_:1}),10==d.detail.pay_status.value?(i(),r(g,{key:2,class:"d-c-c"},{default:u((()=>[c(g,{class:"f26 theme-btn pay_btn",onClick:t[1]||(t[1]=e=>s.onPayOrder(d.detail.order_id))},{default:u((()=>[n("立即支付")])),_:1})])),_:1})):p("",!0)])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-f8f547b9"]]);export{h as default};
