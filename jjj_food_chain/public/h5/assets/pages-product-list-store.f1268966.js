import{_ as t,u as e,m as a,ac as i,B as l,M as r,l as d,p as o,a as s,G as c,E as _,o as n,f as p,b as u,w as y,n as f,c as h,e as m,F as g,g as k,d as b,t as C,r as v,v as T,x as w,j as x,i as I,S,h as D,k as M,C as P}from"./index-1a637619.js";import{_ as z}from"./u-icon.19bb138d.js";import{r as L}from"./uni-app.es.041617b8.js";import{m as E,_ as H,p as j,a as F,b as V}from"./loading.5a625d6d.js";const $=t({components:{modal:E,popupLayer:H,prospec:j},data:()=>({isLoading:!0,goods:[],supplier:{name:""},ads:[],loading:!0,currentCateId:6905,cateScrollTop:0,menuScrollIntoView:"",cart:[],goodDetailModalVisible:!1,good:{},category:{},cartPopupVisible:!1,sizeCalcState:!1,listData:[],goods_list:[],productModel:{},clock:!1,cart_total_num:0,total_price:0,total_bag_price:0,cart_list:[],orderType:"takein",takeout_address:{},phoneHeight:0,scrollviewHigh:0,delivery_time:["00:00","00:00"],store_time:["00:00","00:00"],officeTime:{now:0,delivery_start:0,delivery_end:0,store_start:0,store_end:0},addclock:!1,longitude:0,latitude:0,bag_type:1,shop_supplier_id:0,dinner_type:30,cart_type:1,table_id:0,order_id:0,addorder_id:0,reduceList:[],reduce:{},reduce_diff_value:0,line_price:0,isFirst:!0,store_set:[],num:1,table_detail:null,options:{},settle_type:0}),onLoad(t){let l=this,r=e.getSceneData(t);l.options=t,l.shop_supplier_id=t.shop_supplier_id?t.shop_supplier_id:r.s_id,l.table_id=t.table_id||0,0==l.table_id&&(l.shop_supplier_id=a("selectedId")?a("selectedId"):0),l.num=t.num||0,l.addorder_id=t.order_id||0,i({title:0==l.table_id?"快餐模式":"堂食点餐"})},onShow(){this.init()},computed:{menuCartNum(){return t=>this.cart.reduce(((e,a)=>a.cate_id===t?e+a.number:e),0)}},methods:{goBack(){history.go(-1)},scrollInit(){let t=this;l({success(e){t.phoneHeight=e.windowHeight,r().select(".nav").boundingClientRect((e=>{let a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec()}})},takout(){"takeout"!=this.orderType&&(this.orderType="takeout",this.dinner_type=10,this.init())},takein(){"takein"!=this.orderType&&(this.orderType="takein",this.dinner_type=20,this.init())},init(){this.addclock=!1,this.category={},this.good={},this.goodDetailModalVisible=!1,this.clock=!1,this.loading=!0,this.isLoading=!0,this.getCategory(),this.sizeCalcState=!1},getCategory(){let t=this;this.sizeCalcState=!1,d({title:"加载中"}),t._get("product.category/index",{type:1,shop_supplier_id:t.shop_supplier_id,longitude:0,latitude:0,table_id:t.table_id,delivery:"takeout"==t.orderType?30:40,order_type:0==t.table_id?1:2},(function(e){t.settle_type=e.data.supplier.settle_type,t.reduceList=e.data.reduceList,t.goods_list=e.data.list,t.supplier=e.data.supplier,t.store_set=e.data.supplier.store_set,0!=t.table_id?t.orderType="takein":t.isFirst&&""==t.orderType&&(-1!=t.store_set.indexOf(30)?t.orderType="takeout":t.orderType="takein",t.isFirst=!1),t.shop_supplier_id=e.data.supplier.shop_supplier_id,t.bag_type=e.data.supplier.storebag_type,t.loading=!1,t.isLoading=!1,t.$nextTick((function(){t.scrollInit()})),t.getUserId()&&t.getCart(),o()}),(function(){t.gotoPage("/pages/index/index")}))},getProduct(t){let e=this;1!=e.clock&&(e.clock=!0,e.good=t,t.product_id,e.detail=t,e.showGoodDetailModal())},reCart(t){let e=this;e.cart_total_num=t.data.cartInfo.cart_total_num,e.total_price=t.data.cartInfo.total_pay_price,e.line_price=t.data.cartInfo.total_line_money,e.total_bag_price=t.data.cartInfo.total_bag_price,e.reduce=t.data.cartInfo.reduce,e.reduce_diff_value=t.data.cartInfo.reduce_diff_value},addCart(t){let e=this;if(e.addclock)return;if(0!=t.limit_num&&t.limit_num<=t.cart_num)return void s({icon:"none",title:"超过限购数量"});if(t.product_stock<=0||t.product_stock<=t.cart_num)return void s({icon:"none",title:"没有更多库存了"});let a={product_id:t.product_id,product_num:1,product_sku_id:t.sku[0].product_sku_id,attr:"",feed:"",describe:"",price:t.sku[0].product_price,bag_price:t.sku[0].bag_price,shop_supplier_id:e.shop_supplier_id,table_id:e.table_id,cart_type:1,dinner_type:e.dinner_type,product_price:t.sku[0].line_price,delivery:"takeout"==e.orderType?30:40};e.addclock=!0;let i="order.cart/add";0!=e.table_id&&(i="order.HallCart/add"),e._post(i,a,(function(a){e.reCart(a),t.cart_num&&t.cart_num,e.goods_list.forEach(((a,i)=>{a.products.forEach(((a,i)=>{a.product_id==t.product_id&&e.$set(a,"cart_num",a.cart_num+1)}))})),e.addclock=!1,e.getCategory()}),(function(t){e.addclock=!1}))},reduceFunc(t){let e=this;if(e.addclock||t.cart_num<=0)return;let a=t.product_id;e.addclock=!0;let i="order.cart/productSub";0!=e.table_id&&(i="order.HallCart/productSub"),e._post(i,{product_id:a,type:"down",cart_type:1,shop_supplier_id:e.shop_supplier_id,table_id:e.table_id,dinner_type:e.dinner_type,delivery:"takeout"==e.orderType?30:40},(function(a){e.reCart(a),e.goods_list.forEach(((a,i)=>{a.products.forEach(((a,i)=>{a.product_id==t.product_id&&e.$set(a,"cart_num",a.cart_num-1)}))})),e.addclock=!1,e.getCategory()}),(function(){e.addclock=!1}))},getCart(){if(!a("user_id"))return;let t=this;d({title:"加载中",mask:!0}),0!=t.table_id?t.getTableCart():t.getFastCart()},getFastCart(){let t=this;t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:1,delivery:"takeout"==t.orderType?30:40},(function(e){o(),t.isLoading=!0,t.reCart(e),t.cart_list=e.data.productList}))},getTableCart(){let t=this;t._get("order.HallCart/lists",{shop_supplier_id:t.shop_supplier_id,table_id:t.table_id,cart_type:1,delivery:"takeout"==t.orderType?30:40},(function(e){t.isLoading=!0,e.data.orderInfo&&(t.order_id=e.data.orderInfo.order_id),t.reCart(e),t.cart_list=e.data.productList,t.table_detail=e.data.detail,o()}))},cartAdd(t){let e=this;if(e.addclock)return;e.addclock=!0;let a=t.product_num+1,i=t.product_id,l="order.cart/sub";0!=e.table_id&&(l="order.HallCart/sub"),e._post(l,{product_id:i,total_num:1,cart_id:t.cart_id,type:"up",cart_type:1,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id,table_id:e.table_id,delivery:"takeout"==e.orderType?30:40},(function(i){e.addclock=!1,e.reCart(i),e.goods_list.forEach(((a,i)=>{a.products.forEach(((a,i)=>{a.product_id==t.product_id&&e.$set(a,"cart_num",a.cart_num+1)}))})),e.$set(t,"product_num",a),e.$set(t,"total_num",t.total_num+1),e.addclock=!1,e.getCategory()}),(function(){e.addclock=!1}))},cartReduce(t){let e=this;if(e.addclock)return;e.addclock=!0;let a=t.product_id,i=t.product_num,l="order.cart/sub";0!=e.table_id&&(l="order.HallCart/sub"),e._post(l,{product_id:a,total_num:1,cart_id:t.cart_id,type:"down",cart_type:1,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id,table_id:e.table_id,delivery:"takeout"==e.orderType?30:40},(function(a){i--,e.reCart(a),e.goods_list.forEach(((a,i)=>{a.products.forEach(((a,i)=>{a.product_id==t.product_id&&e.$set(a,"cart_num",a.cart_num-1)}))})),e.$set(t,"product_num",i),e.$set(t,"total_num",t.total_num-1),e.addclock=!1,e.getCategory()}),(function(){e.addclock=!1}))},handleCartClear(){let t=this;c({title:"提示",content:"确定清空购物车么",success(e){e.confirm?t.clearCart():e.cancel&&console.log("用户点击取消")}})},clearCart(){let t=this,e="order.cart/delete",a={shop_supplier_id:t.shop_supplier_id,cart_type:1};0!=t.table_id&&(e="order.HallCart/delete",a.table_id=t.table_id),t._post(e,a,(function(e){t.cartPopupVisible=!1,t.cart_list=[],t.init()}))},toPay(){let t=this;0!=t.table_id?t.tableToPay():t.fastToPay()},tableToPay(){let t=this;d({title:"加载中"}),t._get("order.HallCart/lists",{shop_supplier_id:t.shop_supplier_id,table_id:t.table_id,cart_type:1,delivery:"takeout"==t.orderType?30:40},(function(e){t.reCart(e),t.cart_list=e.data.productList;let a=[];if(t.cart_list.forEach((t=>{a.push(t.cart_id)})),0==a.length)return s({title:"请选择商品",icon:"none"}),!1;o(),t.order_id||(20==t.settle_type?c({title:"温馨提示",content:"订单提交后,我们将会尽快制作,是否确认提交?",success:function(e){e.confirm?t.submitOrder(a):e.cancel&&console.log("用户点击取消")}}):c({title:"温馨提示",content:"是否确认提交提单并前往付款?",success:function(e){e.confirm?t.submitOrder(a):e.cancel&&console.log("用户点击取消")}}))}))},fastToPay(){let t=this;d({title:"加载中"});let e="takeout"==t.orderType?30:40;t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:1,delivery:e},(function(a){t.reCart(a),t.cart_list=a.data.productList;let i=[];if(t.cart_list.forEach((t=>{i.push(t.cart_id)})),0==i.length)return s({title:"请选择商品",icon:"none"}),!1;o(),_({url:"/pages/order/confirm-order?order_type=cart&cart_ids="+i.join(",")+"&delivery="+e+"&shop_supplier_id="+t.shop_supplier_id+"&cart_type=1&dinner_type=30&table_id="+t.table_id})}))},submitOrder(t){let e=this,a={delivery:"takeout"==e.orderType?30:40,coupon_id:0,is_use_points:0,linkman:"",phone:"",remark:"",mealtime:"",meal_num:e.num,cart_ids:t.join(",")||0,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id||0,order_type:1,table_id:e.table_id};e._post("order.order/tableBuy",a,(function(t){e.order_id=t.data.order_id,e.gotoPage("/pages/order/store_order?order_id="+e.order_id+"&pnum="+e.num)}),(function(t){e.init()}))},addpay(){let t=this;d({title:"加载中"}),0!=t.table_id?t.tableAddPay():t.addpayFunc()},addpayFunc(){let t=this;t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:1,delivery:"takeout"==t.orderType?30:40},(function(e){t.cart_total_num=e.data.cartInfo.cart_total_num,t.total_price=e.data.cartInfo.total_price,t.cart_list=e.data.productList;let a=[];if(t.cart_list.forEach((t=>{a.push(t.cart_id)})),0==a.length)return s({title:"请选择商品",icon:"none"}),!1;o();let i="/pages/order/addorder?order_type=cart&cart_ids="+a.join(",")+"&delivery=40&shop_supplier_id="+t.shop_supplier_id+"&cart_type=1&dinner_type=30&table_id="+t.table_id+"&order_id="+t.addorder_id;t.gotoPage(i)}))},tableAddPay(){let t=this;t._get("order.HallCart/lists",{shop_supplier_id:t.shop_supplier_id,table_id:t.table_id,cart_type:1,delivery:"takeout"==t.orderType?30:40},(function(e){t.cart_total_num=e.data.cartInfo.cart_total_num,t.total_price=e.data.cartInfo.total_price,t.cart_list=e.data.productList;let a=[];if(t.cart_list.forEach((t=>{a.push(t.cart_id)})),0==a.length)return s({title:"请选择商品",icon:"none"}),!1;o(),t.tableAddOrder(a)}))},tableAddOrder(t){let e=this,a={delivery:"takeout"==e.orderType?30:40,coupon_id:0,is_use_points:0,linkman:"",phone:"",remark:"",mealtime:"",meal_num:e.num,cart_ids:t.join(",")||0,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id||0,order_type:1,table_id:e.table_id,order_id:e.order_id};e._post("order.order/tableAddMeal",a,(function(t){e.order_id=t.data.order_id,e.gotoPage("/pages/order/store_order?order_id="+e.order_id+"&pnum="+e.num)}),(function(t){e.init()}))},gotoDetail(t){let e="takeout"==this.orderType?30:40,a="/pages/product/detail/detail?product_id="+t.product_id+"&delivery="+e+"&bag_type="+this.bag_type+"&dinner_type="+this.dinner_type+"&cart_type="+this.cart_type;0!=this.table_id&&(a=a+"&table_id="+this.table_id),_({url:a})},handleMenuTap(t){this.sizeCalcState||this.calcSize(),this.currentCateId=t,this.$nextTick((()=>this.cateScrollTop=this.goods_list.find((e=>e.category_id==t)).top))},handleGoodsScroll({detail:t}){this.sizeCalcState||this.calcSize();const{scrollTop:e}=t;let a=this.goods_list.filter((t=>t.top<=e)).reverse();a.length>0&&(this.currentCateId=a[0].category_id)},calcSize(){let t=10;this.goods_list.forEach((e=>{r().select(`#cate-${e.category_id}`).fields({size:!0},(a=>{e.top=t,null!=a&&(t+=a.height),e.bottom=t})).exec()})),this.sizeCalcState=!0},showGoodDetailModal(){this.detail.sku.forEach(((t,e)=>{t.checked=!1}));let t={specData:this.detail.sku,detail:this.detail,shop_supplier_id:this.shop_supplier_id,productSpecArr:null!=this.specData?new Array(this.specData.spec_attr.length):[],show_sku:{sku_image:"",seckill_price:0,attr:[],product_sku_id:[],feed:[],line_price:0,seckill_stock:0,seckill_product_sku_id:0,sum:1}};this.productModel=t,this.goodDetailModalVisible=!0},closeGoodDetailModal(t,e){this.goodDetailModalVisible=!1,this.clock=!1,t&&(this.$set(this.good,"cart_num",this.good.cart_num?this.good.cart_num+t:t),this.reCart(e)),this.category={},this.good={}},openCartPopup(){this.getCart(),this.cartPopupVisible=!this.cartPopupVisible},time_to_sec(t){if(null!==t){var e=t.split(":")[0],a=t.split(":")[1];return Number(3600*e)+Number(60*a)}}}},[["render",function(t,e,a,i,l,r){const d=k,o=L(w("u-icon"),z),s=x,c=I,_=S,E=D,j=M("prospec"),$=L(w("popup-layer"),H);return n(),p(g,null,[u(d,{class:f(["container",t.theme()||""]),"data-theme":t.theme()},{default:y((()=>[u(d,{class:"main"},{default:y((()=>[u(d,{class:"nav"},{default:y((()=>[0!=l.table_id&&l.table_detail?(n(),h(d,{key:0,class:"d-b-c top-status"},{default:y((()=>[u(d,null,{default:y((()=>[b("当前桌号:"+C(l.table_detail.table_no),1)])),_:1}),l.order_id?(n(),h(d,{key:0,class:"flex-1 tc f28 dominant",onClick:e[0]||(e[0]=e=>t.gotoPage("/pages/order/store_order?order_id="+l.order_id+"&pnum="+l.num))},{default:y((()=>[b("查看订单")])),_:1})):m("",!0),u(d,{class:"d-e-c",onClick:r.goBack},{default:y((()=>[b(" 人数:"+C(l.num)+"人 ",1),u(o,{name:"edit-pen-fill",size:"19"})])),_:1},8,["onClick"])])),_:1})):m("",!0),u(d,{class:"header"},{default:y((()=>[u(d,{class:"left"},{default:y((()=>[u(d,{class:"store-name"},{default:y((()=>[u(s,{class:"fb"},{default:y((()=>[b(C(l.supplier.name),1)])),_:1})])),_:1})])),_:1}),0==l.table_id?(n(),h(d,{key:0,class:"right"},{default:y((()=>[(n(!0),p(g,null,v(l.store_set,((t,e)=>(n(),p(g,{key:t},["30"==t?(n(),h(d,{key:0,class:f(["takeout","takeout"==l.orderType?"active":""]),onClick:r.takout},{default:y((()=>[u(s,null,{default:y((()=>[b("打包")])),_:1})])),_:1},8,["class","onClick"])):m("",!0)],64)))),128)),(n(!0),p(g,null,v(l.store_set,((t,e)=>(n(),p(g,{key:t},["40"==t?(n(),h(d,{key:0,class:f(["dinein","takein"==l.orderType?"active":""]),onClick:r.takein},{default:y((()=>[u(s,null,{default:y((()=>[b("店内")])),_:1})])),_:1},8,["class","onClick"])):m("",!0)],64)))),128))])),_:1})):m("",!0)])),_:1}),0==l.table_id?(n(),h(d,{key:1,class:"reduce_list"},{default:y((()=>[(n(!0),p(g,null,v(l.reduceList,((t,e)=>(n(),h(d,{key:e,class:"reduce_item fb"},{default:y((()=>[b(C(t.active_name),1)])),_:2},1024)))),128))])),_:1})):m("",!0)])),_:1}),u(d,{class:"content"},{default:y((()=>[u(_,{class:"menus",style:T("height:"+l.scrollviewHigh+"px;"),"scroll-into-view":l.menuScrollIntoView,"scroll-with-animation":!0,"scroll-animation-duration":1,"scroll-y":""},{default:y((()=>[u(d,{class:"wrapper"},{default:y((()=>[(n(!0),p(g,null,v(l.goods_list,((t,e)=>(n(),p(g,{key:e},[0!=t.products.length?(n(),h(d,{key:0,class:f(["menu",{current:t.category_id===l.currentCateId}]),id:`menu-${t.category_id}`,onClick:e=>r.handleMenuTap(t.category_id)},{default:y((()=>[t.images?(n(),h(c,{key:0,class:"f-s-0 mr10",src:t.images.file_path,mode:"aspectFill",style:{width:"30rpx",height:"30rpx"}},null,8,["src"])):m("",!0),u(s,null,{default:y((()=>[b(C(t.name),1)])),_:2},1024),r.menuCartNum(t.category_id)?(n(),h(d,{key:1,class:"dot"},{default:y((()=>[b(C(r.menuCartNum(t.category_id)),1)])),_:2},1024)):m("",!0)])),_:2},1032,["id","class","onClick"])):m("",!0)],64)))),128))])),_:1})])),_:1},8,["style","scroll-into-view"]),u(_,{class:"goods pr",style:T("height:"+l.scrollviewHigh+"px;"),"scroll-with-animation":!0,"scroll-animation-duration":1,"scroll-y":"","scroll-top":l.cateScrollTop,onScroll:r.handleGoodsScroll},{default:y((()=>[u(d,{class:"wrapper"},{default:y((()=>[u(d,{class:"list"},{default:y((()=>[(n(!0),p(g,null,v(l.goods_list,((t,e)=>(n(),p(g,{key:e},[0!=t.products.length?(n(),h(d,{key:0,class:"category",id:`cate-${t.category_id}`},{default:y((()=>[u(d,{class:"title"},{default:y((()=>[u(s,null,{default:y((()=>[b(C(t.name),1)])),_:2},1024)])),_:2},1024),u(d,{class:"items"},{default:y((()=>[(n(!0),p(g,null,v(t.products,((t,e)=>(n(),h(d,{class:"good",onClick:e=>r.gotoDetail(t),key:e},{default:y((()=>[u(c,{src:t.product_image,class:"image"},null,8,["src"]),u(d,{class:"right"},{default:y((()=>[u(s,{class:"name"},{default:y((()=>[b(C(t.product_name),1)])),_:2},1024),t.discount>0?(n(),h(s,{key:0,class:"discount"},{default:y((()=>[b("第二件"+C(t.discount)+"折",1)])),_:2},1024)):m("",!0),u(s,{class:"tips text-ellipsis"},{default:y((()=>[b(C(t.selling_point),1)])),_:2},1024),u(d,{class:"price_and_action"},{default:y((()=>[u(d,null,{default:y((()=>[u(s,{style:{color:"#FF5800","font-size":"22rpx"}},{default:y((()=>[b("￥")])),_:1}),u(s,{class:"price"},{default:y((()=>[b(C(1*t.product_price),1)])),_:2},1024),1*t.product_price!=1*t.line_price?(n(),h(s,{key:0,class:"linprice"},{default:y((()=>[b("￥"+C(1*t.line_price),1)])),_:2},1024)):m("",!0)])),_:2},1024),20==t.spec_types?(n(),h(d,{key:0,class:"btn-group"},{default:y((()=>[u(E,{type:"primary",class:"btn property_btn","hover-class":"none",size:"min",onClick:P((e=>r.gotoDetail(t)),["stop"])},{default:y((()=>[b("选规格")])),_:2},1032,["onClick"]),0!=t.cart_num?(n(),h(d,{key:0,class:"dot"},{default:y((()=>[b(C(t.cart_num),1)])),_:2},1024)):m("",!0)])),_:2},1024)):(n(),h(d,{key:1,class:"btn-group"},{default:y((()=>[0!=t.cart_num?(n(),h(E,{key:0,plain:"",class:"btn reduce_btn",size:"min","hover-class":"none",onClick:P((e=>r.reduceFunc(t)),["stop"])},{default:y((()=>[u(d,{class:"iconfont icon icon-jian iconsami-select"})])),_:2},1032,["onClick"])):m("",!0),0!=t.cart_num?(n(),h(d,{key:1,class:"number"},{default:y((()=>[b(C(t.cart_num),1)])),_:2},1024)):m("",!0),u(E,{class:"btn add_btn",size:"min","hover-class":"none",onClick:P((e=>r.addCart(t)),["stop"])},{default:y((()=>[u(d,{class:"iconfont icon icon-jia iconadd-select"})])),_:2},1032,["onClick"])])),_:2},1024))])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["id"])):m("",!0)],64)))),128))])),_:1})])),_:1})])),_:1},8,["style","scroll-top","onScroll"])])),_:1}),l.cart_total_num>0?(n(),h(d,{key:0,class:"cart-box"},{default:y((()=>[u(d,{class:"mark"},{default:y((()=>[u(c,{src:F,class:"cart-img",onClick:r.openCartPopup},null,8,["onClick"]),u(d,{class:"tag"},{default:y((()=>[b(C(l.cart_total_num),1)])),_:1})])),_:1}),u(d,{class:"price"},{default:y((()=>[u(d,null,{default:y((()=>[u(s,{class:"f22"},{default:y((()=>[b("￥")])),_:1}),b(" "+C(l.total_price)+" ",1),u(s,{class:"gray9 f22 text-d-line fn ml10"},{default:y((()=>[b(C(l.line_price),1)])),_:1})])),_:1}),0!=l.total_bag_price?(n(),h(d,{key:0,class:"gray9 f22 fn"},{default:y((()=>[u(s,{class:""},{default:y((()=>[b("包含包装费￥")])),_:1}),b(" "+C(l.total_bag_price),1)])),_:1})):m("",!0)])),_:1}),0!=l.table_id?(n(),p(g,{key:0},[0==l.order_id?(n(),h(E,{key:0,type:"primary",class:"pay-btn",onClick:r.toPay},{default:y((()=>[u(s,null,{default:y((()=>[b("下单")])),_:1})])),_:1},8,["onClick"])):(n(),h(E,{key:1,type:"primary",class:"pay-btn",onClick:r.addpay},{default:y((()=>[b("去加餐")])),_:1},8,["onClick"]))],64)):(n(),p(g,{key:1},[0==l.addorder_id?(n(),h(E,{key:0,type:"primary",class:"pay-btn",onClick:r.toPay},{default:y((()=>[u(s,null,{default:y((()=>[b("去结算")])),_:1})])),_:1},8,["onClick"])):(n(),h(E,{key:1,type:"primary",class:"pay-btn",onClick:r.addpay},{default:y((()=>[b("去加餐")])),_:1},8,["onClick"]))],64))])),_:1})):m("",!0)])),_:1}),u(j,{productModel:l.productModel,goodDetailModalVisible:l.goodDetailModalVisible,orderType:l.orderType,bag_type:l.bag_type,onCloseGoodDetailModal:r.closeGoodDetailModal,table_id:l.table_id,dinner_type:l.dinner_type,cart_type:l.cart_type},null,8,["productModel","goodDetailModalVisible","orderType","bag_type","onCloseGoodDetailModal","table_id","dinner_type","cart_type"]),l.cart_total_num>0?(n(),h($,{key:0,direction:"top","show-pop":l.cartPopupVisible,class:"cart-popup"},{content:y((()=>[u(d,{class:"cart-popup"},{default:y((()=>[l.reduce&&0==l.table_id?(n(),h(d,{key:0,class:"d-b-c top-title"},{default:y((()=>[u(d,{class:"mj d-c-c"},{default:y((()=>[l.reduce.now?(n(),h(d,{key:0},{default:y((()=>[b(" 已 "),u(s,{class:""},{default:y((()=>[b(C(l.reduce.now.active_name),1)])),_:1}),l.reduce.next?(n(),h(s,{key:0},{default:y((()=>[b("，")])),_:1})):m("",!0)])),_:1})):m("",!0),l.reduce.next?(n(),h(d,{key:1},{default:y((()=>[u(s,{class:""},{default:y((()=>[b(C(l.reduce.next.active_name),1)])),_:1}),b(" 还差 "),u(s,{class:""},{default:y((()=>[b(C(l.reduce_diff_value),1)])),_:1}),b(" "+C(1==l.reduce.next.full_type?"元":"件"),1)])),_:1})):m("",!0)])),_:1})])),_:1})):m("",!0),u(d,{class:"top d-b-c"},{default:y((()=>[u(d,null,{default:y((()=>[b("已选商品")])),_:1}),u(d,{onClick:r.handleCartClear},{default:y((()=>[b("清空购物车")])),_:1},8,["onClick"])])),_:1}),u(_,{class:"cart-list","scroll-y":""},{default:y((()=>[u(d,{class:"wrapper"},{default:y((()=>[(n(!0),p(g,null,v(l.cart_list,((t,e)=>(n(),p(g,{key:e},[t.product_num>0?(n(),h(d,{key:0,class:"item"},{default:y((()=>[u(d,{class:"d-s-c"},{default:y((()=>[u(d,{class:"cart-image"},{default:y((()=>[u(c,{style:{},src:t.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1024),u(d,{class:"left"},{default:y((()=>[u(d,null,{default:y((()=>[u(d,{class:"name"},{default:y((()=>[b(C(t.product.product_name),1)])),_:2},1024),u(d,{class:"gray9"},{default:y((()=>[b(C(t.describe),1)])),_:2},1024)])),_:2},1024),u(d,{class:"center"},{default:y((()=>[u(s,{class:"fb"},{default:y((()=>[b("￥"+C(t.price),1)])),_:2},1024),1!=l.bag_type&&t.bag_price>0&&"takeout"==l.orderType?(n(),h(s,{key:0,class:"f24 gray9"},{default:y((()=>[b("(包装费：￥"+C(t.bag_price)+")",1)])),_:2},1024)):m("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),u(d,{class:"right"},{default:y((()=>[u(E,{plain:"",size:"min",class:"btn theme-borderbtn","hover-class":"none",onClick:e=>r.cartReduce(t)},{default:y((()=>[u(d,{class:"iconfont icon icon-jian iconsami-select"})])),_:2},1032,["onClick"]),u(d,{class:"number"},{default:y((()=>[b(C(t.product_num),1)])),_:2},1024),u(E,{class:"btn theme-btn",size:"min","hover-class":"none",onClick:e=>r.cartAdd(t)},{default:y((()=>[u(d,{class:"iconfont icon icon-jia iconadd-select"})])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):m("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["show-pop"])):m("",!0)])),_:1},8,["data-theme","class"]),l.loading?(n(),h(d,{key:0,class:"loading"},{default:y((()=>[u(c,{src:V})])),_:1})):m("",!0)],64)}],["__scopeId","data-v-9108e888"]]);export{$ as default};
