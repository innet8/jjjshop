import{_ as t,B as a,o as e,c as s,w as o,n as i,g as l,b as c,d as n,v as d,f as r,r as g,F as _,S as p,t as u,D as h,e as y,j as m,i as f}from"./index-1a637619.js";import{u as w}from"./uni-load-more.934e6c66.js";const D=t({components:{uniLoadMore:w},data:()=>({loading:!0,phoneHeight:0,scrollviewHigh:0,select_index:0,listData:[],categoryList:[],category_id:0,last_page:0,page:1,list_rows:10,no_more:!1,my_points:0,points_name:""}),onLoad(){this.init(),this.getCategory()},computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},onReachBottom(){let t=this;t.page<t.last_page&&(t.page++,t.getData()),t.no_more=!0},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,t.scrollviewHigh=t.phoneHeight}})},getCategory(){let t=this;t.loading=!0,t._get("plus.points.category/index",{},(function(a){t.categoryList=a.data.list.all;t.categoryList=[{category_id:0,name:"全部"},...t.categoryList],t.loading=!1,t.getData()}))},selectCategory(t){t==this.category_id||this.loading||(this.category_id=t,this.initData(),this.getData())},initData(){this.listData=[],this.page=1,this.no_more=!1},getData(){let t=this;t.loading=!0,t._get("plus.points.product/index",{page:t.page||1,list_rows:t.list_rows,category_id:t.category_id},(function(a){t.loading=!1,t.points_name=a.data.points_name,t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1&&(t.no_more=!0)}))},gotoList(t){this.gotoPage("/pages/plus/points/detail/detail?product_id="+t)}}},[["render",function(t,a,w,D,k,C){const L=l,v=m,x=p,H=f;return e(),s(L,{class:i(["category-content",t.theme()||""]),"data-theme":t.theme()},{default:o((()=>[c(L,{class:"hang dominant",onClick:a[0]||(a[0]=a=>t.gotoPage("/pages/plus/points/order/order"))},{default:o((()=>[n("兑换记录")])),_:1}),c(L,{class:"prodcut-list-wrap"},{default:o((()=>[c(L,{class:"cotegory-type cotegory-type-3"},{default:o((()=>[c(L,{class:"category-tab"},{default:o((()=>[c(x,{"scroll-y":"true",class:"scroll-Y",style:d("height:"+k.scrollviewHigh+"px;")},{default:o((()=>[(e(!0),r(_,null,g(k.categoryList,((t,a)=>(e(),s(L,{class:i(k.category_id==t.category_id?"item active":"item"),key:a,onClick:a=>C.selectCategory(t.category_id)},{default:o((()=>[c(v,null,{default:o((()=>[n(u(t.name),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1},8,["style"])])),_:1}),c(L,{class:"category-content pr"},{default:o((()=>[c(x,{"scroll-y":"true",class:"scroll-Y scroll-3",style:d("height:"+k.scrollviewHigh+"px;")},{default:o((()=>[c(L,{class:"list"},{default:o((()=>[(e(!0),r(_,null,g(k.listData,((t,a)=>(e(),s(L,{class:"item",key:a,onClick:a=>C.gotoList(t.product_id)},{default:o((()=>[c(H,{src:t.file_path,mode:"aspectFit"},null,8,["src"]),c(L,{class:"ww100"},{default:o((()=>[c(L,{class:"type-name text-ellipsis"},{default:o((()=>[n(u(t.product_name),1)])),_:2},1024),c(L,{class:"f24 gray9"},{default:o((()=>[h("div",null,[c(v,{class:"dominant f24"},{default:o((()=>[n(u(t.product_points),1)])),_:2},1024),n(" "+u(k.points_name)+" ",1),t.product_price>0?(e(),r(_,{key:0},[n(" + "),c(v,{class:"dominant f24"},{default:o((()=>[n(u(t.product_price),1)])),_:2},1024),n(" 元 ")],64)):y("",!0)])])),_:2},1024),c(L,{class:"f22 gray9"},{default:o((()=>[n("剩余库存："+u(t.product_stock)+"件",1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-70da5e40"]]);export{D as default};
