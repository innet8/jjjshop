import{_ as e,B as a,M as t,o as s,c as l,w as o,g as d,b as r,f as i,r as c,F as n,d as u,v as _,j as g,k as f,S as h,n as p,t as b,e as m,i as y}from"./index-1a637619.js";import{u as w}from"./uni-load-more.934e6c66.js";const v=e({components:{uniLoadMore:w},data:()=>({phoneHeight:0,scrollviewHigh:0,state_active:-1,tableData:[],settled:-1,page:1,no_more:!1,loading:!0,tableList:[],list_rows:15,user_id:0}),computed:{loadingType(){return this.loading?1:0!=this.tableData.length&&this.no_more?2:0}},mounted(){this.init(),this.user_id=this.getUserId(),this.getData()},methods:{init(){let e=this;a({success(a){e.phoneHeight=a.windowHeight,t().select(".top-tabbar").boundingClientRect((a=>{let t=e.phoneHeight-a.height;e.scrollviewHigh=t})).exec()}})},getData(){let e=this;e.loading=!0,e._get("plus.agent.order/lists",{settled:e.state_active,page:e.page||1,list_rows:e.list_rows},(function(a){e.loading=!1,e.tableList=[{value:-1,text:a.data.words.order.words.all.value},{value:0,text:a.data.words.order.words.unsettled.value},{value:1,text:a.data.words.order.words.settled.value}],e.tableData=e.tableData.concat(a.data.list.data),e.last_page=a.data.list.last_page,e.last_page<=1&&(e.no_more=!0)}))},stateFunc(e){let a=this;e!=a.state_active&&(a.tableData=[],a.page=1,a.state_active=e,a.getData())},scrolltolowerFunc(){let e=this;e.no_more||(e.page++,e.page<=e.last_page?e.getData():e.no_more=!0)}}},[["render",function(e,a,t,w,v,k){const D=d,x=g,H=y,F=f("uni-load-more"),j=h;return s(),l(D,null,{default:o((()=>[r(D,{class:"top-tabbar"},{default:o((()=>[(s(!0),i(n,null,c(v.tableList,((e,a)=>(s(),l(D,{class:p(v.state_active==e.value?"tab-item active":"tab-item"),onClick:a=>k.stateFunc(e.value),key:a},{default:o((()=>[u(b(e.text),1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),r(j,{"scroll-y":"true",class:"scroll-Y",style:_("height:"+v.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltolower:k.scrolltolowerFunc},{default:o((()=>[r(D,{class:"p-0-30 bg-white"},{default:o((()=>[(s(!0),i(n,null,c(v.tableData,((e,a)=>(s(),l(D,{class:"border-b p-20-0",key:a},{default:o((()=>[r(D,{class:"d-b-c f24"},{default:o((()=>[r(x,null,{default:o((()=>[u("订单号"+b(e.order_master.order_no),1)])),_:2},1024),1==e.is_settled?(s(),l(x,{key:0,class:"blue"},{default:o((()=>[u(" 已结算")])),_:1})):(s(),l(x,{key:1,class:"gray"},{default:o((()=>[u("未结算")])),_:1}))])),_:2},1024),r(D,{class:"d-b-c mt20"},{default:o((()=>[r(D,{class:"agent-order-photo"},{default:o((()=>[r(H,{src:e.user.avatarUrl,mode:"aspectFill"},null,8,["src"])])),_:2},1024),r(D,{class:"flex-1 ml20 f24"},{default:o((()=>[r(D,{class:"d-b-c"},{default:o((()=>[r(x,{class:"gray3"},{default:o((()=>[u(b(e.user.nickName),1)])),_:2},1024),e.first_user_id==v.user_id?(s(),l(x,{key:0,class:"red"},{default:o((()=>[u("+￥"+b(e.first_money),1)])),_:2},1024)):m("",!0),e.second_user_id==v.user_id?(s(),l(x,{key:1,class:"red"},{default:o((()=>[u("+￥"+b(e.second_money),1)])),_:2},1024)):m("",!0),e.third_user_id==v.user_id?(s(),l(x,{key:2,class:"red"},{default:o((()=>[u("+￥"+b(e.third_money),1)])),_:2},1024)):m("",!0)])),_:2},1024),r(D,{class:"d-b-c"},{default:o((()=>[r(x,{class:"gray9"},{default:o((()=>[u("消费金额：￥"+b(e.order_price),1)])),_:2},1024),r(x,{class:"gray9"},{default:o((()=>[u(b(e.create_time),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),0!=v.tableData.length||v.loading?(s(),l(F,{key:1,loadingType:k.loadingType},null,8,["loadingType"])):(s(),l(D,{key:0,class:"d-c-c p30"},{default:o((()=>[r(x,{class:"iconfont icon-wushuju"}),r(x,{class:"cont"},{default:o((()=>[u("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1})])),_:1},8,["style","onScrolltolower"])])),_:1})}],["__scopeId","data-v-dac3c8c0"]]);export{v as default};
