import{_ as t,B as a,o as e,c as s,w as o,g as l,b as i,f as n,r,F as c,d,v as u,j as _,k as p,S as g,t as h,e as m,i as f}from"./index-1a637619.js";import{u as y}from"./uni-load-more.934e6c66.js";import{_ as w}from"./log-vip.fbbbbf27.js";const D=t({components:{uniLoadMore:y},data:()=>({phoneHeight:0,scrollviewHigh:0,state_active:0,page:1,last_page:0,list_rows:15,listData:[],no_more:!1,loading:!1,data_type:"not_use",cardCount:{cardCount:0,myCount:0}}),mounted(){this.init()},onShow(){this.initData(),this.getData()},computed:{loadingType(){return this.loading?1:0!=this.listData.length&&this.no_more?2:0}},methods:{init(){let t=this;a({success(a){t.phoneHeight=a.windowHeight,t.scrollviewHigh=a.windowHeight}})},initData(){this.listData=[],this.page=1,this.no_more=!1},getData(){let t=this;t.loading=!0;let a="";a="user.UserCard/index",t._get("user.UserCard/index",{page:t.page,list_rows:t.list_rows},(function(a){if(t.loading=!1,t.cardCount=a.data.cardCount,t.listData=t.listData.concat(a.data.list.data),t.last_page=a.data.list.last_page,a.data.list.last_page<=1)return t.no_more=!0,!1}))},scrolltolowerFunc(){let t=this;t.no_more||(t.page++,t.page<=t.last_page?t.getData():t.no_more=!0)},stateFunc(t){let a=this;a.loading||a.state_active!=t&&(0==t&&(a.data_type="not_use"),1==t&&(a.data_type="is_use"),2==t&&(a.data_type="is_expire"),a.state_active=t,a.initData(),a.getData())},scrolltoupperFunc(){console.log("滚动视图区域到顶")},lookRule(t){t.rule=!0},closeRule(t){t.rule=!1},gotoDetail(t){this.gotoPage("/pages/order/card?state_active=0&card_id="+t.card_id)}}},[["render",function(t,a,y,D,v,k){const x=f,C=l,b=_,F=p("uni-load-more"),H=g;return e(),s(C,null,{default:o((()=>[i(H,{"scroll-y":"true",class:"scroll-Y",style:u("height:"+v.scrollviewHigh+"px;"),"lower-threshold":"50",onScrolltoupper:k.scrolltoupperFunc,onScrolltolower:k.scrolltolowerFunc},{default:o((()=>[i(C,{class:"p30 bg-white"},{default:o((()=>[(e(!0),n(c,null,r(v.listData,((t,a)=>(e(),s(C,{class:"item-wrap",key:a,onClick:a=>k.gotoDetail(t),style:u("background: url("+t.card_style_url+") left top / 100% 100% no-repeat;")},{default:o((()=>[i(C,{class:"item-wrap-box"},{default:o((()=>[i(C,{class:"f24 mb48 d-s-c"},{default:o((()=>[i(x,{src:w,class:"vip-image",mode:"aspectFill"}),d(" "+h(t.card_name||t.card.card_name),1)])),_:2},1024),i(C,{class:"tc f60 fb mb16"},{default:o((()=>[d(h(t.money)+"元",1)])),_:2},1024),i(C,{class:"tc f26"},{default:o((()=>[d(h(t.expire_time_text),1)])),_:2},1024),i(C,{class:"tc f24 mt40"},{default:o((()=>[t.open_coupon?(e(),s(b,{key:0},{default:o((()=>[d("开卡送券 · ")])),_:1})):m("",!0),t.open_points?(e(),s(b,{key:1},{default:o((()=>[d("开卡送积分 · ")])),_:1})):m("",!0),d("更多特权")])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1}),0!=v.listData.length||v.loading?(e(),s(F,{key:1,loadingType:k.loadingType},null,8,["loadingType"])):(e(),s(C,{key:0,class:"d-c-c p30"},{default:o((()=>[i(b,{class:"iconfont icon-wushuju"}),i(b,{class:"cont"},{default:o((()=>[d("亲，暂无相关记录哦")])),_:1})])),_:1}))])),_:1},8,["style","onScrolltoupper","onScrolltolower"])])),_:1})}],["__scopeId","data-v-98ea236d"]]);export{D as default};
