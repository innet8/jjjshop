import{_ as e,o as t,c as a,w as l,aa as s,e as d,n as r,v as o,i,g as c,l as u,p as n,G as p,ab as f,a as _,E as y,a6 as g,b as m,d as h,t as x,f as b,r as v,F as k,j as w,x as P,h as C}from"./index-1a637619.js";import{r as z}from"./uni-app.es.041617b8.js";import{P as B}from"./uni-popup.bcc5e38f.js";import{p as D}from"./pay.6f221c8b.js";/* empty css                                                                  */const O=e({name:"ListCell",props:{arrow:{type:Boolean,default:!1},hover:{type:Boolean,default:!0},lineLeft:{type:Boolean,default:!1},lineRight:{type:Boolean,default:!1},padding:{type:String,default:"26rpx 30rpx"},last:{type:Boolean,default:!1},radius:{type:Boolean,default:!1},bgcolor:{type:String,default:"#fff"},size:{type:Number,default:28},color:{type:String,default:"#5A5B5C"},index:{type:Number,default:0}},methods:{handleClick(){this.$emit("click",{index:this.index})}}},[["render",function(e,u,n,p,f,_){const y=i,g=c;return t(),a(g,{class:r(["tui-cell-class tui-list-cell",{"tui-cell-arrow":n.arrow,"tui-cell-last":n.last,"tui-line-left":n.lineLeft,"tui-line-right":n.lineRight,"tui-radius":n.radius}]),"hover-class":n.hover?"tui-cell-hover":"",style:o({background:n.bgcolor,fontSize:n.size+"rpx",color:n.color,padding:n.padding}),"hover-stay-time":150,onClick:_.handleClick},{default:l((()=>[s(e.$slots,"default",{},void 0,!0),n.arrow?(t(),a(y,{key:0,src:"/h5/static/images/navigator-1.png",class:"arrow"})):d("",!0)])),_:3},8,["class","hover-class","style","onClick"])}],["__scopeId","data-v-6de4a63e"]]);const S=e({components:{listCell:O},data:()=>({loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,isPayPopup:!1,order_id:0,detail:{order_status:[],address:{region:[]},product:[],pay_type:[],delivery_type:[],pay_status:[]},extractStore:{},is_fightgroup:!1,showAlipay:!1,type:0,qrimg:""}),components:{Popup:B},onLoad(e){this.order_id=e.order_id,this.type=e.type},mounted(){u({title:"加载中"}),this.getData()},methods:{getData(){let e=this,t=e.order_id;e._get("plus.driver.TakeOrder/detail",{order_id:t},(function(t){e.detail=t.data.order,e.extractStore=t.data.order.extractStore,e.loadding=!1,n()}))},receiveOrder(e){let t=this;u({title:"加载中"}),t._post("plus.driver.TakeOrder/receiveOrder",{order_id:e.order_id},(function(e){p({content:e.msg,complete(){f({url:"/pages/rider/order/order?order_id="+t.order_id+"&type=1"})}}),n(),t.loadding=!1}))},hidePopupFunc(){this.isPayPopup=!1},cancelOrder(e){let t=this,a=e;p({title:"提示",content:"您确定要取消当前订单吗?",success:function(e){e.confirm&&(u({title:"正在处理"}),t._get("user.order/cancel",{order_id:a},(function(e){n(),_({title:"操作成功",duration:2e3,icon:"success"}),t.getData()})))}})},orderReceipt(e){let t=this;p({title:"提示",content:"您确定要收货吗?",success:function(a){a.confirm&&(u({title:"正在处理"}),t._post("user.order/receipt",{order_id:e},(function(e){n(),_({title:e.msg,duration:2e3,icon:"success"}),t.getData()})))}})},gotoExpress(e){y({url:"/pages/order/express/express?order_id="+e})},onApplyRefund(e){y({url:"/pages/order/refund/apply/apply?order_product_id="+e})},payTypeFunc(e){let t=this,a=t.order_id;t.isPayPopup=!1,u({title:"加载中"}),t._post("user.order/pay",{payType:e,order_id:a,pay_source:t.getPlatform()},(function(e){n(),D(e,t)}))},orderReceipt(e){let t=this;p({title:"提示",content:"您确定送达了吗?",success:function(a){a.confirm?(u({title:"正在处理"}),t._post("user.order/receipt",{order_id:e.order_id},(function(e){n(),_({title:"已确认送达",duration:2e3,icon:"success"}),t.restoreData(),t.getData()}))):_({title:"取消送达",duration:1e3,icon:"none"})}})},onPayOrder(e){this.isPayPopup=!0,this.order_id=e},callPhone(e){e+="",console.log(e),g({phoneNumber:e,success(e){console.log(e)},fail(e){console.log(e)}})}}},[["render",function(e,s,r,o,u,n){const p=c,f=w,_=z(P("list-cell"),O),y=C,g=i;return u.loadding?d("",!0):(t(),a(p,{key:0,class:"order-box"},{default:l((()=>[m(p,{class:"bg-white"},{default:l((()=>[m(p,{class:"section"},{default:l((()=>[m(_,{hover:!1,padding:"50rpx 30rpx"},{default:l((()=>[m(p,{class:"ww100 d-flex d-c"},{default:l((()=>[20==u.detail.pay_status.value&&1==u.type?(t(),a(_,{key:0,hover:!1,padding:"0rpx 0rpx 40rpx"},{default:l((()=>[m(p,{class:"ww100 d-flex d-c"},{default:l((()=>[m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("联系人")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.address.name),1)])),_:1})])),_:1}),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("联系电话")])),_:1}),m(p,{class:"fb",onClick:s[0]||(s[0]=e=>n.callPhone(u.detail.address.phone))},{default:l((()=>[h(x(u.detail.address.phone),1),m(f,{class:"icon iconfont icon-002dianhua"})])),_:1})])),_:1}),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("配送地址")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.address.detail+u.detail.address.address),1)])),_:1})])),_:1})])),_:1})])),_:1})):d("",!0),m(p,{class:"ww100 d-flex d-c pr mt30",style:{"margin-bottom":"-40rpx"}},{default:l((()=>[(t(!0),b(k,null,v(u.detail.product,((e,s)=>(t(),a(p,{class:"ww100 d-s-c mb-40",key:s},{default:l((()=>[m(p,{class:"d-flex d-c w-60 o-h"},{default:l((()=>[m(p,{class:"font-size-lg text-color-base mb10 text-truncate"},{default:l((()=>[h(x(e.product_name),1)])),_:2},1024),m(p,{class:"font-size-sm text-color-assist text-truncate"},{default:l((()=>[h(x(e.product_attr),1)])),_:2},1024)])),_:2},1024),m(p,{class:"d-flex w-40 d-b-c pl-30"},{default:l((()=>[m(p,{class:"font-size-base text-color-base"},{default:l((()=>[h("x"+x(e.total_num),1)])),_:2},1024),m(p,{class:"font-size-base text-color-base fb"},{default:l((()=>[h("￥"+x(e.total_pay_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])),_:1}),m(p,{class:"section"},{default:l((()=>[m(_,{hover:!1,padding:"50rpx 30rpx"},{default:l((()=>[m(p,{class:"ww100 d-flex d-c"},{default:l((()=>[0!=u.detail.bag_price?(t(),a(p,{key:0,class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("包装费")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h("￥"+x(u.detail.bag_price),1)])),_:1})])),_:1})):d("",!0),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("配送费")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h("￥"+x(u.detail.express_price),1)])),_:1})])),_:1}),0!=u.detail.fullreduce_money?(t(),a(p,{key:1,class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h(x(u.detail.fullreduce_remark),1)])),_:1}),m(p,{class:"fb"},{default:l((()=>[h("￥"+x(u.detail.fullreduce_money),1)])),_:1})])),_:1})):d("",!0),0!=u.detail.coupon_money?(t(),a(p,{key:2,class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("优惠券")])),_:1}),m(p,{class:"fb red"},{default:l((()=>[h("￥"+x(u.detail.coupon_money),1)])),_:1})])),_:1})):d("",!0),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("金额总计")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h("￥"+x(u.detail.pay_price),1)])),_:1})])),_:1}),m(p,{class:"pay-cell"},{default:l((()=>[1==u.type&&10==u.detail.receipt_status.value?(t(),a(p,{key:0},{default:l((()=>[h("订单配送中")])),_:1})):d("",!0),1==u.type&&20==u.detail.receipt_status.value?(t(),a(p,{key:1},{default:l((()=>[h("订单已结束")])),_:1})):d("",!0),0==u.type?(t(),a(p,{key:2})):d("",!0),1==u.type&&10==u.detail.receipt_status.value?(t(),a(p,{key:3},{default:l((()=>[m(y,{class:"order_btn",onClick:s[1]||(s[1]=e=>n.orderReceipt(u.detail))},{default:l((()=>[h("确认送达")])),_:1})])),_:1})):d("",!0),1==u.type&&20==u.detail.receipt_status.value?(t(),a(p,{key:4},{default:l((()=>[m(y,{class:"order_btn"},{default:l((()=>[h("已送达")])),_:1})])),_:1})):d("",!0),0==u.type?(t(),a(p,{key:5},{default:l((()=>[m(y,{class:"order_btn",onClick:s[2]||(s[2]=e=>n.receiveOrder(u.detail))},{default:l((()=>[h("接单")])),_:1})])),_:1})):d("",!0)])),_:1})])),_:1})])),_:1})])),_:1}),m(_,{hover:!1,padding:"50rpx 30rpx 20rpx",last:""},{default:l((()=>[m(p,{class:"ww100 d-flex d-c"},{default:l((()=>[m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("期望送达时间")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.mealtime),1)])),_:1})])),_:1}),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("下单时间")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.create_time),1)])),_:1})])),_:1}),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("订单号")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.order_no),1)])),_:1})])),_:1}),1==u.type&&1==u.detail.store_state?(t(),a(p,{key:0,class:"pay-cell"},{default:l((()=>[m(p,{class:"fb w100"},{default:l((()=>[m(g,{class:"qr_img",src:u.qrimg,mode:""},null,8,["src"])])),_:1})])),_:1})):d("",!0),m(p,{class:"pay-cell"},{default:l((()=>[m(p,null,{default:l((()=>[h("备注")])),_:1}),m(p,{class:"fb"},{default:l((()=>[h(x(u.detail.postscript),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}))}],["__scopeId","data-v-c440c82b"]]);export{S as default};
