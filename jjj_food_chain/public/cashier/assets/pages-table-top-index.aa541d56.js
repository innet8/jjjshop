import{_ as e,a5 as t,r as a,I as l,w as s,o as n,f as o,g as u,h as i,i as c,t as r,q as d,u as p,C as f,k as _,j as m,D as v,n as y,p as b,F as h,$ as g,a as w,N as k,c as C,a6 as x,O as A,P as D,a7 as L,M as S,R as B,a8 as O,l as I,S as $,e as V,x as T,s as K,U as F,V as P,W as U}from"./index-3bbd2984.js";import{_ as z}from"./u-popup.0dfae59e.js";const R=e({__name:"custom-tag",props:{title:{type:String,default:"全部"},select:{type:Boolean,default:!1},type:{type:String,default:"center"}},emits:["click"],setup(e,{emit:m}){const v=e;t((e=>({"2b14a256":p(y)})));var y=a("white");l((()=>"single"===v.type?"single":"center"===v.type?"center":void 0)),s((()=>v.select),((e,t)=>{y.value=e?"#ffbe00":"white"}));const b=()=>{m("click",v.title)};return l((()=>({"active-class":isActive.value,"inactive-class":!isActive.value}))),(t,a)=>{const l=f,s=_;return n(),o(s,{class:d(["custom-tag",{single:"single"===e.type,center:"center"===e.type,active:e.select}]),onClick:b},{default:u((()=>[i(l,{class:"title"},{default:u((()=>[c(r(e.title),1)])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-508458a7"]]),N=e({__name:"tag-group",props:{list:{type:Array,default:[]},topTitle:{type:String,default:m("全部")},inputKey:{type:String,default:"name"},outPutKey:{type:String,default:"value"},showSingle:{type:Boolean,default:!1}},emits:["output"],setup(e,{emit:t}){const l=e;var s=a(m("全部"));const c=e=>{s.value=e,t("output",null)};return(a,r)=>{const d=_;return n(),o(d,{class:"tag-group"},{default:u((()=>[e.showSingle?(n(),o(d,{key:0,class:"single-button"},{default:u((()=>[i(R,{title:e.topTitle,type:"single",onClick:c,select:p(s)==e.topTitle},null,8,["title","select"])])),_:1})):v("",!0),i(d,{class:"button-group"},{default:u((()=>[(n(!0),y(h,null,b(e.list,((a,u)=>(n(),o(R,{type:0==u||u==e.list.length-1?"":"center",title:a[e.inputKey],onClick:e=>(e=>{s.value=e[l.inputKey],t("output",e[l.outPutKey])})(a),select:p(s)===a[e.inputKey]},null,8,["type","title","onClick","select"])))),256))])),_:1})])),_:1})}}},[["__scopeId","data-v-e6773dea"]]);const j=e({__name:"header-slider",emits:["select"],setup(e,{expose:t,emit:l}){const s=a([]),c=a([]),r=a([]),d=a({area_id:null,type_id:null,table_status:null}),f=e=>{d.value.area_id=e,l("select",d.value)},v=e=>{d.value.type_id=e,l("select",d.value)};(async()=>{try{const e=await g("store.table/area");s.value=e.data.list}catch(e){}})(),(async()=>{try{const e=await g("store.table/tableType");c.value=e.data.list.data}catch(e){}})();return t({setAll:e=>{r.value=e}}),(e,t)=>{const a=_;return n(),o(a,{class:"header-slider"},{default:u((()=>[i(a,null,{default:u((()=>[i(a,{class:"scroll-view"},{default:u((()=>[i(N,{list:s.value,inputKey:"area_name",outPutKey:"area_id",showSingle:!0,onOutput:f},null,8,["list"]),i(a,{class:"saparator"}),i(N,{list:c.value,inputKey:"type_name",outPutKey:"type_id",showSingle:!0,onOutput:v},null,8,["list"]),i(a,{class:"saparator"}),i(N,{topTitle:p(m)("全部"),list:r.value,showSingle:!0,onOutput:v},null,8,["topTitle","list"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-893dfcb5"]]),q=""+new URL("table-card-cancel-24b39a5c.svg",import.meta.url).href,E=e({__name:"table-card",props:{cardData:{type:Object,default:{}}},emits:["cancel","creat","detail"],setup(e,{emit:t}){const a=e,l=()=>{30==a.cardData.status?m():f()},s=()=>{t("cancel",a.cardData.table_id)},f=()=>{t("creat",a.cardData)},m=()=>{t("detail",a.cardData.table_id)};return(t,a)=>{const f=_,m=w(C("uni-icons"),k),y=D;return n(),o(f,{class:"table-card",onClick:l},{default:u((()=>[i(f,{class:d(["top-line",{active:30==e.cardData.status}])},null,8,["class"]),i(f,{class:"card-title"},{default:u((()=>[c(r(e.cardData.table_no||"-"),1)])),_:1}),30==e.cardData.status?(n(),o(f,{key:0,class:"card-display"},{default:u((()=>[i(f,{class:"card-item"},{default:u((()=>[i(m,{"custom-prefix":"iconfont",type:"icon-user",size:"18",color:"#100A05"}),i(f,{class:"card-item-title"},{default:u((()=>{var t;return[c(r((null==(t=e.cardData.underwayOrder)?void 0:t.meal_num)||"-"),1)]})),_:1})])),_:1}),i(f,{class:"card-item"},{default:u((()=>[i(m,{"custom-prefix":"iconfont",type:"icon-wallet",size:"18",color:"#100A05"}),i(f,{class:"card-item-title"},{default:u((()=>{var t;return[c(r("￥:"+(null==(t=e.cardData.underwayOrder)?void 0:t.total_price)||"-"),1)]})),_:1}),i(f,{class:"card-weak-title"},{default:u((()=>{var t;return[c(r("$:"+(null==(t=e.cardData.underwayOrder)?void 0:t.total_price)||"-"),1)]})),_:1})])),_:1}),i(f,{class:"card-item"},{default:u((()=>[i(m,{"custom-prefix":"iconfont",type:"icon-user",size:"18",color:"#100A05"}),i(f,{class:"card-item-title"},{default:u((()=>{var t;return[c(r(p(x)(null==(t=e.cardData.underwayOrder)?void 0:t.elapsed_time)||"1"),1)]})),_:1})])),_:1})])),_:1})):(n(),o(f,{key:1,class:"card-temp"},{default:u((()=>[c(r(t.$t("空闲中")),1)])),_:1})),30==e.cardData.status?(n(),o(y,{key:2,onClick:[s,a[0]||(a[0]=A((e=>!l),["stop"]))],class:"card-cancel",src:q})):v("",!0)])),_:1})}}},[["__scopeId","data-v-97e91d07"]]),H=e({__name:"index",props:{modelValue:{type:String,default:""},isFocus:{type:Boolean,default:!1},showPrefix:{type:Boolean,default:!0},suffixType:{type:String,default:"icon-user"},showDelete:{type:Boolean,default:!0},password:{type:Boolean,default:!1},placeholder:{type:String,default:""}},emits:["update:modelValue","focus","blur"],setup(e,{emit:l}){const c=e;t((e=>({e96968b8:p(r)})));var r=a("1px solid #24160B26");a(""),s((()=>c.isFocus),((e,t)=>{r.value=e?"1px solid #FFBE00":"1px solid #24160B26"}));const d=e=>{l("update:modelValue",e.detail.value)},f=()=>{r.value="1px solid #FFBE00",l("focus")},m=()=>{if(!c.modelValue)return;const e=c.modelValue.substring(0,c.modelValue.length-1);l("update:modelValue",e)};return(t,a)=>{const l=w(C("uni-icons"),k),s=_,c=L;return n(),o(s,{class:"custom-input"},{default:u((()=>[e.showPrefix?(n(),o(s,{key:0,class:"suffix-icon"},{default:u((()=>[i(l,{"custom-prefix":"iconfont",type:e.suffixType,size:"18",color:"#100A05"},null,8,["type"])])),_:1})):v("",!0),i(c,{style:{flex:"1"},value:e.modelValue,onInput:d,onFocus:f,password:e.password,placeholder:e.placeholder},null,8,["value","password","placeholder"]),e.showDelete?(n(),o(s,{key:1,class:"delete-button",onClick:m},{default:u((()=>[i(l,{"custom-prefix":"iconfont",type:"icon-arrow-left",size:"18",color:"#100A05"})])),_:1})):v("",!0)])),_:1})}}},[["__scopeId","data-v-f702c464"]]),M=e({__name:"index",props:{isLogin:{type:Boolean,default:!1}},emits:["output","clear","confirm","exit"],setup(e,{emit:t}){const l=[{value:1,title:7},{value:2,title:8},{value:3,title:9},{value:4,title:4},{value:5,title:5},{value:6,title:6},{value:7,title:1},{value:8,title:2},{value:9,title:3}];a(l);const s=e=>{t("output",e)},d=()=>{t("clear")},p=()=>{t("confirm")},f=()=>{t("exit")};return(t,a)=>{const m=S,g=_;return n(),o(g,{class:"keyboard-bg"},{default:u((()=>[i(g,{class:"keyboard-number"},{default:u((()=>[i(g,{class:"one-night"},{default:u((()=>[(n(),y(h,null,b(l,(e=>i(g,{class:"button-container"},{default:u((()=>[i(m,{class:"ti-btn-number",onClick:t=>s(e.title)},{default:u((()=>[c(r(e.title),1)])),_:2},1032,["onClick"])])),_:2},1024))),64))])),_:1}),i(g,{class:"zero"},{default:u((()=>[i(m,{class:"ti-btn-number",onClick:a[0]||(a[0]=e=>s("0"))},{default:u((()=>[c(r(0))])),_:1}),e.isLogin?v("",!0):(n(),o(m,{key:0,class:"ti-btn-number",onClick:a[1]||(a[1]=e=>s("00"))},{default:u((()=>[c("00")])),_:1})),e.isLogin?v("",!0):(n(),o(m,{key:1,class:"ti-btn-number",onClick:a[2]||(a[2]=e=>s("."))},{default:u((()=>[c(".")])),_:1})),e.isLogin?(n(),o(m,{key:2,class:"ti-btn-number number-fill",onClick:a[3]||(a[3]=e=>s("00"))},{default:u((()=>[c("00")])),_:1})):v("",!0)])),_:1})])),_:1}),(n(),o(g,{key:1,class:"ti-keyboard-function"},{default:u((()=>[i(g,null,{default:u((()=>[i(m,{class:"clear-fill-half",onClick:d},{default:u((()=>[c(r("清空"))])),_:1}),i(m,{class:"clear-fill-half",onClick:f},{default:u((()=>[c(r("退出"))])),_:1})])),_:1}),i(g,{class:"ti-keyboard-confirm"},{default:u((()=>[i(m,{class:"clear-fill",onClick:p},{default:u((()=>[c(r("确认"))])),_:1})])),_:1})])),_:1}))])),_:1})}}},[["__scopeId","data-v-0bb24dd5"]]),W=e({__name:"dialog-person-number",props:{show:{type:Boolean,default:!1},tableName:{type:String,default:""}},emits:["update:show","confirm"],setup(e,{emit:t}){const l=e,d=a(""),p=a(),f=()=>{t("update:show",!1)},m=e=>{d.value+=""+e},v=()=>{d.value=""},y=()=>{t("confirm",d.value)};return s((()=>l.show),(async e=>{var t,a;e?(await B(),null==(t=p.value)||t.open()):null==(a=p.value)||a.close()}),{immediate:!0}),(e,t)=>{const a=_,s=w(C("uni-popup"),O);return n(),o(s,{ref_key:"dialogRef",ref:p,"mask-click":!1},{default:u((()=>[i(a,null,{default:u((()=>[i(a,{class:"ti-person-number"},{default:u((()=>[i(a,{class:"ti-person-number-title"},{default:u((()=>[c(r(`[${l.tableName}就餐人数]`),1)])),_:1}),i(H,{class:"ti-person-input",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e)},null,8,["modelValue"])])),_:1}),i(a,{class:"ti-person-keyboard"},{default:u((()=>[i(M,{onOutput:m,onClear:v,onConfirm:y,onExit:f})])),_:1})])),_:1})])),_:1},512)}}},[["__scopeId","data-v-f0b65a8e"]]),G=e({__name:"dialog-change-table",props:{show:{type:Boolean,default:!1}},emits:["update:show","confirm"],setup(e,{emit:t}){a("");const l=a(),s=()=>{t("update:show",!1)},d=()=>{},p=a([{table:"A01",id:"1"},{table:"A02",id:"2"},{table:"A04",id:"4"},{table:"A05",id:"5"},{table:"A06",id:"6"},{table:"A09",id:"9"},{table:"A11",id:"11"},{table:"A12",id:"12"},{table:"A14",id:"14"},{table:"A18",id:"18"},{table:"A22",id:"22"},{table:"A23",id:"23"}]);return(t,a)=>{const f=_,m=S,v=$,g=w(C("ti-button"),I),k=w(C("u-popup"),z);return n(),o(k,{ref_key:"dialogRef",ref:l,round:16,show:e.show,mode:"right",onOpen:d,onClose:s,closeOnClickOverlay:!1},{default:u((()=>[i(f,{class:"ti-change-table-container"},{default:u((()=>[i(f,{class:"ti-change-table-title"},{default:u((()=>[c(r("[A4]转台"))])),_:1}),i(f,{class:"ti-change-table-content"},{default:u((()=>[i(v,{"scroll-y":"true",class:"ti-change-table-scroll"},{default:u((()=>[i(f,{class:"ti-change-table-content"},{default:u((()=>[(n(!0),y(h,null,b(p.value,(e=>(n(),o(m,{class:"ti-change-table-item"},{default:u((()=>[c(r(e.table),1)])),_:2},1024)))),256))])),_:1})])),_:1})])),_:1}),i(f,{class:"ti-change-table-bottom"},{default:u((()=>[i(g,{onClick:s},{default:u((()=>[c(r(t.$t("退出")),1)])),_:1}),i(g,{type:"primary"},{default:u((()=>[c(r(t.$t("确定")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-47108891"]]),J=e({__name:"dialog-cancel-produce",props:{show:{type:Boolean,default:!1},list:{type:Array,default:()=>[]}},emits:["confirm","update:show"],setup(e,{emit:t}){const a=()=>{t("confirm")};return(l,s)=>{const d=_,p=w(C("ti-modal"),V);return n(),o(p,{class:"ti-action-tips",show:e.show,confirmLoading:l.cancelAllLoading,title:l.$t("溫馨提示"),onConfirm:a,onCancel:s[0]||(s[0]=e=>t("update:show",!1))},{content:u((()=>[i(d,{class:"scroll-list"},{default:u((()=>[(n(!0),y(h,null,b(e.list,(e=>(n(),o(d,{class:"produce-item"},{default:u((()=>[c(r(e.product_name_text||""),1)])),_:2},1024)))),256))])),_:1})])),_:1},8,["show","confirmLoading","title"])}}},[["__scopeId","data-v-5b253a66"]]);const Q=e({__name:"table-list",emits:["tableList"],setup(e,{expose:t,emit:l}){const s=a(!1),d=a(!1),f=a(!1),v=a(!1),k=a([]),x=a([]);var A=a(0),D=a("");const L=async e=>{try{const t=await function(e){return g("store.table/table",e)}(e);k.value=t.data.list,S()}catch(t){}},S=()=>{const e=k.value.length;var t=0;for(let l of k.value)10==l.status&&(t+=1);var a=e-t;const s=[{name:`${m("全部")}(${e})`,value:null},{name:`${m("可用")}(${t})`,value:10},{name:`${m("佔用")}(${a})`,value:30}];l("tableList",s)},B=async e=>{try{const t=await function(e){return g("order.HallCart/detail",e)}(e);1==t.code?t.data.detail.product&&t.data.detail.product.length>0?(x.value=t.data.detail.product,f.value=!0):v.value=!0:K({title:t.msg,icon:"none"})}catch(t){}},O=async()=>{f.value=!1,v.value=!1;const e={table_id:A.value};try{const t=await function(e){return g("order.HallCart/cancel",e)}(e);K({title:t.msg,icon:"none"}),1==t.code&&L()}catch(t){}},I=async e=>{const t={table_id:A.value,meal_num:e};try{const e=await function(e){return g("order.Order/tableBuy",e)}(t);K({title:e.msg,icon:"none"}),1==e.code&&(L(),s.value=!1)}catch(a){}},F=e=>{A.value=e.table_id,D.value=e.table_no,s.value=!0},P=e=>{A.value=e,B({table_id:e})},U=e=>{};return L(),t({getTableList:L}),(e,t)=>{const a=_,g=w(C("ti-empty-data"),T),A=$,L=w(C("ti-modal"),V);return n(),y(h,null,[i(a,{class:"ti-table-list"},{default:u((()=>[i(A,{"scroll-y":"true",class:"scroll-table-list"},{default:u((()=>[k.value.length>0?(n(),o(a,{key:0,class:"table-list"},{default:u((()=>[(n(!0),y(h,null,b(k.value,(e=>(n(),o(E,{onCreat:F,onCancel:P,onDetail:U,cardData:e},null,8,["cardData"])))),256))])),_:1})):(n(),o(g,{key:1}))])),_:1})])),_:1}),i(a,{class:"ti-buttom-views"},{default:u((()=>[i(a,{class:"titles"},{default:u((()=>[c(r(p(m)("全部")+"(15)"),1)])),_:1}),i(a,{class:"titles margin"},{default:u((()=>[i(a,{class:"sqaure green"}),c(" "+r(p(m)("可用")+"(15)"),1)])),_:1}),i(a,{class:"titles margin"},{default:u((()=>[i(a,{class:"sqaure yellow"}),c(" "+r(p(m)("占用")+"(15)"),1)])),_:1}),i(L,{class:"ti-action-tips",show:v.value,"onUpdate:show":t[0]||(t[0]=e=>v.value=e),confirmLoading:e.cancelAllLoading,title:p(m)("溫馨提示"),content:p(m)("是否将商品整單取消？"),onConfirm:O,onCancel:t[1]||(t[1]=e=>l("update:show",!1))},null,8,["show","confirmLoading","title","content"]),i(G,{show:d.value,"onUpdate:show":t[2]||(t[2]=e=>d.value=e)},null,8,["show"]),i(J,{onConfirm:O,list:x.value,show:f.value,"onUpdate:show":t[3]||(t[3]=e=>f.value=e)},null,8,["list","show"]),i(W,{show:s.value,"onUpdate:show":t[4]||(t[4]=e=>s.value=e),tableName:p(D),onConfirm:I},null,8,["show","tableName"])])),_:1})],64)}}},[["__scopeId","data-v-43cde092"]]),X=e({__name:"index",setup(e){const t=a(),l=a(),s=e=>{var a;null==(a=t.value)||a.getTableList(e)},c=e=>{var t;null==(t=l.value)||t.setAll(e)};return F((()=>{P()})),(e,a)=>{const r=_,d=U("ti-layout");return n(),o(d,null,{default:u((()=>[i(r,{class:"app"},{default:u((()=>[i(r,{class:"table-container"},{default:u((()=>[i(j,{ref_key:"headerRef",ref:l,onSelect:s},null,512),i(Q,{onTableList:c,ref_key:"tableRef",ref:t},null,512)])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-33b8c8c9"]]);export{X as default};
