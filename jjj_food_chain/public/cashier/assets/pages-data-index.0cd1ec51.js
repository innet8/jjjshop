import{an as t,_ as e,ao as a,ap as l,o as i,f as n,aq as s,j as d,a as o,c as r,g as u,h as c,i as h,t as f,C as p,B as m,af as y,r as _,$ as g,k as v,u as x,m as S,F as C,n as b,V as k,W as w,L as $,X as B}from"./index-1916d2d3.js";import{_ as L,a as j,b as z,c as N,T as O,d as P}from"./index.41403cc5.js";import{_ as U}from"./u-popup.2df47d4e.js";const I=e({name:"u-line",mixins:[a,l,{props:{color:{type:String,default:t.line.color},length:{type:[String,Number],default:t.line.length},direction:{type:String,default:t.line.direction},hairline:{type:Boolean,default:t.line.hairline},margin:{type:[String,Number],default:t.line.margin},dashed:{type:Boolean,default:t.line.dashed}}}],computed:{lineStyle(){const t={};return t.margin=this.margin,"row"===this.direction?(t.borderBottomWidth="1px",t.borderBottomStyle=this.dashed?"dashed":"solid",t.width=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleY(0.5)")):(t.borderLeftWidth="1px",t.borderLeftStyle=this.dashed?"dashed":"solid",t.height=uni.$u.addUnit(this.length),this.hairline&&(t.transform="scaleX(0.5)")),t.borderColor=this.color,uni.$u.deepMerge(t,uni.$u.addStyle(this.customStyle))}}},[["render",function(t,e,a,l,o,r){const u=d;return i(),n(u,{class:"u-line",style:s([r.lineStyle])},null,8,["style"])}],["__scopeId","data-v-45e31c7a"]]);const T=e({name:"u-divider",mixins:[a,l,{props:{dashed:{type:Boolean,default:t.divider.dashed},hairline:{type:Boolean,default:t.divider.hairline},dot:{type:Boolean,default:t.divider.dot},textPosition:{type:String,default:t.divider.textPosition},text:{type:[String,Number],default:t.divider.text},textSize:{type:[String,Number],default:t.divider.textSize},textColor:{type:String,default:t.divider.textColor},lineColor:{type:String,default:t.divider.lineColor}}}],computed:{textStyle(){const t={};return t.fontSize=uni.$u.addUnit(this.textSize),t.color=this.textColor,t},leftLineStyle(){const t={};return"left"===this.textPosition?t.width="80rpx":t.flex=1,t},rightLineStyle(){const t={};return"right"===this.textPosition?t.width="80rpx":t.flex=1,t}},emits:["click"],methods:{click(){this.$emit("click")}}},[["render",function(t,e,a,l,y,_){const g=o(r("u-line"),I),v=m,x=d;return i(),n(x,{class:"u-divider",style:s([t.$u.addStyle(t.customStyle)]),onClick:_.click},{default:u((()=>[c(g,{color:t.lineColor,customStyle:_.leftLineStyle,hairline:t.hairline,dashed:t.dashed},null,8,["color","customStyle","hairline","dashed"]),t.dot?(i(),n(v,{key:0,class:"u-divider__dot"},{default:u((()=>[h("●")])),_:1})):t.text?(i(),n(v,{key:1,class:"u-divider__text",style:s([_.textStyle])},{default:u((()=>[h(f(t.text),1)])),_:1},8,["style"])):p("",!0),c(g,{color:t.lineColor,customStyle:_.rightLineStyle,hairline:t.hairline,dashed:t.dashed},null,8,["color","customStyle","hairline","dashed"])])),_:1},8,["style","onClick"])}],["__scopeId","data-v-361c8e4c"]]);const W=e({__name:"dialog-data",props:{show:{type:Boolean,default:!1}},emits:["update:show","confirm"],setup(t,{emit:e}){_("");const a=_({time_type:0,time:null,category_type:1}),l=_(""),s=_(""),p=_(),m=_(!0);g("銷售筆數"),g("餘額收入");const k=_([{name:g("今天"),value:"1"},{name:g("昨天"),value:"2"},{name:g("一週"),value:"3"},{name:g("全部"),value:"0"}]),w=_([]),$=_([]),B=t=>{a.value.time_type=t,D()},I=t=>{l.value=t},W=t=>{s.value=t},A=t=>{m.value=t,a.value.category_type=t?1:2,D()},D=async()=>{const t={...a.value};var e=[0,0];l.value&&(e[0]=l.value),s.value&&(e[1]=s.value),0===e[0]&&0===e[1]||(t.time=e);try{const e=await function(t){return y("store.business/index",t)}(t);w.value=e.data.categorys,$.value=e.data.incomes}catch(i){}},X=()=>{e("update:show",!1)},q=()=>{};return D(),(e,a)=>{const l=d,s=o(r("ti-button"),v),y=o(r("u-divider"),T),_=o(r("uni-th"),L),D=o(r("uni-tr"),j),E=o(r("uni-td"),z),F=o(r("uni-table"),N),M=o(r("u-popup"),U);return i(),n(M,{ref_key:"dialogRef",ref:p,round:16,show:t.show,mode:"right",onOpen:q,onClose:X,closeOnClickOverlay:!1},{default:u((()=>[c(l,{class:"ti-data-container"},{default:u((()=>[c(l,{class:"ti-data-title"},{default:u((()=>[h(f(x(g)("營業數據")),1)])),_:1}),c(l,{class:"ti-data-content"},{default:u((()=>[c(x(O),{list:k.value,onOutput:B},null,8,["list"]),c(l,{class:"ti-data-item"},{default:u((()=>[c(x(P),{onStartDateChange:I,onEndDateChange:W}),c(s,{class:"ti-data-item-button margin",type:"primary"},{default:u((()=>[h(f(x(g)("查看")),1)])),_:1})])),_:1}),c(y,{textColor:"#100A05",text:x(g)("按商品分類統計"),dashed:!0},null,8,["text"]),c(l,{class:"ti-data-item"},{default:u((()=>[c(s,{class:"ti-data-item-button",onClick:a[0]||(a[0]=t=>A(!0)),type:m.value?"primary":"default"},{default:u((()=>[h(f(x(g)("按一級分類")),1)])),_:1},8,["type"]),c(s,{class:"ti-data-item-button margin",onClick:a[1]||(a[1]=t=>A(!1)),type:m.value?"default":"primary"},{default:u((()=>[h(f(x(g)("按二級分類")),1)])),_:1},8,["type"])])),_:1}),c(F,{ref:"table",loading:e.loading,border:"",stripe:"",emptyText:x(g)("暂无更多数据"),onSelectionChange:e.selectionChange},{default:u((()=>[c(D,null,{default:u((()=>[c(_,{align:"left"},{default:u((()=>[h(f(x(g)("分類名稱")),1)])),_:1}),c(_,{align:"right"},{default:u((()=>[h(f(x(g)("銷售量")),1)])),_:1}),c(_,{align:"right"},{default:u((()=>[h(f(x(g)("銷售額")),1)])),_:1})])),_:1}),(i(!0),S(C,null,b(w.value,((t,e)=>(i(),n(D,{key:e},{default:u((()=>[c(E,null,{default:u((()=>[h(f(t.name),1)])),_:2},1024),c(E,{align:"right"},{default:u((()=>[c(l,{class:"name"},{default:u((()=>[h(f(t.sales),1)])),_:2},1024)])),_:2},1024),c(E,{align:"right"},{default:u((()=>[h(f(`¥ ${t.prices}`),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["loading","emptyText","onSelectionChange"]),c(y,{textColor:"#100A05",text:x(g)("其它統計"),dashed:!0},null,8,["text"]),c(l,{class:"ti-data-other"},{default:u((()=>[(i(!0),S(C,null,b($.value,(t=>(i(),n(l,{class:"ti-data-other-item"},{default:u((()=>[c(l,{class:"ti-data-other-item-title"},{default:u((()=>[h(f(t.pay_type_name),1)])),_:2},1024),c(l,{class:"ti-data-other-item-content"},{default:u((()=>[h(f(`¥ ${t.price}`),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),c(l,{style:{flex:"1"}}),c(l,{class:"ti-data-bottom"},{default:u((()=>[c(s,{onClick:X},{default:u((()=>[h(f(x(g)("退出")),1)])),_:1}),c(s,{type:"primary"},{default:u((()=>[h(f(x(g)("打印")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-007ec85b"]]),A={__name:"index",setup(t){const e=_(!1);return k((()=>{w()})),(t,a)=>{const l=$,s=B("ti-layout");return i(),n(s,null,{default:u((()=>[c(l,{onClick:a[0]||(a[0]=t=>e.value=!0)},{default:u((()=>[h("数据")])),_:1}),c(W,{show:e.value,"onUpdate:show":a[1]||(a[1]=t=>e.value=t)},null,8,["show"])])),_:1})}}};export{A as default};
