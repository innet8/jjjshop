import{_ as a,H as e,a as s,M as l,c as t,o,f as u,g as n,h as r,i,t as d,u as c,W as f,X as m,Y as p,Z as _,B as g,j as v,a0 as w,r as x,s as h,$ as b,a1 as y,a2 as k,a3 as I,O as V,b as C,k as U,d as j}from"./index-99747ecd.js";import{_ as z}from"./uni-data-select.f7f10a56.js";const F=""+new URL("bg-93598f2d.png",import.meta.url).href,L=""+new URL("login_logo-83575c4a.svg",import.meta.url).href,R=a({__name:"set-language",setup(a){const w=e((()=>m[p()])),x=a=>{a&&a!==p()&&_(a)};return(a,e)=>{const m=s(t("uni-icons"),l),p=g,_=s(t("uni-data-select"),z),h=v;return o(),u(h,{class:"ti-language"},{default:n((()=>[r(m,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),r(p,{class:"ti-language-text"},{default:n((()=>[i(d(c(w)),1)])),_:1}),r(m,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),r(h,{class:"ti-language-select"},{default:n((()=>[r(_,{clear:!1,localdata:c(f)()||[],onChange:x},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-6b3feecf"]]),B=a({__name:"index",setup(a){const l=w(),f=x(!0),m=x(!1),p=x(!1),_=x({user_name:"",password:""}),g=e((()=>!_.value.user_name||!_.value.password)),z=async()=>{if(!_.value.user_name)return h({title:b("請輸入賬號"),icon:"none"});if(!_.value.password)return h({title:b("输入登录密码"),icon:"none"});try{p.value=!0;const a=await y(_.value);a.data.token&&(k(a.data.token),l.setUserInfo(!0),I({url:"/pages/index/index"}))}catch(a){}finally{p.value=!1}},B=a=>{a&&(1==f.value&&(_.value.user_name+=a),1==m.value&&(_.value.password+=a))},E=a=>{f.value="username"===a,m.value="password"===a},H=()=>{1==f.value&&(_.value.user_name=""),1==m.value&&(_.value.password="")};return(a,e)=>{const l=V,w=v,x=s(t("ti-input"),C),h=s(t("ti-button"),U),y=s(t("ti-keyboard"),j);return o(),u(w,{class:"ti-login"},{default:n((()=>[r(w,{class:"ti-login-img"},{default:n((()=>[r(l,{src:F,mode:"widthFix"})])),_:1}),r(w,{class:"ti-login-form"},{default:n((()=>[r(w,{class:"ti-form-box"},{default:n((()=>[r(w,{class:"ti-form-head"},{default:n((()=>[r(w,{class:"ti-login-logo"},{default:n((()=>[r(l,{src:L,mode:"widthFix"})])),_:1}),r(w,{class:"ti-login-title"},{default:n((()=>[i(d(c(b)("收银机")),1)])),_:1})])),_:1}),r(w,{class:"ti-form-username"},{default:n((()=>[r(x,{modelValue:_.value.user_name,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value.user_name=a),prefixIcon:"icon-user",placeholder:c(b)("請輸入用戶名"),focus:f.value,onClick:e[1]||(e[1]=a=>E("username"))},null,8,["modelValue","placeholder","focus"])])),_:1}),r(w,{class:"ti-form-password"},{default:n((()=>[r(x,{modelValue:_.value.password,"onUpdate:modelValue":e[2]||(e[2]=a=>_.value.password=a),prefixIcon:"icon-lock",placeholder:c(b)("請輸入登錄密碼"),focus:m.value,password:!0,onClick:e[3]||(e[3]=a=>E("password"))},null,8,["modelValue","placeholder","focus"])])),_:1}),r(w,{class:"ti-form-btn"},{default:n((()=>[r(h,{type:"primary",loading:p.value,disabled:c(g),onClick:z},{default:n((()=>[i(d(c(b)("登錄")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1}),r(w,{class:"ti-form-keyboard"},{default:n((()=>[r(y,{isExit:!1,isPrimary:!1,onInput:B,onClear:H})])),_:1})])),_:1}),r(w,{class:"ti-language-box"},{default:n((()=>[r(R)])),_:1})])),_:1})}}},[["__scopeId","data-v-002054da"]]);export{B as default};
