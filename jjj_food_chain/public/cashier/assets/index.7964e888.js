import{_ as e,o as t,n as a,ad as i,q as s,ac as d,f as l,g as n,h,k as c,W as r,D as o,aj as u,t as p,r as b,I as k,w as f,i as y,C as m,j as g,u as C,F as _,p as x,a as D,N as v,c as w,a6 as I}from"./index-14bf2711.js";const S=e({name:"uniTd",options:{virtualHost:!0},props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1}},data:()=>({border:!1}),created(){this.root=this.getTable(),this.border=this.root.border},methods:{getTable(){let e=this.$parent,t=e.$options.name;for(;"uniTable"!==t;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e}}},[["render",function(e,l,n,h,c,r){return t(),a("td",{class:s(["uni-table-td",{"table--border":c.border}]),rowspan:n.rowspan,colspan:n.colspan,style:d({width:n.width+"px","text-align":n.align})},[i(e.$slots,"default",{},void 0,!0)],14,["rowspan","colspan"])}],["__scopeId","data-v-de80d4b3"]]);const T=e({name:"TableCheckbox",emits:["checkboxSelected"],props:{indeterminate:{type:Boolean,default:!1},checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1},index:{type:Number,default:-1},cellData:{type:Object,default:()=>({})}},watch:{checked(e){"boolean"==typeof this.checked?this.isChecked=e:this.isChecked=!0},indeterminate(e){this.isIndeterminate=e}},data:()=>({isChecked:!1,isDisabled:!1,isIndeterminate:!1}),created(){"boolean"==typeof this.checked&&(this.isChecked=this.checked),this.isDisabled=this.disabled},methods:{selected(){this.isDisabled||(this.isIndeterminate=!1,this.isChecked=!this.isChecked,this.$emit("checkboxSelected",{checked:this.isChecked,data:this.cellData}))}}},[["render",function(e,a,i,d,r,o){const u=c;return t(),l(u,{class:"uni-table-checkbox",onClick:o.selected},{default:n((()=>[i.indeterminate?(t(),l(u,{key:1,class:"checkbox__inner checkbox--indeterminate"},{default:n((()=>[h(u,{class:"checkbox__inner-icon"})])),_:1})):(t(),l(u,{key:0,class:s(["checkbox__inner",{"is-checked":r.isChecked,"is-disable":r.isDisabled}])},{default:n((()=>[h(u,{class:"checkbox__inner-icon"})])),_:1},8,["class"]))])),_:1},8,["onClick"])}],["__scopeId","data-v-44b3aba9"]]);const $=e({name:"uniTr",components:{tableCheckbox:T},props:{disabled:{type:Boolean,default:!1},keyValue:{type:[String,Number],default:""}},options:{virtualHost:!0},data:()=>({value:!1,border:!1,selection:!1,widthThArr:[],ishead:!0,checked:!1,indeterminate:!1}),created(){this.root=this.getTable(),this.head=this.getTable("uniThead"),this.head&&(this.ishead=!1,this.head.init(this)),this.border=this.root.border,this.selection=this.root.type,this.root.trChildren.push(this);const e=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));e&&(this.rowData=e),this.root.isNodata()},mounted(){if(this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=this.widthThArr.reduce(((e,t)=>Number(e)+Number(t)))+e}},unmounted(){const e=this.root.trChildren.findIndex((e=>e===this));this.root.trChildren.splice(e,1),this.root.isNodata()},methods:{minWidthUpdate(e){this.widthThArr.push(e)},checkboxSelected(e){let t=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));this.checked=e.checked,this.root.check(t||this,e.checked,t?this.keyValue:null)},change(e){this.root.trChildren.forEach((t=>{t===this&&this.root.check(this,e.detail.value.length>0)}))},getTable(e="uniTable"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},[["render",function(e,d,l,n,c,u){const p=r("table-checkbox");return t(),a("tr",{class:"uni-table-tr"},["selection"===c.selection&&c.ishead?(t(),a("th",{key:0,class:s(["checkbox",{"tr-table--border":c.border}])},[h(p,{checked:c.checked,indeterminate:c.indeterminate,disabled:l.disabled,onCheckboxSelected:u.checkboxSelected},null,8,["checked","indeterminate","disabled","onCheckboxSelected"])],2)):o("",!0),i(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-697c8729"]]);const K=e({name:"uniTable",options:{virtualHost:!0},emits:["selection-change"],props:{data:{type:Array,default:()=>[]},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},type:{type:String,default:""},emptyText:{type:String,default:"没有更多数据"},loading:{type:Boolean,default:!1},rowKey:{type:String,default:""}},data:()=>({noData:!0,minWidth:0,multiTableHeads:[]}),watch:{loading(e){},data(e){this.theadChildren,this.theadChildren&&this.theadChildren.rowspan,this.noData=!1}},created(){this.trChildren=[],this.thChildren=[],this.theadChildren=null,this.backData=[],this.backIndexData=[]},methods:{isNodata(){this.theadChildren;let e=1;this.theadChildren&&(e=this.theadChildren.rowspan),this.noData=this.trChildren.length-e<=0},selectionAll(){let e=1,t=this.theadChildren;this.theadChildren?e=t.rowspan-1:t=this.trChildren[0];let a=this.data&&this.data.length>0;t.checked=!0,t.indeterminate=!1,this.trChildren.forEach(((t,i)=>{if(!t.disabled){if(t.checked=!0,a&&t.keyValue){const e=this.data.find((e=>e[this.rowKey]===t.keyValue));this.backData.find((t=>t[this.rowKey]===e[this.rowKey]))||this.backData.push(e)}i>e-1&&-1===this.backIndexData.indexOf(i-e)&&this.backIndexData.push(i-e)}})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},toggleRowSelection(e,t){e=[].concat(e),this.trChildren.forEach(((a,i)=>{const s=e.findIndex((e=>"number"==typeof e?e===i-1:e[this.rowKey]===a.keyValue));let d=a.checked;-1!==s&&(a.checked="boolean"==typeof t?t:!a.checked,d!==a.checked&&this.check(a.rowData||a,a.checked,a.rowData?a.keyValue:null,!0))})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},clearSelection(){let e=this.theadChildren;this.theadChildren||(e=this.trChildren[0]),e.checked=!1,e.indeterminate=!1,this.trChildren.forEach((e=>{e.checked=!1})),this.backData=[],this.backIndexData=[],this.$emit("selection-change",{detail:{value:[],index:[]}})},toggleAllSelection(){let e=[],t=1,a=this.theadChildren;this.theadChildren?t=a.rowspan-1:a=this.trChildren[0],this.trChildren.forEach(((a,i)=>{a.disabled||i>t-1&&e.push(i-t)})),this.toggleRowSelection(e)},check(e,t,a,i){let s=this.theadChildren;this.theadChildren||(s=this.trChildren[0]);let d=this.trChildren.findIndex(((t,a)=>e===t));if(d<0&&(d=this.data.findIndex((e=>e[this.rowKey]===a))+1),this.trChildren.filter((e=>!e.disabled&&e.keyValue)).length,0===d)return void(t?this.selectionAll():this.clearSelection());if(t)a&&this.backData.push(e),this.backIndexData.push(d-1);else{const e=this.backData.findIndex((e=>e[this.rowKey]===a)),t=this.backIndexData.findIndex((e=>e===d-1));a&&this.backData.splice(e,1),this.backIndexData.splice(t,1)}this.trChildren.find(((e,t)=>t>0&&!e.checked&&!e.disabled))?(s.indeterminate=!0,s.checked=!1):(s.indeterminate=!1,s.checked=!0),0===this.backIndexData.length&&(s.indeterminate=!1),i||this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})}}},[["render",function(e,h,r,b,k,f){const y=c;return t(),l(y,{class:s(["uni-table-scroll",{"table--border":r.border,"border-none":!k.noData}])},{default:n((()=>[u("table",{class:s(["uni-table",{"table--stripe":r.stripe}]),border:"0",cellpadding:"0",cellspacing:"0",style:d({"min-width":k.minWidth+"px"})},[i(e.$slots,"default",{},void 0,!0),k.noData?(t(),a("tr",{key:0,class:"uni-table-loading"},[u("td",{class:s(["uni-table-text",{"empty-border":r.border}])},p(r.emptyText),3)])):o("",!0),r.loading?(t(),l(y,{key:1,class:s(["uni-table-mask",{"empty-border":r.border}])},{default:n((()=>[u("div",{class:"uni-table--loader"})])),_:1},8,["class"])):o("",!0)],6)])),_:3},8,["class"])}],["__scopeId","data-v-88bd7cc1"]]),N=e({__name:"custom-tag",props:{title:{type:String,default:"全部"},select:{type:Boolean,default:!1},type:{type:String,default:"center"}},emits:["click"],setup(e,{emit:a}){const i=e;var d=b("white");k((()=>"single"===i.type?"single":"center"===i.type?"center":void 0)),f((()=>i.select),((e,t)=>{d.value=e?"#ffbe00":"white"}));const r=()=>{a("click",i.title)};return(a,d)=>{const o=m,u=c;return t(),l(u,{class:s(["custom-tag",{active:i.select}]),onClick:r},{default:n((()=>[h(o,{class:"title"},{default:n((()=>[y(p(e.title),1)])),_:1})])),_:1},8,["class"])}}},[["__scopeId","data-v-a110657d"]]),A=e({__name:"tag-group",props:{list:{type:Array,default:[]},key:{type:String,default:"name"},outPutKey:{type:String,default:"value"},showSingle:{type:Boolean,default:!1}},emits:["output"],setup(e,{emit:i}){const s=e;var d=b(g("今天"));const r=e=>{d.value=e,i("output",e)};return(u,p)=>{const b=c;return t(),l(b,{class:"tag-group"},{default:n((()=>[e.showSingle?(t(),l(b,{key:0,class:"single-button"},{default:n((()=>[h(N,{title:C(g)("全部"),type:"single",onClick:r,select:C(d)===C(g)("全部")},null,8,["title","select"])])),_:1})):o("",!0),h(b,{class:"button-group"},{default:n((()=>[(t(!0),a(_,null,x(e.list,((a,n)=>(t(),l(N,{type:0==n||n==e.list.length-1?"":"center",title:a[e.key],onClick:e=>(e=>{d.value=e[s.key],i("output",e[s.outPutKey])})(a),select:C(d)===a[e.key]},null,8,["type","title","onClick","select"])))),256))])),_:1})])),_:1})}}},[["__scopeId","data-v-7970de51"]]),B=e({__name:"index",props:{startDate:{type:String,default:""},endDate:{type:String,default:""}},emits:["startDateChange","endDateChange","update:startDate","update:endDate"],setup(e,{emit:a}){var i=b(""),s=b("");const d=e=>{i.value=e.detail.value,a("startDateChange",i.value),a("update:startDate",i.value)},r=e=>{s.value=e.detail.value,a("endDateChange",s.value),a("update:endDate",s.value)};return(e,a)=>{const o=c,u=I,b=D(w("uni-icons"),v);return t(),l(o,{class:"ti-date-picker"},{default:n((()=>[h(o,{class:"ti-date-separate"},{default:n((()=>[h(u,{mode:"date",value:C(i),onChange:d},{default:n((()=>[C(i)?(t(),l(o,{key:1,class:"ti-date-title-select"},{default:n((()=>[y(p(C(i)),1)])),_:1})):(t(),l(o,{key:0,class:"ti-date-title"},{default:n((()=>[y(p(e.$t("開始時間")),1)])),_:1}))])),_:1},8,["value"])])),_:1}),h(o,null,{default:n((()=>[y(p("-"))])),_:1}),h(o,{class:"ti-date-separate"},{default:n((()=>[h(u,{mode:"date",value:C(s),onChange:r},{default:n((()=>[C(s)?(t(),l(o,{key:1,class:"ti-date-title-select"},{default:n((()=>[y(p(C(s)),1)])),_:1})):(t(),l(o,{key:0,class:"ti-date-title"},{default:n((()=>[y(p(e.$t("結束時間")),1)])),_:1}))])),_:1},8,["value"])])),_:1}),h(b,{"custom-prefix":"iconfont",type:"icon-user",size:"16",color:"#100A05"})])),_:1})}}},[["__scopeId","data-v-b8c1da2f"]]);export{A as T,S as _,B as a,$ as b,K as c,T as d};
