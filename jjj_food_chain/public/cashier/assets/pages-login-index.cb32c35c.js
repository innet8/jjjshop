import{_ as a,H as e,a as l,M as s,c as t,o,f as u,g as r,h as i,i as d,t as n,u as c,W as f,X as p,Y as m,Z as _,B as v,j as g,a0 as h,r as w,s as x,$ as y,a1 as b,a2 as k,a3 as V,O as C,a4 as U,k as I,b as j,d as F}from"./index-28694bf1.js";import{_ as z}from"./uni-data-select.440758ae.js";const L=""+new URL("bg-93598f2d.png",import.meta.url).href,R=""+new URL("login_logo-83575c4a.svg",import.meta.url).href,B=a({__name:"set-language",setup(a){const h=e((()=>p[m()])),w=a=>{a&&a!==m()&&_(a)};return(a,e)=>{const p=l(t("uni-icons"),s),m=v,_=l(t("uni-data-select"),z),x=g;return o(),u(x,{class:"ti-language"},{default:r((()=>[i(p,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),i(m,{class:"ti-language-text"},{default:r((()=>[d(n(c(h)),1)])),_:1}),i(p,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),i(x,{class:"ti-language-select"},{default:r((()=>[i(_,{clear:!1,localdata:c(f)()||[],onChange:w},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-6b3feecf"]]),E=a({__name:"index",setup(a){const s=h(),f=w(!0),p=w(!1),m=w(!1),_=w({user_name:"",password:""}),v=e((()=>!_.value.user_name||!_.value.password)),z=w(!1),E=w({ip:"127.168.148.14",port:"8080"}),H=async()=>{if(!_.value.user_name)return x({title:y("請輸入賬號"),icon:"none"});if(!_.value.password)return x({title:y("输入登录密码"),icon:"none"});try{m.value=!0;const a=await b(_.value);a.data.token&&(k(a.data.token),s.setUserInfo(!0),V({url:"/pages/index/index"}))}catch(a){}finally{m.value=!1}},M=a=>{a&&(1==f.value&&(_.value.user_name+=a),1==p.value&&(_.value.password+=a))},O=a=>{f.value="username"===a,p.value="password"===a},P=()=>{1==f.value&&(_.value.user_name=""),1==p.value&&(_.value.password="")},W=()=>{E.value={ip:"",port:""}};return(a,e)=>{const s=C,h=g,w=U,x=l(t("ti-button"),I),b=l(t("ti-input"),j),k=l(t("ti-keyboard"),F);return o(),u(h,{class:"ti-login"},{default:r((()=>[i(h,{class:"ti-login-img"},{default:r((()=>[i(s,{src:L,mode:"widthFix"})])),_:1}),z.value?(o(),u(h,{key:0,class:"ti-serve-box"},{default:r((()=>[i(h,{class:"ti-serve-head"},{default:r((()=>[i(h,{class:"ti-serve-logo"},{default:r((()=>[i(s,{src:R,mode:"widthFix"})])),_:1}),i(h,{class:"ti-serve-title"},{default:r((()=>[d(n(c(y)("收银机")),1)])),_:1})])),_:1}),i(h,{class:"ti-serve-label"},{default:r((()=>[d(n(c(y)("服務器連接地址")),1)])),_:1}),i(h,{class:"ti-serve-input"},{default:r((()=>[i(h,{class:"ti-serve-ip"},{default:r((()=>[i(w,{modelValue:E.value.ip,"onUpdate:modelValue":e[0]||(e[0]=a=>E.value.ip=a),type:"text",placeholder:c(y)("请输入地址")},null,8,["modelValue","placeholder"])])),_:1}),i(h,{class:"ti-serve-colon"},{default:r((()=>[d(":")])),_:1}),i(h,{class:"ti-serve-port"},{default:r((()=>[i(w,{modelValue:E.value.port,"onUpdate:modelValue":e[1]||(e[1]=a=>E.value.port=a),type:"number",placeholder:c(y)("请输入端口")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),i(h,{class:"ti-serve-btn"},{default:r((()=>[i(x,{onClick:W},{default:r((()=>[d(n(c(y)("重置")),1)])),_:1}),i(x,{type:"primary"},{default:r((()=>[d(n(c(y)("確定")),1)])),_:1})])),_:1}),i(h,{class:"ti-form-link",onClick:e[2]||(e[2]=a=>z.value=!1)},{default:r((()=>[d(n(c(y)("去登录")),1)])),_:1})])),_:1})):(o(),u(h,{key:1,class:"ti-login-form"},{default:r((()=>[i(h,{class:"ti-form-box"},{default:r((()=>[i(h,{class:"ti-form-head"},{default:r((()=>[i(h,{class:"ti-login-logo"},{default:r((()=>[i(s,{src:R,mode:"widthFix"})])),_:1}),i(h,{class:"ti-login-title"},{default:r((()=>[d(n(c(y)("收银机")),1)])),_:1})])),_:1}),i(h,{class:"ti-form-username"},{default:r((()=>[i(b,{modelValue:_.value.user_name,"onUpdate:modelValue":e[3]||(e[3]=a=>_.value.user_name=a),prefixIcon:"icon-user",placeholder:c(y)("請輸入用戶名"),focus:f.value,onClick:e[4]||(e[4]=a=>O("username"))},null,8,["modelValue","placeholder","focus"])])),_:1}),i(h,{class:"ti-form-password"},{default:r((()=>[i(b,{modelValue:_.value.password,"onUpdate:modelValue":e[5]||(e[5]=a=>_.value.password=a),prefixIcon:"icon-lock",placeholder:c(y)("請輸入登錄密碼"),focus:p.value,password:!0,onClick:e[6]||(e[6]=a=>O("password"))},null,8,["modelValue","placeholder","focus"])])),_:1}),i(h,{class:"ti-form-btn"},{default:r((()=>[i(x,{type:"primary",loading:m.value,disabled:c(v),onClick:H},{default:r((()=>[d(n(c(y)("登錄")),1)])),_:1},8,["loading","disabled"])])),_:1}),i(h,{class:"ti-form-link",onClick:e[7]||(e[7]=a=>z.value=!0)},{default:r((()=>[d(n(c(y)("更换服务器")),1)])),_:1})])),_:1}),i(h,{class:"ti-form-keyboard"},{default:r((()=>[i(k,{isExit:!1,isPrimary:!1,onInput:M,onClear:P})])),_:1})])),_:1})),i(h,{class:"ti-language-box"},{default:r((()=>[i(B)])),_:1})])),_:1})}}},[["__scopeId","data-v-8f0e8a1a"]]);export{E as default};
