var a=Object.defineProperty,e=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(e,s,t)=>s in e?a(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t;import{_ as o,j as r,Q as n,k as i,l as u,b as d,c,w as f,i as p,d as m,x as v,y as _,z as b,$ as y,A as g,H as w,R as x,I as h,r as j,J as k,L as I,M as O,O as P,N as V,P as C}from"./index-709ff458.js";import{_ as E,a as F,S}from"./set-language.2fa1bdf0.js";import"./ti-select.4539b545.js";const U=o({__name:"index",setup(a){const o=r(),{userInfo:U}=n(o),z=i(!1),A=i({user_name:"",password:""}),H=u((()=>!A.value.password)),J=()=>{return a=this,r=null,n=function*(){var a;const r=((a,o)=>{for(var r in o||(o={}))s.call(o,r)&&l(a,r,o[r]);if(e)for(var r of e(o))t.call(o,r)&&l(a,r,o[r]);return a})({},A.value);if(!r.password)return g({title:y("输入登录密码"),icon:"none"});r.user_name=null==(a=U.value)?void 0:a.account;try{z.value=!0;const a=yield w(r);a.data.token&&(x(),h(a.data.token),o.getUserInfo(!0),j({url:"/pages/index/index"}))}catch(n){}finally{z.value=!1}},new Promise(((e,s)=>{var t=a=>{try{o(n.next(a))}catch(e){s(e)}},l=a=>{try{o(n.throw(a))}catch(e){s(e)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,l);o((n=n.apply(a,r)).next())}));var a,r,n},L=a=>{A.value.password+=a},M=()=>{A.value.password=""};return(a,e)=>{const s=k,t=p,l=I(O("ti-input"),P),o=I(O("ti-button"),V),r=I(O("ti-keyboard"),C);return d(),c(t,{class:"ti-login"},{default:f((()=>[m(t,{class:"ti-login-img"},{default:f((()=>[m(s,{src:E,mode:"widthFix"})])),_:1}),m(t,{class:"ti-login-box"},{default:f((()=>[m(t,{class:"ti-login-form"},{default:f((()=>[m(t,{class:"ti-form-box"},{default:f((()=>[m(t,{class:"ti-form-head"},{default:f((()=>[m(t,{class:"ti-login-logo"},{default:f((()=>[m(s,{src:F,mode:"widthFix"})])),_:1}),m(t,{class:"ti-login-title"},{default:f((()=>[v(_(b(y)("系统已锁定，请输入登录密码解锁")),1)])),_:1})])),_:1}),m(t,{class:"ti-form-username"},{default:f((()=>{var a;return[v(_(b(y)("当前用户："))+_(null==(a=b(U))?void 0:a.account),1)]})),_:1}),m(t,{class:"ti-form-password"},{default:f((()=>[m(l,{modelValue:A.value.password,"onUpdate:modelValue":e[0]||(e[0]=a=>A.value.password=a),prefixIcon:"icon-lock",placeholder:b(y)("請輸入登錄密碼"),focus:!0,password:!0},null,8,["modelValue","placeholder"])])),_:1}),m(t,{class:"ti-form-btn"},{default:f((()=>[m(o,{type:"primary",loading:z.value,disabled:b(H),onClick:J},{default:f((()=>[v(_(b(y)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1}),m(t,{class:"ti-form-keyboard"},{default:f((()=>[m(r,{isExit:!1,isPrimary:!1,onInput:L,onClear:M})])),_:1})])),_:1})])),_:1}),m(t,{class:"ti-language-box"},{default:f((()=>[m(S)])),_:1})])),_:1})}}},[["__scopeId","data-v-41128401"]]);export{U as default};
