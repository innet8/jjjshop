import{a9 as e,_ as t,a,N as n,c as i,o as l,f as u,g as r,h as s,i as o,t as c,D as d,q as p,n as g,F as h,p as f,C as m,M as _,aa as x,k as v,r as y,T as b,w as I,R as k,S as P,$ as S,j as C,U as w,V as T,u as z,ab as N,a7 as V,l as $,W as R}from"./index-3bbd2984.js";import{_ as U}from"./uni-data-select.16868b49.js";import{T as j,a as A,_ as D,b as L,c as M}from"./index.c18555a7.js";const q={en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next","uni-pagination.piecePerPage":"piece/page"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"prxima","uni-pagination.piecePerPage":"Art��culo/P��gina"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante","uni-pagination.piecePerPage":"Articles/Pages"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页","uni-pagination.piecePerPage":"条/页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁","uni-pagination.piecePerPage":"條/頁"}},{t:B}=e(q);const E=t({name:"UniPagination",emits:["update:modelValue","input","change","pageSizeChange"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},piecePerPageText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},showPageSize:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7},pageSizeRange:{type:Array,default:()=>[20,50,100,500]}},data:()=>({pageSizeIndex:0,currentIndex:1,paperData:[],pickerShow:!1}),computed:{piecePerPage(){return this.piecePerPageText||B("uni-pagination.piecePerPage")},prevPageText(){return this.prevText||B("uni-pagination.prevText")},nextPageText(){return this.nextText||B("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),a=Number(this.pageSize);return t&&a&&(e=Math.ceil(t/a)),e},paper(){const e=this.currentIndex,t=this.pagerCount,a=this.total,n=this.pageSize;let i=[],l=[],u=Math.ceil(a/n);for(let s=0;s<u;s++)i.push(s+1);l.push(1);const r=i[i.length-(t+1)/2];return i.forEach(((a,n)=>{(t+1)/2>=e?a<t+1&&a>1&&l.push(a):e+2<=r?a>e-(t+1)/2&&a<e+(t+1)/2&&l.push(a):(a>e-(t+1)/2||u-t<a)&&a<i[i.length-1]&&l.push(a)})),u>t?((t+1)/2>=e?l[l.length-1]="...":e+2<=r?(l[1]="...",l[l.length-1]="..."):l[1]="...",l.push(i[i.length-1])):(t+1)/2>=e||e+2<=r||(l.shift(),l.push(i[i.length-1])),l}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}},pageSizeIndex(e){this.$emit("pageSizeChange",this.pageSizeRange[e])}},methods:{pickerChange(e){this.pageSizeIndex=e.detail.value,this.pickerClick()},pickerClick(){const e=document.querySelector("body");if(!e)return;const t="uni-pagination-picker-show";this.pickerShow=!this.pickerShow,this.pickerShow?e.classList.add(t):setTimeout((()=>e.classList.remove(t)),300)},selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}},[["render",function(e,t,y,b,I,k){const P=m,S=a(i("uni-icons"),n),C=_,w=x,T=v;return l(),u(T,{class:"uni-pagination"},{default:r((()=>[!0===y.showPageSize||"true"===y.showPageSize?(l(),u(w,{key:0,class:"select-picker",mode:"selector",value:I.pageSizeIndex,range:y.pageSizeRange,onChange:k.pickerChange,onCancel:k.pickerClick,onClick:k.pickerClick},{default:r((()=>[s(C,{type:"default",size:"mini",plain:!0},{default:r((()=>[s(P,null,{default:r((()=>[o(c(y.pageSizeRange[I.pageSizeIndex])+" "+c(k.piecePerPage),1)])),_:1}),s(S,{class:"select-picker-icon",type:"arrowdown",size:"12",color:"#999"})])),_:1})])),_:1},8,["value","range","onChange","onCancel","onClick"])):d("",!0),s(T,{class:"uni-pagination__total is-phone-hide"},{default:r((()=>[o("共 "+c(y.total)+" 条",1)])),_:1}),s(T,{class:p(["uni-pagination__btn",1===I.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===I.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:k.clickLeft},{default:r((()=>[!0===y.showIcon||"true"===y.showIcon?(l(),u(S,{key:0,color:"#666",size:"16",type:"left"})):(l(),u(P,{key:1,class:"uni-pagination__child-btn"},{default:r((()=>[o(c(k.prevPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"]),s(T,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:r((()=>[s(T,{class:"uni-pagination__num-current"},{default:r((()=>[s(P,{class:"uni-pagination__num-current-text is-pc-hide current-index-text"},{default:r((()=>[o(c(I.currentIndex),1)])),_:1}),s(P,{class:"uni-pagination__num-current-text is-pc-hide"},{default:r((()=>[o("/"+c(k.maxPage||0),1)])),_:1}),(l(!0),g(h,null,f(k.paper,((e,t)=>(l(),u(T,{key:t,class:p([{"page--active":e===I.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:a=>k.selectPage(e,t)},{default:r((()=>[s(P,null,{default:r((()=>[o(c(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),s(T,{class:p(["uni-pagination__btn",I.currentIndex>=k.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":I.currentIndex===k.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:k.clickRight},{default:r((()=>[!0===y.showIcon||"true"===y.showIcon?(l(),u(S,{key:0,color:"#666",size:"16",type:"right"})):(l(),u(P,{key:1,class:"uni-pagination__child-btn"},{default:r((()=>[o(c(k.nextPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"])])),_:1})}],["__scopeId","data-v-7a02a0a9"]]),H=t({__name:"order-type-menu",props:{list:{type:Array,default:()=>[]},menuId:{type:Number,default:null}},emits:["update:menuId"],setup(e,{emit:t}){const a=e,n=y(0),i=y(0),_=y([]),x=b().in(this);I((()=>a.list),(async e=>{if(e&&0!=e.length&&(await k(),e.map(((e,t)=>{x.select(`#scroll-item-${t}`).boundingClientRect((e=>{if(!e)return;const a=_.value;a[t]=e.width+10,_.value=a})).exec()})),a.menuId>0)){const e=a.list.findIndex((e=>e.category_id==a.menuId));e>-1&&S(e)}}),{deep:!0,immediate:!0});const S=e=>{i.value=e,n.value=_.value.slice(0,e+1).reduce(((e,t)=>e+t),0)-(_.value[e]+100),t("update:menuId",a.list[e].category_id)};return(e,t)=>{const _=m,x=v,y=P;return l(),u(y,{class:"ti-order-menu","scroll-left":n.value,"scroll-x":"","enable-flex":"","scroll-with-animation":""},{default:r((()=>[s(x,{class:"ti-menu-content"},{default:r((()=>[(l(!0),g(h,null,f(a.list,((e,t)=>(l(),u(x,{key:t,class:p(["ti-menu-item",{active:t==i.value}]),id:`scroll-item-${t}`,onClick:e=>S(t)},{default:r((()=>[s(x,{style:{display:"flex","flex-direction":"row","align-items":"center"}},{default:r((()=>[s(_,{class:"ti-menu-title"},{default:r((()=>[o(c(e.name_text),1)])),_:2},1024),e.number?(l(),u(x,{key:0,class:"ti-menu-bedge"},{default:r((()=>[o(c(e.number),1)])),_:2},1024)):d("",!0)])),_:2},1024)])),_:2},1032,["id","class","onClick"])))),128))])),_:1})])),_:1},8,["scroll-left"])}}},[["__scopeId","data-v-78c1659f"]]);const F=t({__name:"index",setup(e){const t=y(0),n=y({eat_type:10,time_type:1,time:null,dataType:0,search:null,order_type:0,page:1,list_rows:6,search:null}),d=y([{name_text:C("全部"),number:0},{name_text:C("待付款"),number:2},{name_text:C("已取消"),number:10},{name_text:C("已完成"),number:99}]),p=y([{name:C("今天"),value:"1"},{name:C("昨天"),value:"2"},{name:C("一週"),value:"3"},{name:C("全部"),value:"0"}]),m=y([{value:20,text:C("桌台订单")},{value:10,text:C("收银订单")}]),_=y([]);var x=y("");const b=e=>{n.value.time_type=e,B()},I=e=>{n.value.eat_type=e||0},k=e=>{},P=e=>{},q=e=>{B()},B=async()=>{const e={...n.value};try{const a=await function(e){return S("order.order/index",e)}(e);_.value=a.data.list.data,t.value=a.data.list.total}catch(a){}};return w((()=>{T()})),(e,y)=>{const S=v,w=V,T=a(i("uni-data-select"),U),F=a(i("ti-button"),$),O=a(i("uni-td"),D),W=a(i("uni-tr"),L),G=a(i("uni-table"),M),J=a(i("uni-pagination"),E),K=R("ti-layout");return l(),u(K,null,{default:r((()=>[s(S,{class:"ti-order-container"},{default:r((()=>[s(H,{list:d.value,"onUpdate:list":y[0]||(y[0]=e=>d.value=e)},null,8,["list"]),s(S,{class:"ti-order-container-option"},{default:r((()=>[s(j,{list:p.value,"onUpdate:list":y[1]||(y[1]=e=>p.value=e),onOutput:b},null,8,["list"]),s(S,{class:"date-picker"},{default:r((()=>[s(A,{onStartDateChange:k,onEndDateChange:P})])),_:1}),s(S,{class:"date-order-input"},{default:r((()=>[s(w,{modelValue:n.value.search,"onUpdate:modelValue":y[2]||(y[2]=e=>n.value.search=e),style:{"font-size":"14px"},placeholder:z(C)("請輸入訂單號")},null,8,["modelValue","placeholder"])])),_:1}),s(S,{class:"date-select-type"},{default:r((()=>[s(T,{modelValue:z(x),"onUpdate:modelValue":y[3]||(y[3]=e=>N(x)?x.value=e:x=e),localdata:m.value,placeholder:z(C)("所有類型"),onChange:I,clear:!0},null,8,["modelValue","localdata","placeholder"])])),_:1}),s(S,{class:"date-search-confirm"},{default:r((()=>[s(F,{class:"date-search-confirm-button",type:"primary",onClick:B},{default:r((()=>[o(c(z(C)("查询")),1)])),_:1})])),_:1})])),_:1}),s(G,{ref:"table",loading:e.loading,border:"",stripe:"",emptyText:z(C)("暂无更多数据"),onSelectionChange:e.selectionChange},{default:r((()=>[s(W,null,{default:r((()=>[s(O,{width:"130",align:"left"},{default:r((()=>[o(c(z(C)("訂單類型")),1)])),_:1}),s(O,{width:"120",align:"left"},{default:r((()=>[o(c(z(C)("桌號/序號")),1)])),_:1}),s(O,{width:"160",align:"left"},{default:r((()=>[o(c(z(C)("訂單號")),1)])),_:1}),s(O,{width:"100",align:"left"},{default:r((()=>[o(c(z(C)("狀態")),1)])),_:1}),s(O,{width:"100",align:"left"},{default:r((()=>[o(c(z(C)("支付時間")),1)])),_:1}),s(O,{width:"140",align:"left"},{default:r((()=>[o(c(z(C)("訂單金額")),1)])),_:1}),s(O,{width:"140",align:"left"},{default:r((()=>[o(c(z(C)("實付金額")),1)])),_:1}),s(O,{width:"150",align:"left"},{default:r((()=>[o(c(z(C)("支付方式")),1)])),_:1}),s(O,{width:"280",align:"left"},{default:r((()=>[o(c(""))])),_:1})])),_:1}),(l(!0),g(h,null,f(_.value,((e,t)=>(l(),u(W,{key:t},{default:r((()=>[s(O,{align:"left"},{default:r((()=>[s(S,{class:"order-table-cell"},{default:r((()=>[o(c(20==e.eat_type?z(C)("桌台订单"):z(C)("收银订单")),1)])),_:2},1024)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(e.order_id||e.table_no),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(e.order_no),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(e.order_status.text),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(e.pay_time_text),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(`¥ ${e.order_price}`),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(`¥ ${e.pay_price}`),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[o(c(e.pay_status.text),1)])),_:2},1024),s(O,{align:"left"},{default:r((()=>[s(S,{class:"edit-buttons"},{default:r((()=>[s(F,{class:"function-buttons",type:"primary"},{default:r((()=>[o(c(z(C)("詳情")),1)])),_:1}),s(F,{class:"function-buttons margin",type:"primary"},{default:r((()=>[o(c(z(C)("打印小票")),1)])),_:1}),s(F,{class:"function-buttons margin",type:"danger"},{default:r((()=>[o(c(z(C)("退款")),1)])),_:1})])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1},8,["loading","emptyText","onSelectionChange"]),s(S,{class:"page-control"},{default:r((()=>[s(J,{"prev-text":z(C)("上一页"),"next-text":z(C)("下一页"),modelValue:n.value.page,"onUpdate:modelValue":y[4]||(y[4]=e=>n.value.page=e),title:"标题文字","page-size":"6",total:t.value,onChange:q},null,8,["prev-text","next-text","modelValue","total"])])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-7f63ba00"]]);export{F as default};
