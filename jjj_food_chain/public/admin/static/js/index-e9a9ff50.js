import{f as e,a,b as i,c as s,m as l,d as o}from"./element-plus-7e8fc928.js";import{r}from"./request-d5dcf4f6.js";import{_ as m}from"./index-64eb7629.js";import{c as p,O as d,R as t,o as n,a as c,V as _,P as u,X as f}from"./@vue-de0ab9c3.js";import"./lodash-es-493ac664.js";import"./@vueuse-588ef066.js";import"./dayjs-3f6c138b.js";import"./call-bind-a6dd5c06.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@element-plus-9e5c8f38.js";import"./@popperjs-b78c3215.js";import"./escape-html-d3e23fdb.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./axios-63583d02.js";import"./qs-edfbe083.js";import"./side-channel-6da5de8a.js";import"./object-inspect-66d569d0.js";import"./vue-router-071bc8f6.js";import"./pinia-ad4762e9.js";let h={serviceDetail:(e,a)=>r._get("/admin/setting.service/index",e,a),editService:(e,a)=>r._post("/admin/setting.service/index",e,a)};const g={data:()=>({loading:!1,form:{shop_name:"",shop_bg_img:"",shop_logo_img:"",cashier_name:"",cashier_bg_img:"",weixin_service:{is_open:0,app_id:"",mch_id:"",apikey:"",cert_pem:"",key_pem:""}}}),created(){this.getParams()},methods:{getParams(){let e=this;h.serviceDetail({},!0).then((a=>{e.form.shop_name=a.data.vars.values.shop_name,e.form.shop_bg_img=a.data.vars.values.shop_bg_img,e.form.shop_logo_img=a.data.vars.values.shop_logo_img,e.form.cashier_name=a.data.vars.values.cashier_name,e.form.cashier_bg_img=a.data.vars.values.cashier_bg_img,a.data.vars.values.weixin_service&&(e.form.weixin_service=a.data.vars.values.weixin_service,e.form.weixin_service.is_open=parseInt(e.form.weixin_service.is_open)),e.loading=!1})).catch((a=>{e.loading=!1}))},onSubmit(){let a=this,i=this.form;a.$refs.form.validate((s=>{s&&(a.loading=!0,h.editService(i,!0).then((i=>{a.loading=!1,e({message:"恭喜你，设置成功",type:"success"}),a.$router.push("/setting/Index")})).catch((e=>{a.loading=!1})))}))}}},v={class:"product-add"},x=c("div",{class:"common-form"},"商城后台设置",-1),w=c("div",{class:"tips"}," shop端商城名称，显示在登录页 ",-1),V=c("div",{class:"tips"}," shop端商城登录背景，不填则为系统默认登录背景，填写网络地址 ",-1),b=c("div",{class:"tips"}," shop端商城登录logo，不填则为系统默认登录logo，填写网络地址 ",-1),j=c("div",{class:"tips"}," 收银台名称，显示在登录页 ",-1),y=c("div",{class:"tips"}," 收银台登录背景，不填则为系统默认登录背景，填写网络地址 ",-1),k=c("div",{class:"common-form"},"微信服务商支付设置",-1),U=c("div",{class:"tips"}," 填写服务商户号、10位数字 ",-1),q=c("div",{class:"tips"}," 填写服务商户支付秘钥apikey ",-1),S=c("div",{class:"tips"}," 填写服务商户号绑定的公众号appid ",-1),C=c("div",{class:"tips"},"使用文本编辑器打开apiclient_key.pem文件，将文件的全部内容复制进来",-1),P=c("div",{class:"tips"},"使用文本编辑器打开apiclient_key.pem文件，将文件的全部内容复制进来",-1),D={class:"button-wrapper"};const I=m(g,[["render",function(e,r,m,h,g,I){const $=i,z=s,O=l,R=o,X=a;return n(),p("div",v,[d(X,{ref:"form",model:g.form,"label-width":"150px"},{default:t((()=>[x,d(z,{label:"商城系统名称",rules:[{required:!0,message:" "}],prop:"shop_name"},{default:t((()=>[d($,{modelValue:g.form.shop_name,"onUpdate:modelValue":r[0]||(r[0]=e=>g.form.shop_name=e),placeholder:"商城名称",class:"max-w460"},null,8,["modelValue"]),w])),_:1}),d(z,{label:"商城登录背景",prop:"shop_bg_img"},{default:t((()=>[d($,{modelValue:g.form.shop_bg_img,"onUpdate:modelValue":r[1]||(r[1]=e=>g.form.shop_bg_img=e),placeholder:"商城登录背景",class:"max-w460"},null,8,["modelValue"]),V])),_:1}),d(z,{label:"商城登录logo",prop:"shop_logo_img"},{default:t((()=>[d($,{modelValue:g.form.shop_logo_img,"onUpdate:modelValue":r[2]||(r[2]=e=>g.form.shop_logo_img=e),placeholder:"商城登录logo",class:"max-w460"},null,8,["modelValue"]),b])),_:1}),d(z,{label:"收银台系统名称",rules:[{required:!0,message:" "}],prop:"cashier_name"},{default:t((()=>[d($,{modelValue:g.form.cashier_name,"onUpdate:modelValue":r[3]||(r[3]=e=>g.form.cashier_name=e),placeholder:"收银台名称",class:"max-w460"},null,8,["modelValue"]),j])),_:1}),d(z,{label:"收银台登录背景",prop:"cashier_bg_img"},{default:t((()=>[d($,{modelValue:g.form.cashier_bg_img,"onUpdate:modelValue":r[4]||(r[4]=e=>g.form.cashier_bg_img=e),placeholder:"收银台登录背景",class:"max-w460"},null,8,["modelValue"]),y])),_:1}),k,d(z,{label:"是否开启服务商支付"},{default:t((()=>[c("div",null,[d(O,{modelValue:g.form.weixin_service.is_open,"onUpdate:modelValue":r[5]||(r[5]=e=>g.form.weixin_service.is_open=e),label:1},{default:t((()=>[_("开启")])),_:1},8,["modelValue"]),d(O,{modelValue:g.form.weixin_service.is_open,"onUpdate:modelValue":r[6]||(r[6]=e=>g.form.weixin_service.is_open=e),label:0},{default:t((()=>[_("关闭")])),_:1},8,["modelValue"])])])),_:1}),1==g.form.weixin_service.is_open?(n(),p(u,{key:0},[d(z,{label:"服务商户号",rules:[{required:!0,message:" "}],prop:"weixin_service.mch_id"},{default:t((()=>[d($,{modelValue:g.form.weixin_service.mch_id,"onUpdate:modelValue":r[7]||(r[7]=e=>g.form.weixin_service.mch_id=e),placeholder:"服务商户号",class:"max-w460"},null,8,["modelValue"]),U])),_:1}),d(z,{label:"服务商支付秘钥apikey",rules:[{required:!0,message:" "}],prop:"weixin_service.apikey"},{default:t((()=>[d($,{modelValue:g.form.weixin_service.apikey,"onUpdate:modelValue":r[8]||(r[8]=e=>g.form.weixin_service.apikey=e),placeholder:"服务商支付秘钥apikey",class:"max-w460"},null,8,["modelValue"]),q])),_:1}),d(z,{label:"服务商appid",rules:[{required:!0,message:" "}],prop:"weixin_service.app_id"},{default:t((()=>[d($,{modelValue:g.form.weixin_service.app_id,"onUpdate:modelValue":r[9]||(r[9]=e=>g.form.weixin_service.app_id=e),placeholder:"服务商appid",class:"max-w460"},null,8,["modelValue"]),S])),_:1}),d(z,{label:"apiclient_cert.pem",rules:[{required:!0,message:" "}],prop:"weixin_service.cert_pem"},{default:t((()=>[d($,{type:"textarea",rows:4,placeholder:"使用文本编辑器打开apiclient_cert.pem文件，将文件的全部内容复制进来",modelValue:g.form.weixin_service.cert_pem,"onUpdate:modelValue":r[10]||(r[10]=e=>g.form.weixin_service.cert_pem=e),class:"max-w460"},null,8,["modelValue"]),C])),_:1}),d(z,{label:"apiclient_key.pem",rules:[{required:!0,message:" "}],prop:"weixin_service.key_pem"},{default:t((()=>[d($,{type:"textarea",rows:4,placeholder:"使用文本编辑器打开apiclient_cert.pem文件，将文件的全部内容复制进来",modelValue:g.form.weixin_service.key_pem,"onUpdate:modelValue":r[11]||(r[11]=e=>g.form.weixin_service.key_pem=e),class:"max-w460"},null,8,["modelValue"]),P])),_:1})],64)):f("",!0),c("div",D,[d(R,{type:"primary",onClick:I.onSubmit,loading:g.loading},{default:t((()=>[_("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"])])}]]);export{I as default};
