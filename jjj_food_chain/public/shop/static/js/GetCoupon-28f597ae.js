import{m as e,g as a,n as t,A as l,w as o,v as s}from"./element-plus-b30a858e.js";import{C as i}from"./coupon-fe6d6df4.js";import{_ as r}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as n,T as g,S as p,a as d,$ as u,P as m,c,X as h,W as b}from"./@vue-e5cdee21.js";const C={class:"product-content"},_={class:"table-wrap"},f={key:0},D={key:1},z={class:"pagination"};const y=r({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{name:""},tableData:[],formRules:{name:[{required:!0,message:"请输入等级名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}]},multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1}),props:["open_add"],created(){this.dialogVisible=this.open_add,this.getTableList()},methods:{handleCurrentChange(e){this.curPage=e,this.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this;i.couponList({},!0).then((a=>{1==a.code?(e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,e.gradeList=a.data.grade):e.$message.error("错了哦，这是一条错误消息")})).catch((e=>{}))},selectUser(e){let a=e;this.$emit("closeDialog",{type:"success",openDialog:!1,params:a})},dialogFormVisible(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},[["render",function(i,r,y,S,V,v){const w=e,L=a,k=t,j=l,x=o,P=s;return n(),g(x,{title:"选择优惠券",modelValue:V.dialogVisible,"onUpdate:modelValue":r[0]||(r[0]=e=>V.dialogVisible=e),onClose:v.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{default:p((()=>[d("div",C,[d("div",_,[u((n(),g(k,{data:V.tableData,border:"",style:{width:"100%"},onCurrentChange:v.handleCurrentChange},{default:p((()=>[m(w,{prop:"name",label:"名称"}),m(w,{prop:"min_price",label:"最低消费"}),m(w,{prop:"total_num",label:"数量"},{default:p((e=>[e.row.total_num>0?(n(),c("span",f,h(e.row.total_num),1)):(n(),c("span",D,"无限制"))])),_:1}),m(w,{label:"操作",width:"80"},{default:p((e=>[m(L,{type:"primary",size:"",onClick:a=>v.selectUser(e.row)},{default:p((()=>[b("选择")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onCurrentChange"])),[[P,V.loading]])]),d("div",z,[m(j,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,background:"","current-page":V.curPage,"page-sizes":[2,10,20,50,100],"page-size":V.pageSize,layout:"total, prev, pager, next, jumper",total:V.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{y as _};
