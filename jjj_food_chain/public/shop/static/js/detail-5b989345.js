import{E as a,P as s,O as e,m as l,o as t,p as d,q as r,h as i,g as p,e as o,w as n,i as u,v as c}from"./element-plus-bf694ad1.js";import{P as m}from"./points-8f5d4734.js";import{_}from"./_plugin-vue_export-helper-1b428a4d.js";import{an as v,_ as y,o as f,c as b,a as g,O as x,R as h,V as j,W as k,X as w,P as V,a7 as z,S as P}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./index-261cea28.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const C={components:{},data:()=>({active:0,loading:!0,detail:{pay_status:[],pay_type:[],delivery_type:[],user:{},address:[],product:[],order_status:[],store:[],express:[],delivery_status:[]},open_add:!1,pageSize:20,totalDataNumber:0,curPage:1,form:{express_id:null,express_no:""},extract_form:{order:{extract_status:1}},order:{},delivery_type:0,create_time:"",expressList:[]}),created(){this.getParams()},methods:{next(){this.active++>4&&(this.active=0)},getParams(){let a=this;const s=this.$route.query.order_id;m.orderdetail({order_id:s},!0).then((s=>{a.loading=!1,a.detail=s.data.detail,a.expressList=s.data.expressList})).catch((s=>{a.loading=!1}))},onSubmit(){let s=this,e=s.form;if(null==e.express_id)return void a.error("请选择物流公司");if(""==e.express_no)return void a.error("请填写物流单号");let l=this.$route.query.order_id;m.delivery({param:e,order_id:l},!0).then((a=>{s.loading=!1,this.$ElMessage({message:"恭喜你，发货成功",type:"success"}),s.getParams()})).catch((a=>{s.loading=!1}))},onExtract(a){let s=this;s.extract_form;let e=a;m.extract({order_id:e},!0).then((a=>{s.loading=!1,this.$ElMessage({message:$t("操作成功"),type:"success"}),s.getParams()})).catch((a=>{s.loading=!1}))},cancelFunc(){this.$router.back(-1)}}},$={class:"pb50"},q={class:"product-content"},E=g("div",{class:"common-form"},"基本信息",-1),L={class:"table-wrap"},O={class:"pb16"},S=g("span",{class:"gray9"},"订单号：",-1),D={class:"pb16"},I=g("span",{class:"gray9"},"买家：",-1),U={class:"pb16"},F=g("span",{class:"gray9"},"兑换金额 (元)：",-1),M={class:"pb16"},N=g("span",{class:"gray9"},"运费金额 (元)：",-1),B={class:"pb16"},G=g("span",{class:"gray9"},"实付款金额 (元)：",-1),J={class:"pb16"},R=g("span",{class:"gray9"},"兑换积分：",-1),W={class:"pb16"},X=g("span",{class:"gray9"},"支付方式：",-1),A={class:"pb16"},H=g("span",{class:"gray9"},"配送方式：",-1),K={class:"pb16"},Q=g("span",{class:"gray9"},"交易状态：",-1),T=g("div",{class:"common-form mt16"},"商品信息",-1),Y={class:"table-wrap"},Z={class:"product-info"},aa={class:"pic"},sa={class:"info"},ea={class:"name"},la={key:0},ta=g("div",{class:"common-form mt16"},"收货信息",-1),da={class:"table-wrap"},ra={class:"pb16"},ia=g("span",{class:"gray9"},"收货人：",-1),pa={class:"pb16"},oa=g("span",{class:"gray9"},"收货电话：",-1),na={class:"pb16"},ua=g("span",{class:"gray9"},"收货地址：",-1),ca=g("div",{class:"common-form mt16"},"自提信息",-1),ma={class:"table-wrap"},_a={class:"pb16"},va=g("span",{class:"gray9"},"门店ID：",-1),ya={class:"pb16"},fa=g("span",{class:"gray9"},"门店名称：",-1),ba={class:"pb16"},ga=g("span",{class:"gray9"},"联系人：",-1),xa={class:"pb16"},ha=g("span",{class:"gray9"},"联系电话：",-1),ja={class:"pb16"},ka=g("span",{class:"gray9"},"门店地址：",-1),wa={key:2,class:"table-wrap"},Va=g("div",{class:"common-form mt16"},"付款信息",-1),za={class:"table-wrap"},Pa={class:"pb16"},Ca=g("span",{class:"gray9"},"应付款金额：",-1),$a={class:"pb16"},qa=g("span",{class:"gray9"},"应付积分：",-1),Ea={class:"pb16"},La=g("span",{class:"gray9"},"支付方式：",-1),Oa={class:"pb16"},Sa=g("span",{class:"gray9"},"支付流水号：",-1),Da={class:"pb16"},Ia=g("span",{class:"gray9"},"付款状态：",-1),Ua={class:"pb16"},Fa=g("span",{class:"gray9"},"付款时间：",-1),Ma={key:3},Na={key:0},Ba=g("div",{class:"common-form mt16"},"去发货",-1),Ga={key:1},Ja=g("div",{class:"common-form mt16"},"发货信息",-1),Ra={class:"table-wrap"},Wa={class:"pb16"},Xa=g("span",{class:"gray9"},"物流公司：",-1),Aa={class:"pb16"},Ha=g("span",{class:"gray9"},"物流单号：",-1),Ka={class:"pb16"},Qa=g("span",{class:"gray9"},"发货状态：",-1),Ta={class:"pb16"},Ya=g("span",{class:"gray9"},"发货时间：",-1),Za={key:4},as=g("div",{class:"common-form mt16"},"门店自提核销",-1),ss={key:0},es={key:1,class:"table-wrap"},ls={class:"pb16"},ts=g("span",{class:"gray9"},"自提门店名称：",-1),ds={class:"pb16"},rs=g("span",{class:"gray9"},"自提门店电话：",-1),is={class:"pb16"},ps=g("span",{class:"gray9"},"核销状态：",-1),os={class:"pb16"},ns=g("span",{class:"gray9"},"核销时间：",-1),us={class:"common-button-wrapper"};const cs=_(C,[["render",function(a,m,_,C,cs,ms){const _s=s,vs=e,ys=l,fs=t,bs=d,gs=r,xs=i,hs=p,js=o,ks=n,ws=u,Vs=v("img-url"),zs=v("auth"),Ps=c;return y((f(),b("div",$,[g("div",q,[E,g("div",L,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",O,[S,j(" "+k(cs.detail.order_no),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",D,[I,j(" "+k(cs.detail.user.nickName)+" ",1),g("span",null,"用户ID：("+k(cs.detail.user.user_id)+")",1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",U,[F,j(" "+k(cs.detail.order_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",M,[N,j(" "+k(cs.detail.express_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",B,[G,j(" "+k(cs.detail.pay_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",J,[R,j(" "+k(cs.detail.points_num),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",W,[X,j(" "+k(cs.detail.pay_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",A,[H,j(" "+k(cs.detail.delivery_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",K,[Q,j(" "+k(cs.detail.order_status.text),1)])])),_:1})])),_:1})]),T,g("div",Y,[x(fs,{size:"small",data:cs.detail.product,border:"",style:{width:"100%"}},{default:h((()=>[x(ys,{prop:"product_name",label:"商品"},{default:h((a=>[g("div",Z,[g("div",aa,[y(g("img",null,null,512),[[Vs,a.row.file_path]])]),g("div",sa,[g("div",ea,k(a.row.product_name),1)])])])),_:1}),x(ys,{prop:"product_price",label:"金额(元)"}),x(ys,{prop:"product_points",label:"积分"}),x(ys,{prop:"total_num",label:"兑换数量"},{default:h((a=>[g("p",null,"x "+k(a.row.total_num),1)])),_:1}),x(ys,{prop:"total_price",label:"商品总价"},{default:h((a=>[g("p",null,"金额：￥ "+k(a.row.total_price),1),g("p",null,"积分: "+k(a.row.points_num),1)])),_:1})])),_:1},8,["data"])]),10==cs.detail.delivery_type.value?(f(),b("div",la,[ta,g("div",da,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",ra,[ia,j(" "+k(cs.detail.address.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",pa,[oa,j(" "+k(cs.detail.address.phone),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",na,[ua,j(" "+k(cs.detail.address.detail),1)])])),_:1})])),_:1})])])):w("",!0),20==cs.detail.delivery_type.value?(f(),b(V,{key:1},[ca,g("div",ma,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",_a,[va,j(" "+k(cs.detail.store.shop_supplier_id),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ya,[fa,j(" "+k(cs.detail.store.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ba,[ga,j(" "+k(cs.detail.store.link_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",xa,[ha,j(" "+k(cs.detail.store.link_phone),1)])])),_:1}),x(_s,{span:15},{default:h((()=>[g("div",ja,[ka,j(" "+k(cs.detail.store.address),1)])])),_:1})])),_:1})])],64)):w("",!0),20==cs.detail.pay_status.value?(f(),b("div",wa,[Va,g("div",za,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",Pa,[Ca,j(" "+k(cs.detail.pay_price),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",$a,[qa,j(" "+k(cs.detail.points_num),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ea,[La,j(" "+k(cs.detail.pay_type.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Oa,[Sa,j(" "+k(cs.detail.transaction_id),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Da,[Ia,j(" "+k(cs.detail.pay_status.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ua,[Fa,j(" "+k(cs.detail.pay_time),1)])])),_:1})])),_:1})])])):w("",!0),20==cs.detail.pay_status.value&&10==cs.detail.delivery_type.value&&-1===[20,21].indexOf(cs.detail.order_status.value)?y((f(),b("div",Ma,[10==cs.detail.delivery_status.value?(f(),b("div",Na,[Ba,x(js,{size:"small",ref:"form",model:cs.form,"label-position":"top","label-width":"100px"},{default:h((()=>[x(xs,{label:"物流公司"},{default:h((()=>[x(gs,{modelValue:cs.form.express_id,"onUpdate:modelValue":m[0]||(m[0]=a=>cs.form.express_id=a),placeholder:"请选择快递公司"},{default:h((()=>[(f(!0),b(V,null,z(cs.expressList,((a,s)=>(f(),P(bs,{label:a.express_name,key:s,value:a.express_id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),x(xs,{label:"物流单号"},{default:h((()=>[x(hs,{modelValue:cs.form.express_no,"onUpdate:modelValue":m[1]||(m[1]=a=>cs.form.express_no=a),class:"max-w460"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])):(f(),b("div",Ga,[Ja,g("div",Ra,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",Wa,[Xa,j(" "+k(cs.detail.express.express_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Aa,[Ha,j(" "+k(cs.detail.express_no),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ka,[Qa,j(" "+k(cs.detail.delivery_status.text),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",Ta,[Ya,j(" "+k(cs.detail.delivery_time),1)])])),_:1})])),_:1})])]))])),[[zs,"/plus/points/order/delivery"]]):w("",!0),20==cs.detail.delivery_type.value&&20==cs.detail.pay_status.value&&21!=cs.detail.order_status.value&&20!=cs.detail.order_status.value?y((f(),b("div",Za,[as,10==cs.detail.delivery_status.value?(f(),b("div",ss,[x(js,{size:"small",ref:"extract_form",model:cs.extract_form,"label-width":"100px"},{default:h((()=>[x(xs,{label:"买家取货状态 "},{default:h((()=>[x(ks,{modelValue:cs.extract_form.order.extract_status,"onUpdate:modelValue":m[2]||(m[2]=a=>cs.extract_form.order.extract_status=a),label:1},{default:h((()=>[j("已取货")])),_:1},8,["modelValue"])])),_:1}),x(xs,null,{default:h((()=>[x(ws,{type:"primary",onClick:m[3]||(m[3]=a=>ms.onExtract(cs.detail.order_id))},{default:h((()=>[j("确认核销")])),_:1})])),_:1})])),_:1},8,["model"])])):(f(),b("div",es,[g("template",null,[x(vs,null,{default:h((()=>[x(_s,{span:5},{default:h((()=>[g("div",ls,[ts,j(" "+k(cs.detail.store.name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",ds,[rs,j(" "+k(cs.detail.store.link_name),1)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",is,[ps,20==cs.detail.delivery_status.value?(f(),b(V,{key:0},[j(" 已核销 ")],64)):w("",!0)])])),_:1}),x(_s,{span:5},{default:h((()=>[g("div",os,[ns,j(" "+k(cs.detail.delivery_time),1)])])),_:1})])),_:1})])]))])),[[zs,"/plus/points/order/extract"]]):w("",!0)]),g("div",us,[x(ws,{size:"small",onClick:ms.cancelFunc},{default:h((()=>[j("返回上一页")])),_:1},8,["onClick"]),20==cs.detail.pay_status.value&&10==cs.detail.delivery_type.value&&-1===[20,21].indexOf(cs.detail.order_status.value)?(f(),b(V,{key:0},[10==cs.detail.delivery_status.value?(f(),P(ws,{key:0,size:"small",type:"primary",onClick:ms.onSubmit},{default:h((()=>[j("确认发货 ")])),_:1},8,["onClick"])):w("",!0)],64)):w("",!0)])])),[[Ps,cs.loading]])}]]);export{cs as default};
