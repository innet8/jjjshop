import{k as e,E as i,e as l,c as s,d as t,b as a,l as o,m as r,n as p,v as n}from"./element-plus-7d357588.js";import{S as c}from"./supplier-bc0f092e.js";import d from"./Qrcode-241f1044.js";import{_ as u}from"./index-f792122d.js";import{ag as m,ap as h,o as _,c as g,a as b,$ as C,T as y,S as f,W as k,Y as j,P as w,X as z}from"./@vue-48c55b54.js";import"./@vueuse-c556fb5a.js";import"./lodash-es-c1acaa3d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-e0f4a3e8.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-router-b8ff3004.js";import"./pinia-73166104.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./vue-ueditor-wrap-cd29f9a1.js";const v={class:"user clearfix"},x={class:"common-level-rail fl"},S={class:"common-seach-wrap fr"},q={class:"product-content"},T={class:"table-wrap"},L={class:"pagination"};const P=u({components:{Qrcode:d},data:()=>({loading:!0,tableData:[],storeList:[],pageSize:20,totalDataNumber:0,curPage:1,formInline:{shop_id:"",search:""},open_add:!1,open_edit:!1,userModel:{},isqrcode:!1,code_id:"",is_chain:""}),created(){this.getTableList()},methods:{handleCurrentChange(e){let i=this;i.curPage=e,i.loading=!0,i.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,i={};i.page=e.curPage,i.list_rows=e.pageSize,c.supplierList(i,!0).then((i=>{e.loading=!1,e.tableData=i.data.list.data,e.totalDataNumber=i.data.list.total,e.is_chain=i.data.is_chain})).catch((i=>{e.loading=!1}))},onSubmit(){this.curPage=1,this.getTableList()},addClick(){this.$router.push("/supplier/supplier/add")},qrcode(e){this.code_id=e.shop_supplier_id,this.isqrcode=!0},closeQrcode(){this.isqrcode=!1},editClick(e){let i=e.shop_supplier_id;this.$router.push({path:"/supplier/supplier/edit",query:{shop_supplier_id:i}})},settingClick(e){let i=e.shop_supplier_id;this.$router.push({path:"/supplier/supplier/setting",query:{shop_supplier_id:i}})},recycle(l,s){let t=this,a="";1==s?a="禁止":0==s&&(a="开启"),e.confirm("确认要"+a+"吗?","提示",{type:"warning"}).then((()=>{c.supplierRecycle({shop_supplier_id:l.shop_supplier_id,is_recycle:s}).then((e=>{i({message:a+"成功",type:"success"}),t.getTableList()}))}))},deleteClick(l){let s=this;e.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{s.loading=!0,c.deleteSupplier({shop_supplier_id:l},!0).then((e=>{s.loading=!1,1==e.code&&(i({message:"恭喜你，门店删除成功",type:"success"}),s.getTableList())})).catch((e=>{s.loading=!1}))})).catch((()=>{s.loading=!1}))}}},[["render",function(e,i,c,d,u,P){const D=l,I=s,Q=t,$=a,N=o,V=r,B=p,U=m("Qrcode"),E=h("auth"),M=n;return _(),g("div",v,[b("div",x,[1==u.is_chain?C((_(),y(D,{key:0,size:"small",type:"primary",icon:"Plus",onClick:P.addClick},{default:f((()=>[k("添加门店")])),_:1},8,["onClick"])),[[E,"/supplier/supplier/add"]]):j("",!0)]),C((_(),g("div",S,[w($,{size:"small",inline:!0,model:u.formInline,class:"demo-form-inline"},{default:f((()=>[w(Q,{label:""},{default:f((()=>[w(I,{modelValue:u.formInline.search,"onUpdate:modelValue":i[0]||(i[0]=e=>u.formInline.search=e),placeholder:"请输入门店名称"},null,8,["modelValue"])])),_:1}),w(Q,null,{default:f((()=>[w(D,{type:"primary",icon:"Search",onClick:P.onSubmit},{default:f((()=>[k("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),[[E,"/auth/shop"]]),b("div",q,[b("div",T,[C((_(),y(V,{size:"small",data:u.tableData,border:"",style:{width:"100%"}},{default:f((()=>[w(N,{prop:"shop_supplier_id",label:"门店ID",width:"120"}),w(N,{prop:"name",label:"门店名称"},{default:f((e=>[b("span",null,z(e.row.name),1)])),_:1}),w(N,{prop:"superUser.user_name",label:"登录账号"}),w(N,{prop:"link_name",label:"联系人",width:"120"}),w(N,{prop:"link_phone",label:"联系电话",width:"120"}),w(N,{prop:"address",label:"联系地址"}),w(N,{prop:"total_money",label:"总金额"}),w(N,{prop:"money",label:"可用余额"}),w(N,{prop:"cash_money",label:"已提现"}),w(N,{prop:"freeze_money",label:"提现中"}),w(N,{prop:"create_time",label:"添加时间",width:"150"}),w(N,{fixed:"right",label:"操作",width:"150"},{default:f((e=>[1==e.row.is_recycle?C((_(),y(D,{key:0,onClick:i=>P.recycle(e.row,0),type:"text",size:"small"},{default:f((()=>[k("开启")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/recycle"]]):C((_(),y(D,{key:1,onClick:i=>P.recycle(e.row,1),type:"text",size:"small"},{default:f((()=>[k("禁止")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/recycle"]]),C((_(),y(D,{onClick:i=>P.editClick(e.row),type:"text",size:"small"},{default:f((()=>[k("编辑")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/edit"]]),C((_(),y(D,{onClick:i=>P.qrcode(e.row),type:"text",size:"small"},{default:f((()=>[k("二维码")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/qrcode"]]),C((_(),y(D,{onClick:i=>P.settingClick(e.row),type:"text",size:"small"},{default:f((()=>[k("设置")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/setting"]]),0==e.row.is_main?C((_(),y(D,{key:2,onClick:i=>P.deleteClick(e.row.shop_supplier_id),type:"text",size:"small"},{default:f((()=>[k("删除")])),_:2},1032,["onClick"])),[[E,"/supplier/supplier/delete"]]):j("",!0)])),_:1})])),_:1},8,["data"])),[[M,u.loading]])]),b("div",L,[w(B,{onSizeChange:P.handleSizeChange,onCurrentChange:P.handleCurrentChange,background:"","current-page":u.curPage,"page-size":u.pageSize,layout:"total, prev, pager, next, jumper",total:u.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),w(U,{open:u.isqrcode,code_id:u.code_id,onClose:P.closeQrcode},null,8,["open","code_id","onClose"])])}]]);export{P as default};
