import{E as e,d as t,i as s,m as a,C as i,n as o,A as l,v as r}from"./element-plus-b01b3a31.js";import{A as n}from"./index-92c16cbb.js";import d from"./Add-d9b3a0ff.js";import p from"./Edit-5a783aab.js";import{_ as u}from"./_plugin-vue_export-helper-1b428a4d.js";import{ag as c,ap as m,o as h,c as g,a as _,$ as j,T as b,S as C,W as w,X as v,P as y,Q as f,a8 as k,Y as L}from"./@vue-e72ffbb6.js";import"./@vueuse-0fb12a45.js";import"./lodash-es-cce4393d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-4b00147d.js";import"./dayjs-34225b3b.js";import"./call-bind-2971450c.js";import"./get-intrinsic-d8eb8ca0.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./has-719bcddc.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-bf98ca95.js";import"./pinia-72b16af9.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-a8eee860.js";import"./side-channel-052d4c61.js";import"./object-inspect-dd55f836.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-e5a15ab3.js";import"./vue-i18n-73a1cd16.js";import"./@intlify-28c65249.js";const z={class:"user"},$={class:"common-level-rail"},S={class:"product-content"},T={class:"table-wrap"},A={key:0},x={key:1,class:"gray"},D={class:"pagination"};const P=u({components:{Add:d,Edit:p},inject:["reload"],data:()=>({loading:!0,role_loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,formInline:{user:"",region:""},open_add:!1,open_edit:!1,curModel:{},roleList:[]}),created(){this.getTableList()},methods:{handleCurrentChange(e){let t=this;t.curPage=e,t.loading=!0,t.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,t={};t.page=e.curPage,t.list_rows=e.pageSize,n.userList(t,!0).then((t=>{e.loading=!1,e.roleList=t.data.roleList,e.tableData=t.data.list.data,e.totalDataNumber=t.data.list.total})).catch((e=>{}))},addClick(){this.open_add=!0},closeAdd(e){this.open_add=!1,e&&"success"==e.type&&this.getTableList()},editClick(e){this.curModel=e,this.open_edit=!0},closeEdit(e){this.open_edit=!1,e&&"success"==e.type&&this.getTableList()},isShowFunc(t){let s=this;n.setStatus({shop_user_id:t.shop_user_id,status:t.is_status},!0).then((t=>{1==t.code&&(e({message:t.msg,type:"success"}),s.getTableList())})).catch((e=>{s.loading=!1}))},deleteClick(s){let a=this;t.confirm($t("此操作将永久删除该记录, 是否继续?"),$t("提示"),{confirmButtonText:$t("确定"),cancelButtonText:$t("取消"),type:"warning"}).then((()=>{a.loading=!0,n.userDelete({shop_user_id:s.shop_user_id},!0).then((t=>{a.loading=!1,1==t.code?(e({message:$t("恭喜你，该管理员删除成功"),type:"success"}),a.getTableList()):a.loading=!1})).catch((e=>{a.loading=!1}))})).catch((()=>{}))}}},[["render",function(e,t,n,d,p,u){const P=s,E=a,V=i,B=o,M=l,N=c("Add"),F=c("Edit"),I=m("auth"),Q=r;return h(),g("div",z,[_("div",$,[j((h(),b(P,{size:"small",type:"primary",icon:"Plus",onClick:u.addClick},{default:C((()=>[w(v(e.$t("添加管理员")),1)])),_:1},8,["onClick"])),[[I,"/auth/user/add"]])]),_("div",S,[_("div",T,[j((h(),b(B,{size:"small",data:p.tableData,border:"",style:{width:"100%"}},{default:C((()=>[y(E,{prop:"shop_user_id",label:"ID"}),y(E,{prop:"user_name",label:e.$t("用户名")},null,8,["label"]),y(E,{prop:"real_name",label:e.$t("姓名")},null,8,["label"]),y(E,{prop:"role.role_name",label:e.$t("角色")},{default:C((t=>[0==t.row.is_super?(h(),g("div",A,[(h(!0),g(f,null,k(t.row.userRole,((e,t)=>(h(),g("span",{class:"mr10 green",key:t},v(e.role.role_name),1)))),128))])):L("",!0),1==t.row.is_super?(h(),g("div",x,v(e.$t("超级管理员")),1)):L("",!0)])),_:1},8,["label"]),y(E,{prop:"is_status",label:e.$t("状态"),width:"80"},{default:C((e=>[y(V,{disabled:!(e.row.is_super<1||1==e.row.is_super&&1==e.row.user_type)||!this.$filter.isAuth("/auth/user/state"),modelValue:e.row.is_status,"onUpdate:modelValue":t=>e.row.is_status=t,"active-value":0,"inactive-value":1,onChange:t=>u.isShowFunc(e.row),"active-color":"#13ce66","inactive-color":"#cccccc"},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])])),_:1},8,["label"]),y(E,{prop:"create_time",label:"添加时间"}),y(E,{fixed:"right",label:"操作",width:"120"},{default:C((t=>[t.row.is_super<1?j((h(),b(P,{key:0,onClick:e=>u.editClick(t.row),type:"primary",link:"",size:"small"},{default:C((()=>[w(v(e.$t("编辑")),1)])),_:2},1032,["onClick"])),[[I,"/auth/user/edit"]]):L("",!0),t.row.is_super<1||1==t.row.is_super&&1==t.row.user_type?j((h(),b(P,{key:1,onClick:e=>u.deleteClick(t.row),type:"primary",link:"",size:"small"},{default:C((()=>[w(v(e.$t("删除")),1)])),_:2},1032,["onClick"])),[[I,"/auth/user/delete"]]):L("",!0)])),_:1})])),_:1},8,["data"])),[[Q,p.loading]])]),_("div",D,[y(M,{onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange,background:"","current-page":p.curPage,"page-size":p.pageSize,layout:"total, prev, pager, next, jumper",total:p.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),y(N,{open:p.open_add,roleList:p.roleList,onClose:u.closeAdd},null,8,["open","roleList","onClose"]),y(F,{open:p.open_edit,roleList:p.roleList,shop_user_id:p.curModel.shop_user_id,onClose:u.closeEdit},null,8,["open","roleList","shop_user_id","onClose"])])}]]);export{P as default};
