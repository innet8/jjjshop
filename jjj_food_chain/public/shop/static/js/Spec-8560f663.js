import{e,f as l,d as o,E as t,g as a,m as s,n as r,o as m,p as d}from"./element-plus-b30a858e.js";import{_ as u}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as p,c as n,P as i,S as c,T as f,W as _,X as b,Y as g,a as k,Q as y,a8 as h,ag as V}from"./@vue-e5cdee21.js";import{l as j}from"./index-708a85b3.js";import"./@vueuse-f6c48e1e.js";import"./lodash-es-cce4393d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-f5b82f61.js";import"./dayjs-34225b3b.js";import"./call-bind-2971450c.js";import"./get-intrinsic-d8eb8ca0.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./has-719bcddc.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-2729bdc9.js";import"./pinia-805bca39.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-a8eee860.js";import"./side-channel-052d4c61.js";import"./object-inspect-dd55f836.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-f67db3fa.js";import"./vue-i18n-2607567b.js";import"./@intlify-f009848f.js";const w=u({inject:["form"]},[["render",function(o,t,a,s,r,m){const d=e,u=l;return p(),n("div",null,[i(u,{label:o.$t("产品价格："),width:"80",rules:[{required:!0,message:o.$t("请填写产品价格")}],prop:"model.sku[0].product_price"},{default:c((()=>[i(d,{type:"number",modelValue:m.form.model.sku[0].product_price,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form.model.sku[0].product_price=e),class:"max-w460"},null,8,["modelValue"])])),_:1},8,["label","rules"]),i(u,{label:o.$t("包装费："),rules:[{required:!0,message:o.$t("请填写包装费")}],prop:"model.sku[0].bag_price"},{default:c((()=>[i(d,{type:"number",modelValue:m.form.model.sku[0].bag_price,"onUpdate:modelValue":t[1]||(t[1]=e=>m.form.model.sku[0].bag_price=e),class:"max-w460"},null,8,["modelValue"])])),_:1},8,["label","rules"]),i(u,{label:o.$t("库存数量："),rules:[{required:!0,message:o.$t("请填写库存数量")}],prop:"model.sku[0].stock_num"},{default:c((()=>[i(d,{type:"number",modelValue:m.form.model.sku[0].stock_num,"onUpdate:modelValue":t[2]||(t[2]=e=>m.form.model.sku[0].stock_num=e),class:"max-w460"},null,8,["modelValue"])])),_:1},8,["label","rules"])])}]]),$=JSON.stringify(j().languageData);const v=u({data:()=>({showAddGroupBtn:!0,showAddGroupForm:!1,addGroupFrom:{specName:"",specValue:""},groupLoading:!1}),inject:["form"],created(){},methods:{onToggleAddGroupForm:function(){let e=this;Array.isArray(e.form.model.sku)||(e.form.model.sku=[]),e.form.model.sku.push({spec_name:JSON.parse($),product_price:"",bag_price:"",stock_num:"",cost_price:0,is_full:0})},onDeleteGroup:function(e){var l=this;o.confirm("删除后不可恢复，确认删除该记录吗?","提示",{type:"warning"}).then((()=>{l.form.model.spec_many.spec_attr.splice(e,1),l.buildSkulist()}))},onDeleteValue:function(e,l){let a=this;a.form.isSpecLocked?t({message:"本商品正在参加活动，不能删除规格！",type:"warning"}):o.confirm("删除后不可恢复，确认删除该记录吗?","提示",{type:"warning"}).then((()=>{a.form.model.spec_many.spec_attr[e].spec_items.splice(l,1),a.buildSkulist()}))}}},[["render",function(e,l,o,t,s,r){const m=a;return r.form.isSpecLocked?g("",!0):(p(),f(m,{key:0,size:"small",type:"primary",class:"el-icon-circle-plus",onClick:r.onToggleAddGroupForm},{default:c((()=>[_(b(e.$t("添加规格"))+"+",1)])),_:1},8,["onClick"]))}],["__scopeId","data-v-ee9cc575"]]),S=j().languageList,L={class:"mt16"},U={class:"ww100"},x={label:"",class:"spec-name",style:{"margin-bottom":"0"}};const A=u({components:{Type:v,Table:u({components:{},data:()=>({languageList:S,restaurants:[],formData:{},batchData:{product_price:"",line_price:"",stock_num:"",product_weight:""},isupload:!1,spec_index:-1}),inject:["form"],created(){this.formData=this.form},mounted(){},methods:{deleteAttr(e){this.form.model.sku.splice(e,1)}}},[["render",function(o,t,m,d,u,b){const V=e,j=s,w=l,$=a,v=r;return p(),n("div",L,[b.form.model.sku.length>0?(p(),f(w,{key:0,label:o.$t("规格明细：")},{default:c((()=>[k("div",U,[i(v,{size:"",data:b.form.model.sku,border:"",style:{width:"100%","margin-top":"20px"}},{default:c((()=>[i(j,{label:o.$t("规格名称"),width:"400"},{default:c((e=>[k("div",x,[(p(!0),n(y,null,h(u.languageList,((l,t)=>(p(),f(V,{key:t,size:"small",prop:"spec_name",modelValue:e.row.spec_name[l.key],"onUpdate:modelValue":o=>e.row.spec_name[l.key]=o,placeholder:o.$t("请输入")+`(${l.label})`},null,8,["modelValue","onUpdate:modelValue","placeholder"])))),128))])])),_:1},8,["label"]),i(j,{label:o.$t("价格")},{default:c((e=>[i(w,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[i(V,{type:"number",size:"small",prop:"product_price",modelValue:e.row.product_price,"onUpdate:modelValue":l=>e.row.product_price=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["label"]),i(j,{label:o.$t("包装费")},{default:c((e=>[i(w,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[i(V,{type:"number",size:"small",prop:"bag_price",modelValue:e.row.bag_price,"onUpdate:modelValue":l=>e.row.bag_price=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["label"]),i(j,{label:o.$t("库存")},{default:c((e=>[i(w,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[i(V,{type:"number",size:"small",prop:"stock_num",modelValue:e.row.stock_num,"onUpdate:modelValue":l=>e.row.stock_num=l},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1},8,["label"]),i(j,{label:""},{default:c((e=>[i(w,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[i($,{type:"primary",link:"",onClick:l=>b.deleteAttr(e.$index)},{default:c((()=>[_("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])])])),_:1},8,["label"])):g("",!0)])}],["__scopeId","data-v-6e4d951f"]])}},[["render",function(e,l,o,t,a,s){const r=V("Type"),m=V("Table");return p(),n("div",null,[i(r),i(m)])}]]),C=j().languageList,z={class:"common-form mt50"},T={key:0,class:"red"};const q=u({components:{Single:w,Many:A},data:()=>({restaurants:[],languageList:C}),inject:["form"],methods:{changeSpec(e){10==e?this.form.sku={product_price:"",stock_num:"",bag_price:"",cost_price:0,is_full:0}:20==e&&(this.form.sku=[])},querySearch(e,l){let o=this;0==o.restaurants.length&&o.form.unit.forEach(((e,l)=>{o.restaurants.push({value:e.unit_name})}));var t=this.restaurants;l(e?t.filter(this.createFilter(e)):t)},createFilter:e=>l=>0===l.value.toLowerCase().indexOf(e.toLowerCase())}},[["render",function(o,t,a,s,r,u){const j=m,w=d,$=l,v=e,S=V("Single"),L=V("Many");return p(),n("div",null,[k("div",z,b(o.$t("规格/库存")),1),i($,{label:o.$t("库存计算方式：")},{default:c((()=>[i(w,{modelValue:u.form.model.deduct_stock_type,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.model.deduct_stock_type=e)},{default:c((()=>[i(j,{label:10},{default:c((()=>[_(b(o.$t("下单减库存")),1)])),_:1}),i(j,{label:20},{default:c((()=>[_(b(o.$t("付款减库存")),1)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(p(!0),n(y,null,h(r.languageList,((e,l)=>(p(),f($,{key:l,label:0==l?o.$t("商品单位："):"",rules:[{required:!0,message:o.$t("请填写商品单位")}],prop:"model.product_unit.th"},{default:c((()=>[i(v,{class:"inline-input",modelValue:u.form.model.product_unit[e.key],"onUpdate:modelValue":l=>u.form.model.product_unit[e.key]=l,placeholder:o.$t("请输入")+`(${e.label})`},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["label","rules"])))),128)),i($,{label:o.$t("产品规格：")},{default:c((()=>[i(w,{modelValue:u.form.model.spec_type,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.model.spec_type=e),onChange:u.changeSpec},{default:c((()=>[!u.form.isSpecLocked||u.form.isSpecLocked&&10==u.form.model.spec_type?(p(),f(j,{key:0,label:10},{default:c((()=>[_(b(o.$t("单规格")),1)])),_:1})):g("",!0),!u.form.isSpecLocked||u.form.isSpecLocked&&20==u.form.model.spec_type?(p(),f(j,{key:1,label:20},{default:c((()=>[_(b(o.$t("多规格")),1)])),_:1})):g("",!0)])),_:1},8,["modelValue","onChange"]),u.form.isSpecLocked?(p(),n("div",T,b(o.$t("此商品正在参加活动，不能修改规格")),1)):g("",!0)])),_:1},8,["label"]),10==u.form.model.spec_type?(p(),f(S,{key:0})):g("",!0),20==u.form.model.spec_type?(p(),f(L,{key:1})):g("",!0)])}],["__scopeId","data-v-c8f3d322"]]);export{q as default};
