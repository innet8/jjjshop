import{r as e,s as a,v as t,t as l,u as s,P as i,c as n,d as o,e as c,b as r,l as d,m as u,n as p,o as g}from"./element-plus-7d357588.js";import{_ as m,r as h}from"./index-f792122d.js";import{o as y,T as v,S as b,c as _,Q as f,a8 as D,$ as k,ap as C,P as V,a as P,Y as F,W as w,X as z}from"./@vue-48c55b54.js";import{P as x}from"./product-b7142be9.js";const T=m({data:()=>({pages:[{url:"/pages/user/address/address",name:"收货地址",type:"菜单"},{url:"/pages/coupon/coupon",name:"领券中心",type:"菜单"},{url:"/pages/user/my-coupon/my-coupon",name:"我的优惠券",type:"菜单"},{url:"/pages/plus/birthgift/birthgift",name:"生日有礼",type:"菜单"},{url:"/pages/plus/newgifts/newgifts",name:"新客有礼",type:"菜单"},{url:"/pages/plus/points/list/list",name:"积分商城",type:"菜单"},{url:"/pages/plus/signin/signin",name:"签到",type:"菜单"},{url:"/pages/order/package",name:"券包",type:"菜单"},{url:"/pages/plus/rider/rider",name:"骑手大厅",type:"菜单",sys_tag:"driver"},{url:"/pages/plus/invite/invite",name:"邀请有礼",type:"菜单"},{url:"/pages/agent/index/index",name:"分销中心",type:"菜单"},{url:"/pages/user/set/set",name:"设置",type:"菜单"},{url:"scanQrcode",name:"扫一扫(仅限导航组)",type:"菜单"},{url:"/pages/plus/group/list",name:"团购商品",type:"菜单"},{url:"receipt",name:"团购核销",type:"菜单"},{url:"/pages/order/group-list",name:"团购订单",type:"菜单"}],activePage:"收货地址"}),created(){this.changeFunc(this.pages[0])},methods:{changeFunc(e){this.$emit("changeData",e)}}},[["render",function(t,l,s,i,n,o){const c=e,r=a;return y(),v(r,{modelValue:n.activePage,"onUpdate:modelValue":l[0]||(l[0]=e=>n.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:o.changeFunc,"value-key":"url"},{default:b((()=>[(y(!0),_(f,null,D(n.pages,(e=>(y(),v(c,{key:e.url,"value-key":e.name,label:e.name,value:e},null,8,["value-key","label","value"])))),128))])),_:1},8,["modelValue","onChange"])}]]);let S={getPageList:(e,a)=>h._post("/shop/data.link/getPageList",e,a)};const L=m({data:()=>({loading:!0,pages:[],activePage:{}}),created(){this.getData()},methods:{getData(){let e=this;S.getPageList({},!0).then((a=>{e.loading=!1;let t=[];for(let e=0,l=a.data.list.length;e<l;e++){let l=a.data.list[e],s={url:"pages/diy-page/diy-page?page_id="+l.page_id,name:l.page_name,type:"自定义页面"};t.push(s)}e.pages=t,e.pages.length>0&&(e.activePage=e.pages[0],e.changeFunc(e.activePage))})).catch((a=>{e.loading=!1}))},changeFunc(e){this.$emit("changeData",e)}}},[["render",function(l,s,i,n,o,c){const r=e,d=a,u=t;return k((y(),v(d,{modelValue:o.activePage,"onUpdate:modelValue":s[0]||(s[0]=e=>o.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:c.changeFunc,"value-key":"url"},{default:b((()=>[(y(!0),_(f,null,D(o.pages,(e=>(y(),v(r,{key:e.url,label:e.name,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])),[[u,o.loading]])}]]);const N=m({data:()=>({pages:[{url:"pages/index/index",name:"首页",type:"页面"},{url:"pages/order/myorder",name:"订单",type:"页面"},{url:"pages/user/index/index",name:"我的",type:"页面"},{url:"pages/product/list/takeaway?orderType=takein",name:"自取",type:"页面"},{url:"pages/product/list/takeaway?orderType=takeout",name:"外卖",type:"页面"},{url:"pages/shop/shop_list",name:"门店列表",type:"页面"},{url:"pages/product/list/store",name:"快餐模式",type:"页面"},{url:"pages/call/call",name:"排队叫号",type:"页面"}],activePage:"首页"}),created(){this.changeFunc(this.pages[0])},methods:{changeFunc(e){this.$emit("changeData",e)}}},[["render",function(t,l,s,i,n,o){const c=e,r=a;return y(),v(r,{modelValue:n.activePage,"onUpdate:modelValue":l[0]||(l[0]=e=>n.activePage=e),placeholder:"请选择",class:"percent-w100",onChange:o.changeFunc,"value-key":"url"},{default:b((()=>[(y(!0),_(f,null,D(n.pages,(e=>(y(),v(c,{key:e.url,"value-key":e.name,label:e.name,value:e},null,8,["value-key","label","value"])))),128))])),_:1},8,["modelValue","onChange"])}]]),U={class:"marketing-box"},$={key:0,class:"product"},A={class:"product-content"},j={class:"table-wrap type-table"},Q={key:1,class:"product-list"},I={class:"common-seach-wrap"},M={class:"product-content"},W={class:"table-wrap setlink-product-table"},X={class:"product-info"},Y={class:"pic"},q={alt:""},B={class:"info"},E={class:"name text-ellipsis"},G={class:"red"},H={class:"pagination"};const J={components:{Menu:T,Pages:N,Product:m({data:()=>({loading:!0,activeTab:"type",categoryList:[],categoryActive:[],searchForm:{product_name:""},tableData:[],pageSize:5,totalDataNumber:0,curPage:1,activePage:null}),created(){this.getCategory()},watch:{activeTab:function(e,a){e!=a&&(this.tableData=[],"type"==e&&this.autoType(),"detail"==e&&this.getData())}},methods:{getCategory(){let e=this;e.loading=!0,x.catList({},!0).then((a=>{e.categoryList=a.data.list,e.autoType(),e.loading=!1})).catch((a=>{e.loading=!1}))},autoType(e){if(e|=0,this.categoryActive=[],this.categoryList.length>0){let a=this.categoryList[e];this.categoryActive.push(a.category_id),a.child&&void 0!==a.child&&a.child.length>0?(this.categoryActive.push(a.child[0].category_id),this.changeFunc(a.child[0])):(e++,this.autoType(e))}},changeCategory(e){let a=this.$refs.cascader.getCheckedNodes();this.changeFunc(a[0].data)},handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.pageSize=e,this.curPage=0,this.getData()},getData(){let e=this;e.loading=!0;let a={};a.page=e.curPage,a.list_rows=e.pageSize,a.product_name=e.searchForm.product_name,x.productList(a,!0).then((a=>{e.loading=!1,e.tableData=a.data.list.data,e.totalDataNumber=a.data.list.total,1==e.curPage&&e.tableData.length>0&&e.changeFunc(e.tableData[0])})).catch((a=>{e.loading=!1}))},onSubmit(){this.curPage=0,this.getData()},changeFunc(e){let a={};"type"==this.activeTab&&(a.name=e.name,a.url="pages/product/list/list?category_id="+e.category_id,a.type="商品分类"),"detail"==this.activeTab&&(a.name=e.product_name,a.url="pages/product/detail/detail?product_id="+e.product_id,a.type="商品详情"),this.$emit("changeData",a)}}},[["render",function(e,a,g,m,h,v){const f=l,D=s,x=i,T=n,S=o,L=c,N=r,J=d,K=u,O=p,R=t,Z=C("img-url");return y(),_("div",U,[V(D,{modelValue:h.activeTab,"onUpdate:modelValue":a[0]||(a[0]=e=>h.activeTab=e)},{default:b((()=>[V(f,{label:"分类",name:"type"}),V(f,{label:"详情",name:"detail"})])),_:1},8,["modelValue"]),"type"==h.activeTab?(y(),_("div",$,[k((y(),_("div",A,[P("div",j,[V(x,{class:"ww100",ref:"cascader",modelValue:h.categoryActive,"onUpdate:modelValue":a[1]||(a[1]=e=>h.categoryActive=e),options:h.categoryList,props:{children:"child",value:"category_id",label:"name"},onChange:v.changeCategory},null,8,["modelValue","options","onChange"])])])),[[R,h.loading]])])):F("",!0),"detail"==h.activeTab?k((y(),_("div",Q,[P("div",I,[V(N,{size:"small",inline:!0,model:h.searchForm,class:"demo-form-inline"},{default:b((()=>[V(S,{label:"商品名称"},{default:b((()=>[V(T,{size:"small",modelValue:h.searchForm.product_name,"onUpdate:modelValue":a[2]||(a[2]=e=>h.searchForm.product_name=e),placeholder:"请输入商品名称"},null,8,["modelValue"])])),_:1}),V(S,null,{default:b((()=>[V(L,{size:"small",icon:"el-icon-search",onClick:v.onSubmit},{default:b((()=>[w("查询")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),P("div",M,[P("div",W,[V(K,{size:"mini",data:h.tableData,border:"",style:{width:"100%"}},{default:b((()=>[V(J,{prop:"product_name",label:"产品"},{default:b((e=>[P("div",X,[P("div",Y,[k(P("img",q,null,512),[[Z,e.row.image[0].file_path]])]),P("div",B,[P("div",E,z(e.row.product_name),1)])])])),_:1}),V(J,{prop:"product_price",label:"价格",width:"100"},{default:b((e=>[P("span",G,z(e.row.product_price),1)])),_:1}),V(J,{label:"操作",width:"80"},{default:b((e=>[V(L,{size:"mini",onClick:a=>v.changeFunc(e.row)},{default:b((()=>[w("选择")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])]),P("div",H,[V(O,{onSizeChange:v.handleSizeChange,onCurrentChange:v.handleCurrentChange,background:"","current-page":h.curPage,"page-size":h.pageSize,layout:"total, prev, pager, next, jumper",total:h.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])),[[R,h.loading]]):F("",!0)])}],["__scopeId","data-v-4c02efcf"]]),DiyPage:L},data:()=>({dialogVisible:!0,activeData:null,activeName:"pages"}),props:["is_linkset"],created(){this.dialogVisible=this.is_linkset},methods:{dialogFormVisible(e){e?this.$emit("closeDialog",this.activeData):this.$emit("closeDialog",null)},activeDataFunc(e){this.activeData=e}}},K={class:"dialog-footer d-b-c"},O={class:"flex-1"},R={key:0,class:"d-s-s d-c tl"},Z={class:"text-ellipsis setlink-set-link"},ee=P("span",null,"当前链接：",-1),ae={class:"gray9"},te=P("span",{class:"p-0-10 gray"},"/",-1),le={class:"blue"},se={class:"text-ellipsis gray",style:{"font-size":"10px"}},ie={key:1,class:"tl"},ne={class:"setlink-footer-btn"};const oe=m(J,[["render",function(e,a,t,i,n,o){const r=N,d=l,u=L,p=T,m=s,h=c,f=g;return y(),v(f,{title:"超链接设置",modelValue:n.dialogVisible,"onUpdate:modelValue":a[3]||(a[3]=e=>n.dialogVisible=e),onClose:o.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!0},{footer:b((()=>[P("div",K,[P("div",O,[null!=n.activeData?(y(),_("div",R,[P("p",Z,[ee,P("span",ae,z(n.activeData.type),1),te,P("span",le,z(n.activeData.name),1)]),P("p",se,z(n.activeData.url),1)])):(y(),_("div",ie," 暂无 "))]),P("div",ne,[V(h,{size:"small",onClick:a[1]||(a[1]=e=>o.dialogFormVisible(!1))},{default:b((()=>[w("取 消")])),_:1}),V(h,{size:"small",type:"primary",onClick:a[2]||(a[2]=e=>o.dialogFormVisible(!0))},{default:b((()=>[w("确 定")])),_:1})])])])),default:b((()=>[V(m,{type:"border-card",modelValue:n.activeName,"onUpdate:modelValue":a[0]||(a[0]=e=>n.activeName=e)},{default:b((()=>[V(d,{label:"页面",name:"pages"},{default:b((()=>["pages"==n.activeName?(y(),v(r,{key:0,onChangeData:o.activeDataFunc},null,8,["onChangeData"])):F("",!0)])),_:1}),V(d,{label:"自定义",name:"diypage"},{default:b((()=>["diypage"==n.activeName?(y(),v(u,{key:0,onChangeData:o.activeDataFunc},null,8,["onChangeData"])):F("",!0)])),_:1}),V(d,{label:"我的菜单",name:"menu"},{default:b((()=>["menu"==n.activeName?(y(),v(p,{key:0,onChangeData:o.activeDataFunc},null,8,["onChangeData"])):F("",!0)])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["modelValue","onClose"])}]]);export{oe as _};
