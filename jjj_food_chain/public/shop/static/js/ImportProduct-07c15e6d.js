import{E as e,l as t,e as a,m as i,n as l,o,v as s}from"./element-plus-7d357588.js";import{L as r}from"./live-55cce4f4.js";import{_ as n}from"./index-f792122d.js";import{o as d,T as p,S as m,a as c,P as u,W as h,Y as g,$ as b}from"./@vue-48c55b54.js";import"./@vueuse-c556fb5a.js";import"./lodash-es-c1acaa3d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-e0f4a3e8.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b8ff3004.js";import"./pinia-73166104.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-cd29f9a1.js";const C={class:"product-content"},j={class:"table-wrap"},f=["src"],y={class:"pagination"},_={class:"dialog-footer"};const S=n({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},categoryList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null,excludeIds:[]}),props:["open_import","islist","room_id"],created(){this.dialogVisible=this.open_import,this.getData()},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,t.room_id=e.room_id,r.listProduct(t,!0).then((t=>{1==t.code&&(e.loading=!1,e.excludeIds=t.data.excludeIds,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?t.data.list.data.forEach((t=>{e.excludeIds.indexOf(t.goods_id)>-1?t.noChoose=!1:t.noChoose=!0})):e.islist||t.data.list.data.forEach((e=>{e.noChoose=!0})),e.productList=t.data.list.data,e.totalDataNumber=t.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let t=this,a=null;t.multipleSelection.length<1?e({message:"请至少选择一件产品商品！",type:"error"}):(t.islist&&void 0!==t.islist?(t.multipleSelection.forEach((e=>{e.image=e.imagePath})),a=t.multipleSelection):(a=t.multipleSelection[0],a.image=a.imagePath),t.params=a,t.type="success",t.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,r,n,S,w,x){const z=t,k=a,v=i,V=l,D=o,I=s;return d(),p(D,{title:"选择商品",modelValue:w.dialogVisible,"onUpdate:modelValue":r[1]||(r[1]=e=>w.dialogVisible=e),onClose:x.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!0,"append-to-body":!0,width:"900px"},{footer:m((()=>[c("div",_,[u(k,{size:"small",onClick:r[0]||(r[0]=e=>w.dialogVisible=!1)},{default:m((()=>[h("取 消")])),_:1}),n.islist?(d(),p(k,{key:0,size:"small",type:"primary",onClick:x.addClerk},{default:m((()=>[h("确 定")])),_:1},8,["onClick"])):g("",!0)])])),default:m((()=>[c("div",C,[c("div",j,[b((d(),p(v,{size:"small",data:w.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:x.tableCurrentChange},{default:m((()=>[u(z,{width:"70",label:"商品图片"},{default:m((e=>[c("img",{src:e.row.cover_img,width:"30",height:"30"},null,8,f)])),_:1}),u(z,{prop:"name",label:"商品名称"}),u(z,{prop:"price_type_text",label:"价格类型"}),u(z,{prop:"price_text",label:"价格",width:"200"}),u(z,{prop:"create_time",width:"140",label:"添加时间"}),n.islist?(d(),p(z,{key:0,type:"selection",selectable:x.selectableFunc,width:"44"},null,8,["selectable"])):g("",!0),n.islist?g("",!0):(d(),p(z,{key:1,width:"80",label:"单选"},{default:m((e=>[e.row.noChoose?(d(),p(k,{key:0,size:"small",onClick:t=>x.SingleFunc(e.row)},{default:m((()=>[h("选择")])),_:2},1032,["onClick"])):(d(),p(k,{key:1,size:"small",disabled:""},{default:m((()=>[h("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[I,w.loading]])]),c("div",y,[u(V,{onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange,background:"","current-page":w.curPage,"page-sizes":[2,10,20,50,100],"page-size":w.pageSize,layout:"total, prev, pager, next, jumper",total:w.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]);export{S as default};
