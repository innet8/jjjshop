import{i as t,h as e,j as a,R as s,g as r,e as l}from"./element-plus-d03e850c.js";import{l as i}from"./index-4dcc075d.js";import{_ as u}from"./_plugin-vue_export-helper-1b428a4d.js";import{ag as o,o as n,c as d,a as m,X as h,P as p,S as c,W as _,Q as f,a8 as b,T as v,Y as j}from"./@vue-e72ffbb6.js";import"./@vueuse-0fb12a45.js";import"./lodash-es-cce4393d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-4b00147d.js";import"./dayjs-34225b3b.js";import"./call-bind-2971450c.js";import"./get-intrinsic-d8eb8ca0.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./has-719bcddc.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-bf98ca95.js";import"./pinia-72b16af9.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-a8eee860.js";import"./side-channel-052d4c61.js";import"./object-inspect-dd55f836.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-e5a15ab3.js";import"./vue-i18n-73a1cd16.js";import"./@intlify-28c65249.js";const g=JSON.stringify(i().languageData),y=i().languageList,k={class:"common-form mt50"},z={class:"mt16"},x={class:"product-tips"},w={class:"product-tips"};const C=u({data:()=>({restaurants_zh:[],restaurants_zhtw:[],restaurants_en:[],restaurants_th:[],formData:{},languageList:y}),inject:["form"],watch:{form:{handler(t){this.restaurants_zh=[],this.restaurants_zhtw=[],this.restaurants_en=[],this.restaurants_th=[],t.attribute.map(((t,e)=>{this.restaurants_zh.push({value:JSON.parse(t.attribute_name).zh,index:e,child:t.attribute_value}),this.restaurants_zhtw.push({value:JSON.parse(t.attribute_name).zhtw,index:e,child:t.attribute_value}),this.restaurants_en.push({value:JSON.parse(t.attribute_name).en,index:e,child:t.attribute_value}),this.restaurants_th.push({value:JSON.parse(t.attribute_name).th,index:e,child:t.attribute_value})}))},deep:!0,immediate:!0}},methods:{addAttr(){this.form.model.product_attr.push({attribute_name:JSON.parse(g),attribute_value:[JSON.parse(g),JSON.parse(g)],much:1})},handleDelete(t){this.form.model.product_attr.splice(t,1)},handleAdd(t){this.form.model.product_attr[t].much++,this.form.model.product_attr[t].attribute_value.push(JSON.parse(g))},handleDecrease(t){this.form.model.product_attr[t].much>1&&(this.form.model.product_attr[t].much--,this.form.model.product_attr[t].attribute_value.pop())},querySearch(t,e,a){let s=[];"th"==a&&(s=this.restaurants_th),"zh"==a&&(s=this.restaurants_zh),"zhtw"==a&&(s=this.restaurants_zhtw),"en"==a&&(s=this.restaurants_en),e(t?s.filter(this.createFilter(t,a)):s)},createFilter(t,e){return"th"==e&&this.restaurants_th,"zh"==e&&this.restaurants_zh,"zhtw"==e&&this.restaurants_zhtw,"en"==e&&this.restaurants_en,e=>0===e.value.toLowerCase().indexOf(t.toLowerCase())},selectChange(t,e){this.form.model.product_attr[e].attribute_name.zh=this.restaurants_zh[t.index].value,this.form.model.product_attr[e].attribute_name.th=this.restaurants_th[t.index].value,this.form.model.product_attr[e].attribute_name.en=this.restaurants_en[t.index].value,this.form.model.product_attr[e].attribute_name.zhtw=this.restaurants_zhtw[t.index].value,this.form.model.product_attr[e].much=t.child.length,this.form.model.product_attr[e].attribute_value=t.child}}},[["render",function(i,u,g,y,C,S){const O=t,J=e,N=o("Delete"),$=a,V=s,D=r,A=o("CirclePlusFilled"),L=o("RemoveFilled"),F=l;return n(),d("div",null,[m("div",k,h(i.$t("商品属性")),1),m("div",null,[m("div",z,[p(J,{label:i.$t("商品属性：")},{default:c((()=>[p(O,{type:"primary",onClick:S.addAttr},{default:c((()=>[_(h(i.$t("添加属性"))+"+",1)])),_:1},8,["onClick"])])),_:1},8,["label"]),S.form.model.product_attr.length>0?(n(!0),d(f,{key:0},b(S.form.model.product_attr,((t,e)=>(n(),v(J,{class:"product-box",key:e},{label:c((()=>[p($,{class:"delete-icon",onClick:t=>S.handleDelete(e)},{default:c((()=>[p(N)])),_:2},1032,["onClick"])])),default:c((()=>[(n(!0),d(f,null,b(C.languageList,((a,s)=>(n(),v(F,{size:"small",class:"product-attr",key:s},{default:c((()=>[p(J,{prop:"item.attribute_name[items.key]",rules:[{validator:()=>!!t.attribute_name[a.key],message:i.$t("请输入属性名称")}]},{label:c((()=>[_(h(i.$t("属性名称：")),1),m("span",x,"（"+h(a.label)+"）",1)])),default:c((()=>[p(V,{"fetch-suggestions":(t,e)=>S.querySearch(t,e,a.key),onSelect:t=>S.selectChange(t,e),class:"inline-input",modelValue:t.attribute_name[a.key],"onUpdate:modelValue":e=>t.attribute_name[a.key]=e,maxlength:"128",placeholder:i.$t("如：温度")},null,8,["fetch-suggestions","onSelect","modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"]),p(J,{class:"product-attr-item"},{label:c((()=>[_(h(i.$t("属性：")),1),m("span",w,h(a.label),1)])),default:c((()=>[(n(!0),d(f,null,b(t.much,((e,s)=>(n(),v(J,{key:s,prop:"item.attribute_value[aindex][items.key]",rules:[{validator:()=>!!t.attribute_value[s][a.key],message:i.$t("请输入属性")}]},{default:c((()=>[p(D,{style:{width:"100px","margin-right":"16px"},maxlength:50,modelValue:t.attribute_value[s][a.key],"onUpdate:modelValue":e=>t.attribute_value[s][a.key]=e,placeholder:i.$t("请输入")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"])))),128)),p($,{class:"add-button",onClick:t=>S.handleAdd(e)},{default:c((()=>[p(A)])),_:2},1032,["onClick"]),p($,{class:"add-button",onClick:t=>S.handleDecrease(e)},{default:c((()=>[p(L)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)))),128)):j("",!0)])])])}],["__scopeId","data-v-5c82a314"]]);export{C as default};
