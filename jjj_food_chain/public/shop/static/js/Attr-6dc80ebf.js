import{i as t,h as e,j as a,R as r,g as s,e as l}from"./element-plus-c8084613.js";import{l as i}from"./index-64643ccb.js";import{_ as o}from"./_plugin-vue_export-helper-1b428a4d.js";import{af as u,o as n,c as d,a as m,W as p,O as h,R as c,V as _,P as f,a7 as b,S as v,X as j,bm as g,bk as y}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const z=JSON.stringify(i().languageData),k=i().languageList,x={data:()=>({restaurants_zh:[],restaurants_zhtw:[],restaurants_en:[],restaurants_th:[],formData:{},languageList:k}),inject:["form"],watch:{form:{handler(t){this.restaurants_zh=[],this.restaurants_zhtw=[],this.restaurants_en=[],this.restaurants_th=[],t.attribute.map(((t,e)=>{JSON.parse(t.attribute_name).zh&&JSON.parse(t.attribute_name).zhtw&&JSON.parse(t.attribute_name).en&&JSON.parse(t.attribute_name).th&&(this.restaurants_zh.push({value:JSON.parse(t.attribute_name).zh,index:e,child:t.attribute_value}),this.restaurants_zhtw.push({value:JSON.parse(t.attribute_name).zhtw,index:e,child:t.attribute_value}),this.restaurants_en.push({value:JSON.parse(t.attribute_name).en,index:e,child:t.attribute_value}),this.restaurants_th.push({value:JSON.parse(t.attribute_name).th,index:e,child:t.attribute_value}))}))},deep:!0,immediate:!0}},methods:{addAttr(){this.form.model.product_attr.push({attribute_name:JSON.parse(z),attribute_value:[JSON.parse(z)]})},handleDelete(t){this.form.model.product_attr.splice(t,1)},handleAdd(t){this.form.model.product_attr[t].attribute_value.push(JSON.parse(z))},handleDecrease(t){this.form.model.product_attr[t].attribute_value.length>1&&this.form.model.product_attr[t].attribute_value.pop()},querySearch(t,e,a){let r=[];"th"==a&&(r=this.restaurants_th),"zh"==a&&(r=this.restaurants_zh),"zhtw"==a&&(r=this.restaurants_zhtw),"en"==a&&(r=this.restaurants_en),e(t?r.filter(this.createFilter(t,a)):r)},createFilter(t,e){return"th"==e&&this.restaurants_th,"zh"==e&&this.restaurants_zh,"zhtw"==e&&this.restaurants_zhtw,"en"==e&&this.restaurants_en,e=>0===e.value.toLowerCase().indexOf(t.toLowerCase())},selectChange(t,e){this.form.model.product_attr[e].attribute_name.zh=this.restaurants_zh[t.index].value,this.form.model.product_attr[e].attribute_name.th=this.restaurants_th[t.index].value,this.form.model.product_attr[e].attribute_name.en=this.restaurants_en[t.index].value,this.form.model.product_attr[e].attribute_name.zhtw=this.restaurants_zhtw[t.index].value,this.form.model.product_attr[e].much=t.child.length,this.form.model.product_attr[e].attribute_value=t.child},checkedForm(){this.form.model.product_attr.map(((t,e)=>{this.$refs["form-"+e].forEach(((t,a)=>{this.$refs["form-"+e][a].validate((t=>{}))}))}))}}},w=t=>(g("data-v-7fd0ee26"),t=t(),y(),t),S={class:"common-form mt50"},C={class:"mt16"},O=w((()=>m("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1))),J={class:"product-tips"},N=w((()=>m("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1))),$={class:"product-tips"};const V=o(x,[["render",function(i,o,g,y,z,k){const x=t,w=e,V=u("Delete"),D=a,F=r,L=s,q=u("CirclePlusFilled"),A=u("RemoveFilled"),U=l;return n(),d("div",null,[m("div",S,p(i.$t("商品属性")),1),m("div",null,[m("div",C,[h(w,{label:i.$t("商品属性：")},{default:c((()=>[h(x,{type:"primary",onClick:k.addAttr},{default:c((()=>[_(p(i.$t("添加属性"))+"+",1)])),_:1},8,["onClick"])])),_:1},8,["label"]),k.form.model.product_attr.length>0?(n(!0),d(f,{key:0},b(k.form.model.product_attr,((t,e)=>(n(),v(w,{class:"product-box",key:e},{label:c((()=>[h(D,{class:"delete-icon",onClick:t=>k.handleDelete(e)},{default:c((()=>[h(V)])),_:2},1032,["onClick"])])),default:c((()=>[(n(!0),d(f,null,b(z.languageList,((a,r)=>(n(),v(U,{ref_for:!0,ref:"form-".concat(e),model:t,size:"small",class:"product-attr",key:r},{default:c((()=>[h(w,{prop:"item.attribute_name[items.key]",rules:[{validator:()=>!!t.attribute_name[a.key],message:i.$t("请输入属性名称")}]},{label:c((()=>[O,_(p(i.$t("属性名称：")),1),m("span",J,"（"+p(a.label)+"）",1)])),default:c((()=>[h(F,{"fetch-suggestions":(t,e)=>k.querySearch(t,e,a.key),onSelect:t=>k.selectChange(t,e),class:"inline-input",modelValue:t.attribute_name[a.key],"onUpdate:modelValue":e=>t.attribute_name[a.key]=e,maxlength:"128",placeholder:i.$t("如：温度")},null,8,["fetch-suggestions","onSelect","modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"]),h(w,{class:"product-attr-item"},{label:c((()=>[N,_(p(i.$t("属性：")),1),m("span",$,"("+p(a.label)+")",1)])),default:c((()=>[(n(!0),d(f,null,b(t.attribute_value,((e,r)=>(n(),v(w,{key:r,prop:"item.attribute_value[aindex][items.key]",rules:[{validator:()=>!!t.attribute_value[r][a.key],message:i.$t("请输入属性")}]},{default:c((()=>[h(L,{style:{width:"100px","margin-right":"16px"},maxlength:50,modelValue:t.attribute_value[r][a.key],"onUpdate:modelValue":e=>t.attribute_value[r][a.key]=e,placeholder:i.$t("请输入")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"])))),128)),h(D,{class:"add-button",onClick:t=>k.handleAdd(e)},{default:c((()=>[h(q)])),_:2},1032,["onClick"]),h(D,{class:"add-button",onClick:t=>k.handleDecrease(e)},{default:c((()=>[h(A)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["model"])))),128))])),_:2},1024)))),128)):j("",!0)])])])}],["__scopeId","data-v-7fd0ee26"]]);export{V as default};
