import{E as e,h as l,g as r,i as o,o as i,p as s,e as a,w as t}from"./element-plus-d03e850c.js";import{_ as p}from"./Upload-8d45ba26.js";import{L as m}from"./live-45c67d1d.js";import{_ as u}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as d,T as c,S as n,a as g,P as _,W as h,c as f,Y as y}from"./@vue-e72ffbb6.js";import"./@vueuse-0fb12a45.js";import"./lodash-es-cce4393d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-4b00147d.js";import"./dayjs-34225b3b.js";import"./call-bind-2971450c.js";import"./get-intrinsic-d8eb8ca0.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./has-719bcddc.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./file-4be86a03.js";import"./index-8a56ff53.js";import"./vue-router-7e282e9c.js";import"./pinia-72b16af9.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-a8eee860.js";import"./side-channel-052d4c61.js";import"./object-inspect-dd55f836.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-e5a15ab3.js";import"./vue-i18n-73a1cd16.js";import"./@intlify-28c65249.js";import"./vue-cropperjs-de120977.js";import"./vue-93bf25b5.js";import"./cropperjs-81999277.js";const j={components:{Upload:p},data:()=>({isupload:!1,productName:"",product_img:"",ruleForm:{name:"",cover_img:"",price_type:1,price:"",price2:"",product_id:"",shop_supplier_id:0},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:3,max:17,message:"长度在 3 到 17 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"change"}]},loading:!1,isproduct:!1,exclude_ids:[],imageType:"",formLabelWidth:"120px",dialogVisible:!1,product_type:0,edit_type:""}),props:["open_edit","editform"],watch:{open_edit:function(e,l){this.dialogVisible=this.open_edit,this.ruleForm=this.editform}},created(){},methods:{closeFunc(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})},submitForm(l){let r=this;r.loading=!0,r.$refs[l].validate((l=>{if(!l)return r.loading=!1,!1;{let l=r.ruleForm;m.editProduct(l,!0).then((l=>{r.loading=!1,e({message:"编辑成功",type:"success"}),this.closeFunc()})).catch((e=>{r.loading=!1}))}}))},openUpload(e){this.imageType=e,this.isupload=!0},cancelFunc(e){this.$emit("close",{type:"error"})},returnImgsFunc(e){null!=e&&e.length>0&&(this.ruleForm.cover_img=e[0].file_path),this.isupload=!1}}},F=["src"],b=["src"],V=g("div",{class:"gray9"},"建议尺寸300*300,大小不超过2M",-1),v={class:"dialog-footer"};const x=u(j,[["render",function(e,m,u,j,x,k){const w=l,U=r,q=o,z=p,C=i,D=s,I=a,$=t;return d(),c($,{title:"编辑商品","modal-append-to-body":!1,"before-close":k.closeFunc,modelValue:x.dialogVisible,"onUpdate:modelValue":m[10]||(m[10]=e=>x.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:n((()=>[g("div",v,[_(q,{size:"small",onClick:m[8]||(m[8]=e=>k.closeFunc())},{default:n((()=>[h("取 消")])),_:1}),_(q,{type:"primary",onClick:m[9]||(m[9]=e=>k.submitForm("ruleForm")),loading:x.loading},{default:n((()=>[h("立即提交")])),_:1},8,["loading"])])])),default:n((()=>[_(I,{size:"small",model:x.ruleForm,rules:x.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:n((()=>[_(w,null,{default:n((()=>[""!=x.product_img?(d(),f("img",{key:0,src:x.product_img,class:"mt10",width:120},null,8,F)):y("",!0)])),_:1}),_(w,{label:"商品名称",prop:"name"},{default:n((()=>[_(U,{modelValue:x.ruleForm.name,"onUpdate:modelValue":m[0]||(m[0]=e=>x.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),_(w,{label:"商品封面图",prop:"cover_img",rules:[{required:!0,message:"请上传商品封面图"}]},{default:n((()=>[g("div",null,[_(q,{type:"primary",onClick:m[1]||(m[1]=e=>k.openUpload("cover"))},{default:n((()=>[h("上传图片")])),_:1}),""!=x.ruleForm.cover_img?(d(),f("img",{key:0,src:x.ruleForm.cover_img,class:"mt10",width:120},null,8,b)):y("",!0),V,x.isupload?(d(),c(z,{key:1,isupload:x.isupload,onReturnImgs:k.returnImgsFunc},{default:n((()=>[h("上传图片")])),_:1},8,["isupload","onReturnImgs"])):y("",!0)])])),_:1}),_(w,{label:"价格类型",prop:"type"},{default:n((()=>[_(D,{modelValue:x.ruleForm.price_type,"onUpdate:modelValue":m[2]||(m[2]=e=>x.ruleForm.price_type=e)},{default:n((()=>[_(C,{label:1},{default:n((()=>[h("一口价")])),_:1}),_(C,{label:2},{default:n((()=>[h("价格区间")])),_:1}),_(C,{label:3},{default:n((()=>[h("折扣价")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==x.ruleForm.price_type?(d(),c(w,{key:0,label:"价格：",prop:"price",rules:[{required:!0,message:"请输入最低价格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:x.ruleForm.price,"onUpdate:modelValue":m[3]||(m[3]=e=>x.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入价格"},null,8,["modelValue"])])),_:1})):y("",!0),2==x.ruleForm.price_type?(d(),c(w,{key:1,label:"价格：",prop:"price",rules:[{required:!0,message:"请输入最低价格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:x.ruleForm.price,"onUpdate:modelValue":m[4]||(m[4]=e=>x.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入最低价格"},null,8,["modelValue"])])),_:1})):y("",!0),2==x.ruleForm.price_type?(d(),c(w,{key:2,label:"价格：",prop:"price2",rules:[{required:!0,message:"请输入最高价格",trigger:"change"}]},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:x.ruleForm.price2,"onUpdate:modelValue":m[5]||(m[5]=e=>x.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"请输入最高价格"},null,8,["modelValue"])])),_:1})):y("",!0),3==x.ruleForm.price_type?(d(),c(w,{key:3,prop:"price",rules:[{required:!0,message:"请输入原价",trigger:"change"}],label:"价格："},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:x.ruleForm.price,"onUpdate:modelValue":m[6]||(m[6]=e=>x.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入原价"},null,8,["modelValue"])])),_:1})):y("",!0),3==x.ruleForm.price_type?(d(),c(w,{key:4,prop:"price2",rules:[{required:!0,message:"请输入现价",trigger:"change"}],label:"价格："},{default:n((()=>[_(U,{type:"text",min:"0",modelValue:x.ruleForm.price2,"onUpdate:modelValue":m[7]||(m[7]=e=>x.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"请输入现价"},null,8,["modelValue"])])),_:1})):y("",!0)])),_:1},8,["model","rules"])])),_:1},8,["before-close","modelValue"])}]]);export{x as default};
