import{_ as e}from"./GetUser-6f62af63.js";import{_ as l}from"./Upload-22bade2e.js";import{E as a,c as s,d as o,h as r,w as i,e as p,f as u,r as d,s as t,b as m}from"./element-plus-7d357588.js";import{_ as n,R as c}from"./select.region-e106d873.js";import{S as f}from"./supplier-bc0f092e.js";import{_,u as h,f as g}from"./index-f792122d.js";import{o as y,c as b,P as V,S as j,W as v,T as k,Y as w,a as U,X as x,Q as C,a8 as F,bb as q,b9 as I}from"./@vue-48c55b54.js";/* empty css                                                               */import"./@vueuse-c556fb5a.js";import"./lodash-es-c1acaa3d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-e0f4a3e8.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b8ff3004.js";import"./pinia-73166104.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-cd29f9a1.js";const{userInfo:S}=h(),G={components:{Upload:l,GetUser:e,Getpoint:n},data:()=>({form:{shop_supplier_id:0,supplier:{user_name:"",logo:"",business_id:0,name:"",link_name:"",link_phone:"",address:"",description:"",user_id:0,store_type:10,coordinate:"",province_id:"",city_id:"",region_id:"",status:0,is_recycle:0,is_main:0,category_set:""}},loading:!1,isupload:!1,type:"logo",open_user:!1,user_info:{},areaList:c,user_type:""}),created(){this.form.shop_supplier_id=this.$route.query.shop_supplier_id,this.getData(),this.getBaseInof()},methods:{async getBaseInof(){this.user_type=S.user_type},getData(){let e=this;f.toEditSupplier({shop_supplier_id:e.form.shop_supplier_id},!0).then((l=>{e.form.supplier=g(e.form.supplier,l.data.model),e.form.supplier.coordinate=l.data.model.latitude+","+l.data.model.longitude,l.data.model.superUser&&(e.form.supplier.user_name=l.data.model.superUser.user_name),l.data.model.user&&(e.user_info.avatarUrl=l.data.model.user.avatarUrl,e.user_info.nickName=l.data.model.user.nickName)})).catch((e=>{}))},onSubmit(){let e=this,l=e.form;e.$refs.form.validate((s=>{s&&(e.loading=!0,f.editSupplier(l,!0).then((l=>{e.loading=!1,1==l.code?(a({message:"恭喜你，门店修改成功",type:"success"}),e.$router.push("/supplier/supplier/index")):e.loading=!1})).catch((l=>{e.loading=!1})))}))},cancelFunc(){this.$router.back(-1)},userClick(){this.open_user=!0},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&"logo"==this.type&&(this.form.supplier.logo=e[0].file_path),this.isupload=!1},closeDialogFunc(e){e&&"error"!=e.type&&(this.user_info=e.params[0],this.form.supplier.user_id=e.params[0].user_id),this.open_user=!1},getMapdataFunc(e){this.form.supplier.coordinate=e.data[0].toFixed(6)+","+e.data[1].toFixed(6)},choseFunc(e){this.form.supplier.coordinate=e.location.lat+","+e.location.lng,this.form.supplier.address=e.address},initCity(){this.form.supplier.city_id=""},initRegion(){this.form.supplier.region_id=""}}},R=e=>(q("data-v-e88d2a67"),e=e(),I(),e),z={class:"product-add"},D=R((()=>U("div",{class:"common-form"},"编辑门店",-1))),L=R((()=>U("div",{class:"tips"},"温馨提示：选择后，请勿随意修改，以免造成门店商品数据错乱",-1))),M={key:0,class:"img"},N=["src"],P={key:0,class:"img"},$=["src"],B=R((()=>U("span",null,null,-1))),E=R((()=>U("span",null,null,-1))),O=R((()=>U("span",null,null,-1))),Q={class:"ww100 mt16"},T={class:"common-button-wrapper"};const W=_(G,[["render",function(a,c,f,_,h,g){const q=s,I=o,S=r,G=i,R=p,W=u,X=d,Y=t,A=n,H=m,J=l,K=e;return y(),b("div",z,[V(H,{size:"small",ref:"form",model:h.form,"label-width":"200px"},{default:j((()=>[D,V(I,{label:"门店名称",prop:"supplier.name",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{class:"max-w460",modelValue:h.form.supplier.name,"onUpdate:modelValue":c[0]||(c[0]=e=>h.form.supplier.name=e),placeholder:"请输入门店名称"},null,8,["modelValue"])])),_:1}),V(I,{label:"账号",prop:"supplier.user_name",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{disabled:1==h.form.supplier.is_main,class:"max-w460",modelValue:h.form.supplier.user_name,"onUpdate:modelValue":c[1]||(c[1]=e=>h.form.supplier.user_name=e),placeholder:"请输入账号"},null,8,["disabled","modelValue"])])),_:1}),V(I,{label:"登录密码",prop:"supplier.password"},{default:j((()=>[V(q,{modelValue:h.form.supplier.password,"onUpdate:modelValue":c[2]||(c[2]=e=>h.form.supplier.password=e),placeholder:"请输入登录密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(I,{label:"确认密码",prop:"supplier.confirm_password"},{default:j((()=>[V(q,{modelValue:h.form.supplier.confirm_password,"onUpdate:modelValue":c[3]||(c[3]=e=>h.form.supplier.confirm_password=e),placeholder:"请输入确认密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),V(I,{label:"联系人",prop:"supplier.link_name",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{class:"max-w460",modelValue:h.form.supplier.link_name,"onUpdate:modelValue":c[4]||(c[4]=e=>h.form.supplier.link_name=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),V(I,{label:"联系电话",prop:"supplier.link_phone",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{class:"max-w460",modelValue:h.form.supplier.link_phone,"onUpdate:modelValue":c[5]||(c[5]=e=>h.form.supplier.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),V(I,{label:"店铺类型"},{default:j((()=>[V(G,{modelValue:h.form.supplier.store_type,"onUpdate:modelValue":c[6]||(c[6]=e=>h.form.supplier.store_type=e)},{default:j((()=>[V(S,{label:10},{default:j((()=>[v("分店")])),_:1}),V(S,{label:20},{default:j((()=>[v("直营")])),_:1})])),_:1},8,["modelValue"])])),_:1}),0==h.user_type?(y(),k(I,{key:0,label:"商品分类"},{default:j((()=>[V(G,{modelValue:h.form.supplier.category_set,"onUpdate:modelValue":c[7]||(c[7]=e=>h.form.supplier.category_set=e),disabled:""},{default:j((()=>[V(S,{label:10},{default:j((()=>[v("同步主店")])),_:1}),V(S,{label:20},{default:j((()=>[v("分店创建")])),_:1})])),_:1},8,["modelValue"]),L])),_:1})):w("",!0),V(I,{label:"绑定用户"},{default:j((()=>[V(W,null,{default:j((()=>[V(R,{icon:"Picture",onClick:c[8]||(c[8]=e=>g.userClick())},{default:j((()=>[v("选择用户")])),_:1}),0!=h.form.supplier.user_id?(y(),b("div",M,[U("span",null,"用户昵称："+x(h.user_info.nickName),1),U("img",{src:h.user_info.avatarUrl,width:"100",height:"100"},null,8,N)])):w("",!0)])),_:1})])),_:1}),V(I,{label:"门店logo"},{default:j((()=>[V(W,null,{default:j((()=>[V(R,{icon:"Picture",onClick:c[9]||(c[9]=e=>g.openUpload("logo"))},{default:j((()=>[v("选择图片")])),_:1}),""!=h.form.supplier.logo?(y(),b("div",P,[U("img",{src:h.form.supplier.logo,width:"100",height:"100"},null,8,$)])):w("",!0)])),_:1})])),_:1}),V(I,{label:"所属区域",prop:"supplier.region_id",rules:[{required:!0,message:" "}]},{default:j((()=>[V(Y,{modelValue:h.form.supplier.province_id,"onUpdate:modelValue":c[10]||(c[10]=e=>h.form.supplier.province_id=e),placeholder:"省",onChange:g.initCity},{default:j((()=>[(y(!0),b(C,null,F(h.areaList,((e,l)=>(y(),k(X,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),B,""!=h.form.supplier.province_id?(y(),k(Y,{key:0,modelValue:h.form.supplier.city_id,"onUpdate:modelValue":c[11]||(c[11]=e=>h.form.supplier.city_id=e),placeholder:"市",onChange:g.initRegion},{default:j((()=>[(y(!0),b(C,null,F(h.areaList[h.form.supplier.province_id].city,((e,l)=>(y(),k(X,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):w("",!0),E,""!=h.form.supplier.city_id?(y(),k(Y,{key:1,modelValue:h.form.supplier.region_id,"onUpdate:modelValue":c[12]||(c[12]=e=>h.form.supplier.region_id=e),placeholder:"区"},{default:j((()=>[(y(!0),b(C,null,F(h.areaList[h.form.supplier.province_id].city[h.form.supplier.city_id].region,((e,l)=>(y(),k(X,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):w("",!0),O])),_:1}),V(I,{label:"地址",prop:"supplier.address",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{class:"max-w460",modelValue:h.form.supplier.address,"onUpdate:modelValue":c[13]||(c[13]=e=>h.form.supplier.address=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),V(I,{label:"门店坐标",prop:"supplier.coordinate",rules:[{required:!0,message:" "}]},{default:j((()=>[V(q,{disabled:"",modelValue:h.form.supplier.coordinate,"onUpdate:modelValue":c[14]||(c[14]=e=>h.form.supplier.coordinate=e),class:"max-w460"},null,8,["modelValue"]),U("div",Q,[V(A,{form:h.form,onGetMapdata:g.getMapdataFunc,onChose:g.choseFunc},null,8,["form","onGetMapdata","onChose"])])])),_:1}),V(I,{label:"商家介绍",prop:"supplier.description"},{default:j((()=>[V(q,{rows:"6",type:"textarea",modelValue:h.form.supplier.description,"onUpdate:modelValue":c[15]||(c[15]=e=>h.form.supplier.description=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),0==h.user_type&&0==h.form.supplier.is_main?(y(),k(I,{key:1,label:"状态"},{default:j((()=>[V(G,{modelValue:h.form.supplier.is_recycle,"onUpdate:modelValue":c[16]||(c[16]=e=>h.form.supplier.is_recycle=e)},{default:j((()=>[V(S,{label:0},{default:j((()=>[v("开启")])),_:1}),V(S,{label:1},{default:j((()=>[v("禁止")])),_:1})])),_:1},8,["modelValue"])])),_:1})):w("",!0),V(I,{label:"营业状态"},{default:j((()=>[V(G,{modelValue:h.form.supplier.status,"onUpdate:modelValue":c[17]||(c[17]=e=>h.form.supplier.status=e)},{default:j((()=>[V(S,{label:0},{default:j((()=>[v("营业中")])),_:1}),V(S,{label:1},{default:j((()=>[v("停止营业")])),_:1})])),_:1},8,["modelValue"])])),_:1}),U("div",T,[V(R,{size:"small",type:"info",onClick:g.cancelFunc},{default:j((()=>[v("取消")])),_:1},8,["onClick"]),V(R,{size:"small",type:"primary",onClick:g.onSubmit,loading:h.loading},{default:j((()=>[v("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),h.isupload?(y(),k(J,{key:0,isupload:h.isupload,type:h.type,onReturnImgs:g.returnImgsFunc},{default:j((()=>[v("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):w("",!0),V(K,{is_open:h.open_user,onClose:c[18]||(c[18]=e=>g.closeDialogFunc(e,"add"))},null,8,["is_open"])])}],["__scopeId","data-v-e88d2a67"]]);export{W as default};
