import{i as e,h as t,j as a,S as r,g as s,e as l}from"./element-plus-bf694ad1.js";import{l as o}from"./index-ddb8f3a5.js";import{_ as i}from"./_plugin-vue_export-helper-1b428a4d.js";import{af as u,o as d,c as p,a as m,W as n,O as c,R as h,V as f,P as _,a7 as j,S as b,X as g,bm as v,bk as y}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const k=JSON.stringify(o().languageData),x=o().languageList,C={data(){let e={};return x.forEach((t=>{e[t.key]=[]})),{restaurantsObj:e,formData:{},languageList:x}},inject:["form"],watch:{form:{handler(e){let t={};x.forEach((e=>{t[e.key]=[]})),this.restaurantsObj=t,e.attribute.map(((e,t)=>{let a=JSON.parse(e.attribute_name);x.forEach((r=>{a[r.key]&&this.restaurantsObj[r.key].push({value:a[r.key],index:t,child:e.attribute_value})}))}))},deep:!0,immediate:!0}},methods:{addAttr(){this.form.model.product_attr.push({attribute_name:JSON.parse(k),attribute_value:[JSON.parse(k)]})},handleDelete(e){this.form.model.product_attr.splice(e,1)},handleAdd(e){this.form.model.product_attr[e].attribute_value.push(JSON.parse(k))},handleDecrease(e){this.form.model.product_attr[e].attribute_value.length>1&&this.form.model.product_attr[e].attribute_value.pop()},querySearch(e,t,a){let r=[];r=this.restaurantsObj[a],t(e?r.filter(this.createFilter(e,a)):r)},createFilter(e,t){return this.restaurantsObj[t],t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},selectChange(e,t){x.forEach((a=>{this.form.model.product_attr[t].attribute_name[a.key]=this.restaurantsObj[a.key][e.index].value})),this.form.model.product_attr[t].much=e.child.length,this.form.model.product_attr[t].attribute_value=e.child},checkedForm(){this.form.model.product_attr.map(((e,t)=>{this.$refs["form-"+t].forEach(((e,a)=>{this.$refs["form-"+t][a].validate((e=>{}))}))}))}}},O=e=>(v("data-v-1a1520d9"),e=e(),y(),e),S={class:"common-form mt50"},$={class:"mt16"},V=O((()=>m("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1))),w={class:"product-tips"},D=O((()=>m("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1))),J={class:"product-tips"};const E=i(C,[["render",function(o,i,v,y,k,x){const C=e,O=t,E=u("Delete"),F=a,L=r,N=s,q=u("CirclePlusFilled"),A=u("RemoveFilled"),U=l;return d(),p("div",null,[m("div",S,n(o.$t("商品属性")),1),m("div",null,[m("div",$,[c(O,{label:o.$t("商品属性：")},{default:h((()=>[c(C,{type:"primary",onClick:x.addAttr},{default:h((()=>[f(n(o.$t("添加属性"))+"+",1)])),_:1},8,["onClick"])])),_:1},8,["label"]),x.form.model.product_attr.length>0?(d(!0),p(_,{key:0},j(x.form.model.product_attr,((e,t)=>(d(),b(O,{class:"product-box",key:t},{label:h((()=>[c(F,{class:"delete-icon",onClick:e=>x.handleDelete(t)},{default:h((()=>[c(E)])),_:2},1032,["onClick"])])),default:h((()=>[(d(!0),p(_,null,j(k.languageList,((a,r)=>(d(),b(U,{ref_for:!0,ref:"form-".concat(t),model:e,size:"small",class:"product-attr",key:r},{default:h((()=>[c(O,{prop:"item.attribute_name[items.key]",rules:[{validator:()=>!!e.attribute_name[a.key],message:o.$t("请输入属性名称")}]},{label:h((()=>[V,f(n(o.$t("属性名称：")),1),m("span",w,"（"+n(a.value)+"）",1)])),default:h((()=>[c(L,{"fetch-suggestions":(e,t)=>x.querySearch(e,t,a.key),onSelect:e=>x.selectChange(e,t),class:"inline-input",modelValue:e.attribute_name[a.key],"onUpdate:modelValue":t=>e.attribute_name[a.key]=t,maxlength:"128",placeholder:o.$t("如：温度")},null,8,["fetch-suggestions","onSelect","modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"]),c(O,{class:"product-attr-item"},{label:h((()=>[D,f(n(o.$t("属性：")),1),m("span",J,"("+n(a.value)+")",1)])),default:h((()=>[(d(!0),p(_,null,j(e.attribute_value,((t,r)=>(d(),b(O,{key:r,prop:"item.attribute_value[aindex][items.key]",rules:[{validator:()=>!!e.attribute_value[r][a.key],message:o.$t("请输入属性")}]},{default:h((()=>[c(N,{style:{width:"100px","margin-right":"16px"},maxlength:50,modelValue:e.attribute_value[r][a.key],"onUpdate:modelValue":t=>e.attribute_value[r][a.key]=t,placeholder:o.$t("请输入")},null,8,["modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"])))),128)),c(F,{class:"add-button",onClick:e=>x.handleAdd(t)},{default:h((()=>[c(q)])),_:2},1032,["onClick"]),c(F,{class:"add-button",onClick:e=>x.handleDecrease(t)},{default:h((()=>[c(A)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["model"])))),128))])),_:2},1024)))),128)):g("",!0)])])])}],["__scopeId","data-v-1a1520d9"]]);export{E as default};
