import{E as e,k as s,e as t,l as a,q as o,m as i,n as l,v as r}from"./element-plus-7d357588.js";import{_ as n,A as d}from"./index-f792122d.js";import p from"./Add-16f9d83d.js";import u from"./Edit-7d3c2f30.js";import{ag as c,ap as m,o as h,c as g,a as _,$ as j,T as b,S as w,W as C,P as y,Q as k,a8 as v,X as f,Y as L}from"./@vue-48c55b54.js";import"./@vueuse-c556fb5a.js";import"./lodash-es-c1acaa3d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-e0f4a3e8.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b8ff3004.js";import"./pinia-73166104.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-cd29f9a1.js";const z={class:"user"},S={class:"common-level-rail"},T={class:"product-content"},x={class:"table-wrap"},D={key:0},P={key:1,class:"gray"},A={key:0},E={key:0},V={key:0,class:"red"},q={key:1},M={key:0},N={class:"pagination"};const B=n({components:{Add:p,Edit:u},inject:["reload"],data:()=>({loading:!0,role_loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,formInline:{user:"",region:""},open_add:!1,open_edit:!1,curModel:{},roleList:[]}),created(){this.getTableList()},methods:{handleCurrentChange(e){let s=this;s.curPage=e,s.loading=!0,s.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,s={};s.page=e.curPage,s.list_rows=e.pageSize,d.userList(s,!0).then((s=>{e.loading=!1,e.roleList=s.data.roleList,e.tableData=s.data.list.data,e.totalDataNumber=s.data.list.total})).catch((e=>{}))},addClick(){this.open_add=!0},closeAdd(e){this.open_add=!1,e&&"success"==e.type&&this.getTableList()},editClick(e){this.curModel=e,this.open_edit=!0},closeEdit(e){this.open_edit=!1,e&&"success"==e.type&&this.getTableList()},isShowFunc(s){let t=this;d.setStatus({shop_user_id:s.shop_user_id,status:s.is_status},!0).then((s=>{1==s.code&&(e({message:s.msg,type:"success"}),t.getTableList())})).catch((e=>{t.loading=!1}))},deleteClick(t){let a=this;s.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.loading=!0,d.userDelete({shop_user_id:t.shop_user_id},!0).then((s=>{a.loading=!1,1==s.code?(e({message:"恭喜你，该管理员删除成功",type:"success"}),a.getTableList()):a.loading=!1})).catch((e=>{a.loading=!1}))})).catch((()=>{}))}}},[["render",function(e,s,n,d,p,u){const B=t,F=a,I=o,U=i,J=l,K=c("Add"),Q=c("Edit"),R=m("auth"),W=r;return h(),g("div",z,[_("div",S,[j((h(),b(B,{size:"small",type:"primary",icon:"Plus",onClick:u.addClick},{default:w((()=>[C("添加管理员")])),_:1},8,["onClick"])),[[R,"/auth/user/add"]])]),_("div",T,[_("div",x,[j((h(),b(U,{size:"small",data:p.tableData,border:"",style:{width:"100%"}},{default:w((()=>[y(F,{prop:"shop_user_id",label:"管理员ID"}),y(F,{prop:"user_name",label:"用户名"}),y(F,{prop:"role.role_name",label:"所属角色"},{default:w((e=>[0==e.row.is_super?(h(),g("div",D,[(h(!0),g(k,null,v(e.row.userRole,((e,s)=>(h(),g("span",{class:"mr10 green",key:s},f(e.role.role_name),1)))),128))])):L("",!0),1==e.row.is_super?(h(),g("div",P,"超级管理员")):L("",!0)])),_:1}),y(F,{prop:"user_name",label:"所属门店"},{default:w((e=>[e.row.supplier?(h(),g("span",A,f(e.row.supplier.name),1)):L("",!0)])),_:1}),y(F,{prop:"user_name",label:"门店状态"},{default:w((e=>[e.row.supplier?(h(),g("div",E,[1==e.row.supplier.is_delete?(h(),g("span",V,"已删除")):(h(),g("span",q,"未删除"))])):L("",!0)])),_:1}),y(F,{prop:"is_status",label:"账号状态",width:"80"},{default:w((e=>[e.row.is_super<1||1==e.row.is_super&&1==e.row.user_type?(h(),g("div",M,[y(I,{modelValue:e.row.is_status,"onUpdate:modelValue":s=>e.row.is_status=s,"active-value":0,"inactive-value":1,onChange:s=>u.isShowFunc(e.row),"active-color":"#13ce66","inactive-color":"#cccccc"},null,8,["modelValue","onUpdate:modelValue","onChange"])])):L("",!0)])),_:1}),y(F,{prop:"create_time",label:"添加时间"}),y(F,{fixed:"right",label:"操作",width:"120"},{default:w((e=>[e.row.is_super<1?j((h(),b(B,{key:0,onClick:s=>u.editClick(e.row),type:"text",size:"small"},{default:w((()=>[C("编辑")])),_:2},1032,["onClick"])),[[R,"/auth/user/edit"]]):L("",!0),e.row.is_super<1||1==e.row.is_super&&1==e.row.user_type?j((h(),b(B,{key:1,onClick:s=>u.deleteClick(e.row),type:"text",size:"small"},{default:w((()=>[C("删除")])),_:2},1032,["onClick"])),[[R,"/auth/user/delete"]]):L("",!0)])),_:1})])),_:1},8,["data"])),[[W,p.loading]])]),_("div",N,[y(J,{onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange,background:"","current-page":p.curPage,"page-size":p.pageSize,layout:"total, prev, pager, next, jumper",total:p.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),y(K,{open:p.open_add,roleList:p.roleList,onClose:u.closeAdd},null,8,["open","roleList","onClose"]),y(Q,{open:p.open_edit,roleList:p.roleList,shop_user_id:p.curModel.shop_user_id,onClose:u.closeEdit},null,8,["open","roleList","shop_user_id","onClose"])])}]]);export{B as default};
