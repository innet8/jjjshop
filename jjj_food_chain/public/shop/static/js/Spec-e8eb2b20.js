import{g as e,h as o,d as l,i as t,R as a,m as s,o as r,w as m,x as u}from"./element-plus-c8084613.js";import{_ as d}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as i,c as p,O as n,R as c,a as f,V as _,X as h,S as b,af as g,P as y,a7 as k,W as j}from"./@vue-b57a05a6.js";import"./index-3b8ac39a.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const V={class:"spec-many-type"},w={class:"spec-wrap"},v={key:0};const S={class:"mt16"};const x={components:{Single:d({inject:["form"]},[["render",function(l,t,a,s,r,m){const u=e,d=o;return i(),p("div",null,[n(d,{label:"产品价格：",width:"80",rules:[{required:!0,message:"请填写产品价格"}],prop:"model.sku[0].product_price"},{default:c((()=>[n(u,{type:"number",modelValue:m.form.model.sku[0].product_price,"onUpdate:modelValue":t[0]||(t[0]=e=>m.form.model.sku[0].product_price=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),n(d,{label:"包装费：",rules:[{required:!0,message:"请填写包装费"}],prop:"model.sku[0].bag_price"},{default:c((()=>[n(u,{type:"number",modelValue:m.form.model.sku[0].bag_price,"onUpdate:modelValue":t[1]||(t[1]=e=>m.form.model.sku[0].bag_price=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),n(d,{label:"库存数量：",rules:[{required:!0,message:"请填写库存数量"}],prop:"model.sku[0].stock_num"},{default:c((()=>[n(u,{type:"number",modelValue:m.form.model.sku[0].stock_num,"onUpdate:modelValue":t[2]||(t[2]=e=>m.form.model.sku[0].stock_num=e),class:"max-w460"},null,8,["modelValue"])])),_:1})])}]]),Many:d({components:{Type:d({data:()=>({showAddGroupBtn:!0,showAddGroupForm:!1,addGroupFrom:{specName:"",specValue:""},groupLoading:!1}),inject:["form"],created(){},methods:{onToggleAddGroupForm:function(){let e=this;Array.isArray(e.form.model.sku)||(e.form.model.sku=[]),e.form.model.sku.push({spec_name:"",product_price:"",bag_price:"",stock_num:"",cost_price:0,is_full:0})},onDeleteGroup:function(e){var o=this;l.confirm("删除后不可恢复，确认删除吗？","提示",{type:"warning"}).then((()=>{o.form.model.spec_many.spec_attr.splice(e,1),o.buildSkulist()}))},onDeleteValue:function(e,o){let t=this;t.form.isSpecLocked?this.$ElMessage({message:"本商品正在参加活动，不能删除规格！",type:"warning"}):l.confirm("删除后不可恢复，确认删除吗？","提示",{type:"warning"}).then((()=>{t.form.model.spec_many.spec_attr[e].spec_items.splice(o,1),t.buildSkulist()}))}}},[["render",function(e,o,l,a,s,r){const m=t;return i(),p("div",V,[f("div",w,[r.form.isSpecLocked?h("",!0):(i(),p("div",v,[n(m,{size:"small",class:"el-icon-circle-plus",onClick:r.onToggleAddGroupForm},{default:c((()=>[_("添加规格 ")])),_:1},8,["onClick"])]))])])}],["__scopeId","data-v-c7a058b6"]]),Table:d({components:{},data:()=>({restaurants:[],formData:{},batchData:{product_price:"",line_price:"",stock_num:"",product_weight:""},isupload:!1,spec_index:-1}),inject:["form"],created(){this.formData=this.form},mounted(){},methods:{deleteAttr(e){this.form.model.sku.splice(e,1)},querySearch(e,o){0==this.restaurants.length&&this.formData.spec.forEach(((e,o)=>{this.restaurants.push({value:e.spec_name})}));var l=this.restaurants;o(e?l.filter(this.createFilter(e)):l)},createFilter:e=>o=>0===o.value.toLowerCase().indexOf(e.toLowerCase())}},[["render",function(l,m,u,d,f,g){const y=a,k=o,j=s,V=e,w=t,v=r;return i(),p("div",S,[g.form.model.sku.length>0?(i(),b(k,{key:0,label:"规格明细："},{default:c((()=>[n(v,{size:"",data:g.form.model.sku,border:"",style:{width:"100%","margin-top":"20px"}},{default:c((()=>[n(j,{label:"规格名称"},{default:c((e=>[n(k,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[n(y,{class:"inline-input",modelValue:e.row.spec_name,"onUpdate:modelValue":o=>e.row.spec_name=o,"fetch-suggestions":g.querySearch,placeholder:"请输入内容"},null,8,["modelValue","onUpdate:modelValue","fetch-suggestions"])])),_:2},1024)])),_:1}),n(j,{label:"价格"},{default:c((e=>[n(k,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[n(V,{type:"number",size:"small",prop:"product_price",modelValue:e.row.product_price,"onUpdate:modelValue":o=>e.row.product_price=o},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1}),n(j,{label:"包装费"},{default:c((e=>[n(k,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[n(V,{type:"number",size:"small",prop:"bag_price",modelValue:e.row.bag_price,"onUpdate:modelValue":o=>e.row.bag_price=o},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1}),n(j,{label:"库存"},{default:c((e=>[n(k,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[n(V,{type:"number",size:"small",prop:"stock_num",modelValue:e.row.stock_num,"onUpdate:modelValue":o=>e.row.stock_num=o},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:1}),n(j,{label:""},{default:c((e=>[n(k,{label:"",style:{"margin-bottom":"0"}},{default:c((()=>[n(w,{type:"text",onClick:o=>g.deleteAttr(e.$index)},{default:c((()=>[_("删除")])),_:2},1032,["onClick"])])),_:2},1024)])),_:1})])),_:1},8,["data"])])),_:1})):h("",!0)])}]])}},[["render",function(e,o,l,t,a,s){const r=g("Type"),m=g("Table");return i(),p("div",null,[n(r),n(m)])}]])},data:()=>({restaurants:[]}),inject:["form"],methods:{changeSpec(e){10==e?(this.form.sku=[],this.form.sku[0]={product_price:"",stock_num:"",bag_price:"",cost_price:0,is_full:0}):20==e&&(this.form.sku=[])},querySearch(e,o){let l=this;0==l.restaurants.length&&l.form.unit.forEach(((e,o)=>{l.restaurants.push({value:e.unit_name})}));var t=this.restaurants;o(e?t.filter(this.createFilter(e)):t)},createFilter:e=>o=>0===o.value.toLowerCase().indexOf(e.toLowerCase())}},U=f("div",{class:"common-form mt50"},"规格/库存",-1),L={key:0,class:"red"};const C=d(x,[["render",function(e,l,t,s,r,d){const f=m,V=u,w=o,v=a,S=g("Single"),x=g("Many");return i(),p("div",null,[U,n(w,{label:"库存计算方式："},{default:c((()=>[n(V,{modelValue:d.form.model.deduct_stock_type,"onUpdate:modelValue":l[0]||(l[0]=e=>d.form.model.deduct_stock_type=e)},{default:c((()=>[n(f,{label:10},{default:c((()=>[_("下单减库存")])),_:1}),n(f,{label:20},{default:c((()=>[_("付款减库存")])),_:1})])),_:1},8,["modelValue"])])),_:1}),n(w,{label:"特色分类："},{default:c((()=>[n(V,{modelValue:d.form.model.special_id,"onUpdate:modelValue":l[1]||(l[1]=e=>d.form.model.special_id=e)},{default:c((()=>[n(f,{label:0},{default:c((()=>[_("无")])),_:1}),(i(!0),p(y,null,k(d.form.special,((e,o)=>(i(),b(f,{label:e.category_id,key:o},{default:c((()=>[_(j(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])])),_:1}),n(w,{label:"商品单位：",rules:[{required:!0,message:"请填写商品单位"}],prop:"model.product_unit"},{default:c((()=>[n(v,{class:"inline-input",modelValue:d.form.model.product_unit,"onUpdate:modelValue":l[2]||(l[2]=e=>d.form.model.product_unit=e),placeholder:"如:大份","fetch-suggestions":d.querySearch},null,8,["modelValue","fetch-suggestions"])])),_:1}),n(w,{label:"产品规格："},{default:c((()=>[n(V,{modelValue:d.form.model.spec_type,"onUpdate:modelValue":l[3]||(l[3]=e=>d.form.model.spec_type=e),onChange:d.changeSpec},{default:c((()=>[!d.form.isSpecLocked||d.form.isSpecLocked&&10==d.form.model.spec_type?(i(),b(f,{key:0,label:10},{default:c((()=>[_("单规格")])),_:1})):h("",!0),!d.form.isSpecLocked||d.form.isSpecLocked&&20==d.form.model.spec_type?(i(),b(f,{key:1,label:20},{default:c((()=>[_("多规格")])),_:1})):h("",!0)])),_:1},8,["modelValue","onChange"]),d.form.isSpecLocked?(i(),p("div",L,"此商品正在参加活动，不能修改规格")):h("",!0)])),_:1}),10==d.form.model.spec_type?(i(),b(S,{key:0})):h("",!0),20==d.form.model.spec_type?(i(),b(x,{key:1})):h("",!0)])}]]);export{C as default};
