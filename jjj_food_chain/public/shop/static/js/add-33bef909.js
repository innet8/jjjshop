import{_ as e}from"./GetUser-6f62af63.js";import{_ as l}from"./Upload-22bade2e.js";import{E as a,c as o,d as s,h as r,w as i,e as p,f as u,r as d,s as t,b as m}from"./element-plus-7d357588.js";import{_ as n,R as c}from"./select.region-e106d873.js";import{S as f}from"./supplier-bc0f092e.js";import{_}from"./index-f792122d.js";import{o as g,c as h,P as b,S as V,W as y,a as j,X as v,Y as w,Q as k,a8 as U,T as x,bb as C,b9 as F}from"./@vue-48c55b54.js";/* empty css                                                               */import"./@vueuse-c556fb5a.js";import"./lodash-es-c1acaa3d.js";import"./async-validator-cf877c1f.js";import"./@element-plus-e0f4a3e8.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-b8ff3004.js";import"./pinia-73166104.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-cd29f9a1.js";const q={components:{Upload:l,GetUser:e,Getpoint:n},data:()=>({form:{supplier:{logo:"",business_id:0,user_id:0,store_type:10,address:"",coordinate:"",province_id:"",city_id:"",region_id:"",is_recycle:0,status:0,category_set:10}},loading:!1,open_user:!1,user_info:{},areaList:c,isupload:!1,type:"logo"}),created(){},methods:{onSubmit(){let e=this,l=e.form;e.$refs.form.validate((o=>{o&&(e.loading=!0,f.addSupplier(l,!0).then((l=>{e.loading=!1,1==l.code?(a({message:"恭喜你，门店添加成功",type:"success"}),e.$router.push("/supplier/supplier/index")):e.loading=!1})).catch((l=>{e.loading=!1})))}))},cancelFunc(){this.$router.back(-1)},userClick(){this.open_user=!0},openUpload(e){this.type=e,this.isupload=!0},returnImgsFunc(e){null!=e&&e.length>0&&"logo"==this.type&&(this.form.supplier.logo=e[0].file_path),this.isupload=!1},closeDialogFunc(e){e&&"error"!=e.type&&(this.user_info=e.params[0],this.form.supplier.user_id=e.params[0].user_id),this.open_user=!1},getMapdataFunc(e){this.form.supplier.coordinate=e.data[0].toFixed(6)+","+e.data[1].toFixed(6)},choseFunc(e){this.form.supplier.coordinate=e.location.lat+","+e.location.lng,this.form.supplier.address=e.address},initCity(){this.form.supplier.city_id=""},initRegion(){this.form.supplier.region_id=""}}},G=e=>(C("data-v-8c9d3a22"),e=e(),F(),e),I={class:"product-add"},R=G((()=>j("div",{class:"common-form"},"基本信息",-1))),S=G((()=>j("div",{class:"tips"},"温馨提示：选择后，请勿随意修改，以免造成门店商品数据错乱",-1))),z={key:0,class:"img"},L=["src"],M={key:0,class:"img"},P=["src"],$={class:"ww100 mt16"},D={class:"common-button-wrapper"};const N=_(q,[["render",function(a,c,f,_,C,F){const q=o,G=s,N=r,E=i,O=p,Q=u,T=d,W=t,X=n,Y=m,A=l,B=e;return g(),h("div",I,[b(Y,{size:"small",ref:"form",model:C.form,"label-width":"200px"},{default:V((()=>[R,b(G,{label:"门店名称",prop:"supplier.name",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{class:"max-w460",modelValue:C.form.supplier.name,"onUpdate:modelValue":c[0]||(c[0]=e=>C.form.supplier.name=e),placeholder:"请输入门店名称"},null,8,["modelValue"])])),_:1}),b(G,{label:"账号",prop:"supplier.user_name",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{class:"max-w460",modelValue:C.form.supplier.user_name,"onUpdate:modelValue":c[1]||(c[1]=e=>C.form.supplier.user_name=e),placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),b(G,{label:"登录密码",prop:"supplier.password",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{modelValue:C.form.supplier.password,"onUpdate:modelValue":c[2]||(c[2]=e=>C.form.supplier.password=e),placeholder:"请输入登录密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),b(G,{label:"确认密码",prop:"supplier.confirm_password",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{modelValue:C.form.supplier.confirm_password,"onUpdate:modelValue":c[3]||(c[3]=e=>C.form.supplier.confirm_password=e),placeholder:"请输入确认密码",type:"password",class:"max-w460"},null,8,["modelValue"])])),_:1}),b(G,{label:"联系人",prop:"supplier.link_name",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{class:"max-w460",modelValue:C.form.supplier.link_name,"onUpdate:modelValue":c[4]||(c[4]=e=>C.form.supplier.link_name=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),b(G,{label:"联系电话",prop:"supplier.link_phone",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{class:"max-w460",modelValue:C.form.supplier.link_phone,"onUpdate:modelValue":c[5]||(c[5]=e=>C.form.supplier.link_phone=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),b(G,{label:"店铺类型"},{default:V((()=>[b(E,{modelValue:C.form.supplier.store_type,"onUpdate:modelValue":c[6]||(c[6]=e=>C.form.supplier.store_type=e)},{default:V((()=>[b(N,{label:10},{default:V((()=>[y("分店")])),_:1}),b(N,{label:20},{default:V((()=>[y("直营")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(G,{label:"商品分类"},{default:V((()=>[b(E,{modelValue:C.form.supplier.category_set,"onUpdate:modelValue":c[7]||(c[7]=e=>C.form.supplier.category_set=e)},{default:V((()=>[b(N,{label:10},{default:V((()=>[y("同步主店")])),_:1}),b(N,{label:20},{default:V((()=>[y("分店创建")])),_:1})])),_:1},8,["modelValue"]),S])),_:1}),b(G,{label:"绑定用户"},{default:V((()=>[b(Q,null,{default:V((()=>[b(O,{icon:"Picture",onClick:c[8]||(c[8]=e=>F.userClick())},{default:V((()=>[y("选择用户")])),_:1}),0!=C.form.supplier.user_id?(g(),h("div",z,[j("span",null,"用户昵称："+v(C.user_info.nickName),1),j("img",{src:C.user_info.avatarUrl,width:"100",height:"100"},null,8,L)])):w("",!0)])),_:1})])),_:1}),b(G,{label:"门店logo"},{default:V((()=>[b(Q,null,{default:V((()=>[b(O,{icon:"Picture",onClick:c[9]||(c[9]=e=>F.openUpload("logo"))},{default:V((()=>[y("选择图片")])),_:1}),""!=C.form.supplier.logo?(g(),h("div",M,[j("img",{src:C.form.supplier.logo,width:"100",height:"100"},null,8,P)])):w("",!0)])),_:1})])),_:1}),b(G,{label:"所属区域",prop:"supplier.region_id",rules:[{required:!0,message:" "}]},{default:V((()=>[b(W,{modelValue:C.form.supplier.province_id,"onUpdate:modelValue":c[10]||(c[10]=e=>C.form.supplier.province_id=e),placeholder:"省",onChange:F.initCity},{default:V((()=>[(g(!0),h(k,null,U(C.areaList,((e,l)=>(g(),x(T,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"]),""!=C.form.supplier.province_id?(g(),x(W,{key:0,modelValue:C.form.supplier.city_id,"onUpdate:modelValue":c[11]||(c[11]=e=>C.form.supplier.city_id=e),placeholder:"市",onChange:F.initRegion},{default:V((()=>[(g(!0),h(k,null,U(C.areaList[C.form.supplier.province_id].city,((e,l)=>(g(),x(T,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue","onChange"])):w("",!0),""!=C.form.supplier.city_id?(g(),x(W,{key:1,modelValue:C.form.supplier.region_id,"onUpdate:modelValue":c[12]||(c[12]=e=>C.form.supplier.region_id=e),placeholder:"区"},{default:V((()=>[(g(!0),h(k,null,U(C.areaList[C.form.supplier.province_id].city[C.form.supplier.city_id].region,((e,l)=>(g(),x(T,{label:e.name,value:e.id,key:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):w("",!0)])),_:1}),b(G,{label:"地址",prop:"supplier.address",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{class:"max-w460",modelValue:C.form.supplier.address,"onUpdate:modelValue":c[13]||(c[13]=e=>C.form.supplier.address=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),b(G,{label:"门店坐标",prop:"supplier.coordinate",rules:[{required:!0,message:" "}]},{default:V((()=>[b(q,{disabled:"",modelValue:C.form.supplier.coordinate,"onUpdate:modelValue":c[14]||(c[14]=e=>C.form.supplier.coordinate=e),class:"max-w460"},null,8,["modelValue"]),j("div",$,[b(X,{form:C.form,onGetMapdata:F.getMapdataFunc,onChose:F.choseFunc},null,8,["form","onGetMapdata","onChose"])])])),_:1}),b(G,{label:"商家介绍",prop:"supplier.description"},{default:V((()=>[b(q,{rows:"6",type:"textarea",modelValue:C.form.supplier.description,"onUpdate:modelValue":c[15]||(c[15]=e=>C.form.supplier.description=e),class:"max-w460"},null,8,["modelValue"])])),_:1}),b(G,{label:"状态"},{default:V((()=>[b(E,{modelValue:C.form.supplier.is_recycle,"onUpdate:modelValue":c[16]||(c[16]=e=>C.form.supplier.is_recycle=e)},{default:V((()=>[b(N,{label:0},{default:V((()=>[y("开启")])),_:1}),b(N,{label:1},{default:V((()=>[y("禁止")])),_:1})])),_:1},8,["modelValue"])])),_:1}),b(G,{label:"营业状态"},{default:V((()=>[b(E,{modelValue:C.form.supplier.status,"onUpdate:modelValue":c[17]||(c[17]=e=>C.form.supplier.status=e)},{default:V((()=>[b(N,{label:0},{default:V((()=>[y("营业中")])),_:1}),b(N,{label:1},{default:V((()=>[y("停止营业")])),_:1})])),_:1},8,["modelValue"])])),_:1}),j("div",D,[b(O,{size:"small",type:"info",onClick:F.cancelFunc},{default:V((()=>[y("取消")])),_:1},8,["onClick"]),b(O,{size:"small",type:"primary",onClick:F.onSubmit,loading:C.loading},{default:V((()=>[y("提交")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]),C.isupload?(g(),x(A,{key:0,isupload:C.isupload,type:C.type,onReturnImgs:F.returnImgsFunc},{default:V((()=>[y("上传图片")])),_:1},8,["isupload","type","onReturnImgs"])):w("",!0),b(B,{is_open:C.open_user,onClose:c[18]||(c[18]=e=>F.closeDialogFunc(e,"add"))},null,8,["is_open"])])}],["__scopeId","data-v-8c9d3a22"]]);export{N as default};
