import{i as e,h as t,j as a,S as r,n as s,e as o}from"./element-plus-bf694ad1.js";import{l}from"./index-263d74f8.js";import{_ as i}from"./_plugin-vue_export-helper-1b428a4d.js";import{af as p,o as d,c as m,a as n,W as c,O as u,R as f,V as h,P as j,a7 as g,S as y,X as _,bm as b,bk as v}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const k=JSON.stringify(l().languageData),x=l().languageList,$={data(){let e={};return x.forEach((t=>{e[t.key]=[]})),{languageList:x,restaurants:[],restaurantsObj:e,formData:{feed:[]}}},inject:{form:{default:()=>{}}},watch:{form:{handler(e){let t={};x.forEach((e=>{t[e.key]=[]})),this.restaurantsObj=t,e.feed.map(((e,t)=>{let a=JSON.parse(e.feed_name);x.forEach((r=>{a[r.key]&&this.restaurantsObj[r.key].push({value:a[r.key],index:t,price:e.price})}))}))},deep:!0,immediate:!0}},methods:{addIngredients(){this.form.model.product_feed.push({feed_name:JSON.parse(k),price:null})},handleDelete(e){this.form.model.product_feed.splice(e,1)},querySearch(e,t,a){let r=[];r=this.restaurantsObj[a],t(e?r.filter(this.createFilter(e,a)):r)},createFilter(e,t){return this.restaurantsObj[t],t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},selectChange(e,t){this.form.model.product_feed[t].price=e.price,x.forEach((a=>{this.form.model.product_feed[t].feed_name[a.key]=this.restaurantsObj[a.key][e.index].value}))},checkedForm(){this.form.model.product_feed.map(((e,t)=>{this.$refs["form-"+t].forEach(((e,a)=>{this.$refs["form-"+t][a].validate((e=>{}))}))}))}}},O=e=>(b("data-v-11a7c110"),e=e(),v(),e),C={class:"common-form mt50"},S={class:"mt16"},V=O((()=>n("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1))),w={class:"product-tips"},D=O((()=>n("span",{style:{color:"var(--el-color-danger)",margin:"0  4px 0 0 !important"}},"*",-1)));const E=i($,[["render",function(l,i,b,v,k,x){const $=e,O=t,E=p("Delete"),L=a,q=r,I=s,J=o;return d(),m("div",null,[n("div",C,c(l.$t("商品加料")),1),n("div",null,[n("div",S,[u(O,{label:l.$t("商品加料：")},{default:f((()=>[u($,{type:"primary",onClick:x.addIngredients},{default:f((()=>[h(c(l.$t("添加加料"))+"+",1)])),_:1},8,["onClick"])])),_:1},8,["label"]),x.form.model.product_feed.length>0?(d(!0),m(j,{key:0},g(x.form.model.product_feed,((e,t)=>(d(),y(O,{class:"product-box mb18",key:t},{label:f((()=>[u(L,{class:"delete-icon",onClick:e=>x.handleDelete(t)},{default:f((()=>[u(E)])),_:2},1032,["onClick"])])),default:f((()=>[u(J,{ref_for:!0,ref:"form-".concat(t),model:e,class:"product-attr"},{default:f((()=>[(d(!0),m(j,null,g(k.languageList,((a,r)=>(d(),y(O,{key:r,prop:"item.feed_name[items.key]",rules:[{validator:()=>!!e.feed_name[a.key],message:l.$t("请输入加料名称")}]},{label:f((()=>[V,h(c(l.$t("加料名称：")),1),n("span",w,"("+c(a.value)+")",1)])),default:f((()=>[u(q,{"fetch-suggestions":(e,t)=>x.querySearch(e,t,a.key),onSelect:e=>x.selectChange(e,t),class:"inline-input",modelValue:e.feed_name[a.key],"onUpdate:modelValue":t=>e.feed_name[a.key]=t,maxlength:"128",placeholder:l.$t("如：番茄酱")},null,8,["fetch-suggestions","onSelect","modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["prop","rules"])))),128)),u(O,{label:l.$t("价格："),prop:"item.price",rules:[{validator:()=>""!=e.price,message:l.$t("请输入价格")}]},{label:f((()=>[D,h(c(l.$t("价格：")),1)])),default:f((()=>[u(I,{controls:!1,min:0,max:1e6,placeholder:l.$t("请输入价格"),modelValue:e.price,"onUpdate:modelValue":t=>e.price=t,modelModifiers:{number:!0}},null,8,["placeholder","modelValue","onUpdate:modelValue"])])),_:2},1032,["label","prop","rules"])])),_:2},1032,["model"])])),_:2},1024)))),128)):_("",!0)])])])}],["__scopeId","data-v-11a7c110"]]);export{E as default};
