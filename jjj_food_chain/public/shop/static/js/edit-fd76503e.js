import{h as e,g as r,i as l,w as o,x as i,e as s,u as a}from"./element-plus-bf694ad1.js";import{_ as t}from"./Upload-a7a3a82e.js";import{L as p}from"./live-84d3e297.js";import{_ as m}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as u,S as d,R as c,a as n,O as g,V as _,c as h,X as f,bm as j,bk as y}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./file-4a1d234a.js";import"./index-417beca7.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";import"./vue-cropperjs-a45f7801.js";import"./vue-944abb17.js";import"./cropperjs-86d7592f.js";const F={components:{Upload:t},data:()=>({isupload:!1,productName:"",product_img:"",ruleForm:{name:"",cover_img:"",price_type:1,price:"",price2:"",product_id:"",shop_supplier_id:0},rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:3,max:17,message:"长度在 3 到 17 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"change"}]},loading:!1,isproduct:!1,exclude_ids:[],imageType:"",formLabelWidth:"120px",dialogVisible:!1,product_type:0,edit_type:""}),props:["open_edit","editform"],watch:{open_edit:function(e,r){this.dialogVisible=this.open_edit,this.ruleForm=this.editform}},created(){},methods:{closeFunc(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})},submitForm(e){let r=this;r.loading=!0,r.$refs[e].validate((e=>{if(!e)return r.loading=!1,!1;{let e=r.ruleForm;p.editProduct(e,!0).then((e=>{r.loading=!1,this.$ElMessage({message:"编辑成功",type:"success"}),this.closeFunc()})).catch((e=>{r.loading=!1}))}}))},openUpload(e){this.imageType=e,this.isupload=!0},cancelFunc(e){this.$emit("close",{type:"error"})},returnImgsFunc(e){null!=e&&e.length>0&&(this.ruleForm.cover_img=e[0].file_path),this.isupload=!1}}},b=["src"],V=["src"],v=(e=>(j("data-v-1f8ceece"),e=e(),y(),e))((()=>n("div",{class:"gray9"},"建议尺寸300*300,大小不超过2M",-1))),x={class:"dialog-footer"};const w=m(F,[["render",function(p,m,j,y,F,w){const k=e,U=r,q=l,I=t,$=o,z=i,C=s,D=a;return u(),d(D,{title:"编辑商品","modal-append-to-body":!1,"before-close":w.closeFunc,modelValue:F.dialogVisible,"onUpdate:modelValue":m[10]||(m[10]=e=>F.dialogVisible=e),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"500px"},{footer:c((()=>[n("div",x,[g(q,{size:"small",onClick:m[8]||(m[8]=e=>w.closeFunc())},{default:c((()=>[_("取 消")])),_:1}),g(q,{type:"primary",onClick:m[9]||(m[9]=e=>w.submitForm("ruleForm")),loading:F.loading},{default:c((()=>[_("立即提交")])),_:1},8,["loading"])])])),default:c((()=>[g(C,{size:"small",model:F.ruleForm,rules:F.rules,ref:"ruleForm","label-width":"100px",class:"demo-ruleForm"},{default:c((()=>[g(k,null,{default:c((()=>[""!=F.product_img?(u(),h("img",{key:0,src:F.product_img,class:"mt10",width:120},null,8,b)):f("",!0)])),_:1}),g(k,{label:"商品名称",prop:"name"},{default:c((()=>[g(U,{modelValue:F.ruleForm.name,"onUpdate:modelValue":m[0]||(m[0]=e=>F.ruleForm.name=e)},null,8,["modelValue"])])),_:1}),g(k,{label:"商品封面图",prop:"cover_img",rules:[{required:!0,message:"请上传商品封面图"}]},{default:c((()=>[n("div",null,[g(q,{type:"primary",onClick:m[1]||(m[1]=e=>w.openUpload("cover"))},{default:c((()=>[_("上传图片")])),_:1}),""!=F.ruleForm.cover_img?(u(),h("img",{key:0,src:F.ruleForm.cover_img,class:"mt10",width:120},null,8,V)):f("",!0),v,F.isupload?(u(),d(I,{key:1,isupload:F.isupload,onReturnImgs:w.returnImgsFunc},{default:c((()=>[_("上传图片")])),_:1},8,["isupload","onReturnImgs"])):f("",!0)])])),_:1}),g(k,{label:"价格类型",prop:"type"},{default:c((()=>[g(z,{modelValue:F.ruleForm.price_type,"onUpdate:modelValue":m[2]||(m[2]=e=>F.ruleForm.price_type=e)},{default:c((()=>[g($,{label:1},{default:c((()=>[_("一口价")])),_:1}),g($,{label:2},{default:c((()=>[_("价格区间")])),_:1}),g($,{label:3},{default:c((()=>[_("折扣价")])),_:1})])),_:1},8,["modelValue"])])),_:1}),1==F.ruleForm.price_type?(u(),d(k,{key:0,label:"价格：",prop:"price",rules:[{required:!0,message:"请输入最低价格",trigger:"change"}]},{default:c((()=>[g(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":m[3]||(m[3]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入价格"},null,8,["modelValue"])])),_:1})):f("",!0),2==F.ruleForm.price_type?(u(),d(k,{key:1,label:"价格：",prop:"price",rules:[{required:!0,message:"请输入最低价格",trigger:"change"}]},{default:c((()=>[g(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":m[4]||(m[4]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入最低价格"},null,8,["modelValue"])])),_:1})):f("",!0),2==F.ruleForm.price_type?(u(),d(k,{key:2,label:"价格：",prop:"price2",rules:[{required:!0,message:"请输入最高价格",trigger:"change"}]},{default:c((()=>[g(U,{type:"text",min:"0",modelValue:F.ruleForm.price2,"onUpdate:modelValue":m[5]||(m[5]=e=>F.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"请输入最高价格"},null,8,["modelValue"])])),_:1})):f("",!0),3==F.ruleForm.price_type?(u(),d(k,{key:3,prop:"price",rules:[{required:!0,message:"请输入原价",trigger:"change"}],label:"价格："},{default:c((()=>[g(U,{type:"text",min:"0",modelValue:F.ruleForm.price,"onUpdate:modelValue":m[6]||(m[6]=e=>F.ruleForm.price=e),class:"mb16 max-w460",placeholder:"请输入原价"},null,8,["modelValue"])])),_:1})):f("",!0),3==F.ruleForm.price_type?(u(),d(k,{key:4,prop:"price2",rules:[{required:!0,message:"请输入现价",trigger:"change"}],label:"价格："},{default:c((()=>[g(U,{type:"text",min:"0",modelValue:F.ruleForm.price2,"onUpdate:modelValue":m[7]||(m[7]=e=>F.ruleForm.price2=e),class:"mb16 max-w460",placeholder:"请输入现价"},null,8,["modelValue"])])),_:1})):f("",!0)])),_:1},8,["model","rules"])])),_:1},8,["before-close","modelValue"])}],["__scopeId","data-v-1f8ceece"]]);export{w as default};
