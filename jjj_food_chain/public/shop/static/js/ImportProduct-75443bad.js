import{E as e,m as t,i,o as a,B as o,u as s,v as l}from"./element-plus-c8084613.js";import{L as r}from"./live-7d159e82.js";import{_ as n}from"./_plugin-vue_export-helper-1b428a4d.js";import{o as p,S as d,R as m,a as c,O as u,V as h,X as g,_ as j}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./index-7350a3a3.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";const b={class:"product-content"},C={class:"table-wrap"},f=["src"],y={class:"pagination"},_={class:"dialog-footer"};const S=n({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},categoryList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null,excludeIds:[]}),props:["open_import","islist","room_id"],created(){this.dialogVisible=this.open_import,this.getData()},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,t.room_id=e.room_id,r.listProduct(t,!0).then((t=>{1==t.code&&(e.loading=!1,e.excludeIds=t.data.excludeIds,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?t.data.list.data.forEach((t=>{e.excludeIds.indexOf(t.goods_id)>-1?t.noChoose=!1:t.noChoose=!0})):e.islist||t.data.list.data.forEach((e=>{e.noChoose=!0})),e.productList=t.data.list.data,e.totalDataNumber=t.data.list.total)})).catch((e=>{}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let t=this,i=null;t.multipleSelection.length<1?e({message:"请至少选择一件产品商品！",type:"error"}):(t.islist&&void 0!==t.islist?(t.multipleSelection.forEach((e=>{e.image=e.imagePath})),i=t.multipleSelection):(i=t.multipleSelection[0],i.image=i.imagePath),t.params=i,t.type="success",t.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(e,r,n,S,v,x){const z=t,w=i,k=a,V=o,I=s,D=l;return p(),d(I,{title:"选择商品",modelValue:v.dialogVisible,"onUpdate:modelValue":r[1]||(r[1]=e=>v.dialogVisible=e),onClose:x.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-append-to-body":!0,"append-to-body":!0,width:"900px"},{footer:m((()=>[c("div",_,[u(w,{size:"small",onClick:r[0]||(r[0]=e=>v.dialogVisible=!1)},{default:m((()=>[h("取 消")])),_:1}),n.islist?(p(),d(w,{key:0,size:"small",type:"primary",onClick:x.addClerk},{default:m((()=>[h("确 定")])),_:1},8,["onClick"])):g("",!0)])])),default:m((()=>[c("div",b,[c("div",C,[j((p(),d(k,{size:"small",data:v.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:x.tableCurrentChange},{default:m((()=>[u(z,{width:"70",label:"商品图片"},{default:m((e=>[c("img",{src:e.row.cover_img,width:"30",height:"30"},null,8,f)])),_:1}),u(z,{prop:"name",label:"商品名称"}),u(z,{prop:"price_type_text",label:"价格类型"}),u(z,{prop:"price_text",label:"价格",width:"200"}),u(z,{prop:"create_time",width:"140",label:"添加时间"}),n.islist?(p(),d(z,{key:0,type:"selection",selectable:x.selectableFunc,width:"44"},null,8,["selectable"])):g("",!0),n.islist?g("",!0):(p(),d(z,{key:1,width:"80",label:"单选"},{default:m((e=>[e.row.noChoose?(p(),d(w,{key:0,size:"small",onClick:t=>x.SingleFunc(e.row)},{default:m((()=>[h("选择")])),_:2},1032,["onClick"])):(p(),d(w,{key:1,size:"small",disabled:""},{default:m((()=>[h("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[D,v.loading]])]),c("div",y,[u(V,{onSizeChange:x.handleSizeChange,onCurrentChange:x.handleCurrentChange,background:"","current-page":v.curPage,"page-sizes":[2,10,20,50,100],"page-size":v.pageSize,layout:"total, prev, pager, next, jumper",total:v.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}],["__scopeId","data-v-31d5dcc6"]]);export{S as default};
