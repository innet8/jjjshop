import{i as t,e as o,v as e}from"./element-plus-c8084613.js";import{P as s}from"./points-402ec6f4.js";import i from"./Basic-7ba9903b.js";import r from"./Spec-73f23c94.js";import a from"./Content-5fe71a12.js";import p from"./Buyset-1d7b48d1.js";import{f as d}from"./index-2b27d1a3.js";import{_ as m}from"./_plugin-vue_export-helper-1b428a4d.js";import{af as n,_ as c,o as l,c as u,S as j,R as f,O as _,a as g,V as h,X as v}from"./@vue-b57a05a6.js";import"./lodash-es-234e1c00.js";import"./async-validator-cf877c1f.js";import"./@vueuse-793cab0b.js";import"./@element-plus-ce7ae957.js";import"./dayjs-33a066dd.js";import"./call-bind-912d4e9d.js";import"./get-intrinsic-878e88ff.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-afbcd6f2.js";import"./hasown-c3b72c9b.js";import"./set-function-length-a0a50b12.js";import"./define-data-property-da2cc9a9.js";import"./has-property-descriptors-2aeb73fe.js";import"./gopd-15a2da42.js";import"./@popperjs-b78c3215.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./Upload-42b8509b.js";import"./file-babb78aa.js";import"./vue-cropperjs-a45f7801.js";import"./vue-944abb17.js";import"./cropperjs-86d7592f.js";import"./vuedraggable-a472da53.js";import"./sortablejs-b4c145c4.js";import"./vue-router-24c2a4a1.js";import"./pinia-6eed225f.js";import"./axios-b48e0a85.js";import"./qs-49804a56.js";import"./side-channel-7f79a019.js";import"./object-inspect-9ade9731.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./vue-ueditor-wrap-5c153e91.js";import"./vue-i18n-8b8412df.js";import"./@intlify-658c8624.js";import"./UE-a7f1449c.js";const y={class:"product-add"},b={class:"common-button-wrapper"};const S=m({components:{Basic:i,Spec:r,Content:a,Buyset:p},data:()=>({old_audit:20,product_id:0,scene:"edit",loading:!0,save_loading:!1,form:{model:{},category:[],feed:[],special:[],gradeList:[],specData:null,isSpecLocked:!1},model:{product_name:"",product_price:"",product_points:"",category_id:null,file_path:"",image_id:"",content:"",product_status:10,product_sort:100,limit_num:0,delivery_set:[10,20],express_price:"",product_stock:""}}),provide:function(){return{form:this.form}},created(){this.product_id=this.$route.query.product_id,this.scene=this.$route.query.scene,this.getData()},methods:{getData:function(){let t=this;s.getEditProduct({product_id:t.product_id},!0).then((o=>{t.loading=!1,Object.assign(t.form,o.data),t.form.model.product_status=o.data.model.product_status.value})).catch((o=>{t.loading=!1}))},convertJson(t){let o={};return t.forEach((t=>{o[t.grade_id]=t.product_equity})),JSON.stringify(o)},onSubmit:function(){let t=this;t.$refs.form.validate((o=>{if(d(t.model,t.form.model),o){let o=d(t.model,t.form.model);o.product_id=t.product_id,t.save_loading=!0,s.editProduct({product_id:t.product_id,params:JSON.stringify(o)},!0).then((o=>{t.save_loading=!1,this.$ElMessage({message:"保存成功",type:"success"}),t.cancelFunc()})).catch((o=>{t.save_loading=!1}))}}))},ImgKeepId(t){let o=[];for(let e=0,s=t.length;e<s;e++){let s={image_id:t[e].image_id,file_id:t[e].file_id};o.push(s)}return o},Draft(){this.form.model.product_status=30,this.onSubmit()},cancelFunc(){this.$router.back(-1)}}},[["render",function(s,i,r,a,p,d){const m=n("Basic"),S=n("Spec"),k=n("Content"),C=n("Buyset"),x=t,B=o,q=e;return c((l(),u("div",y,[p.loading?v("",!0):(l(),j(B,{key:0,size:"small",ref:"form",model:p.form,"label-position":"top","label-width":"180px"},{default:f((()=>[_(m),_(S),_(k),_(C),g("div",b,[_(x,{size:"small",onClick:d.cancelFunc},{default:f((()=>[h("取消")])),_:1},8,["onClick"]),_(x,{size:"small",type:"primary",onClick:d.onSubmit,loading:p.loading},{default:f((()=>[h("修改")])),_:1},8,["onClick","loading"])])])),_:1},8,["model"]))])),[[q,p.loading]])}],["__scopeId","data-v-7c6d4abd"]]);export{S as default};
