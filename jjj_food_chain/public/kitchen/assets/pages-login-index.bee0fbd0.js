import{_ as a,J as e,A as s,K as l,C as t,L as o,o as d,c as i,w as n,d as u,e as r,t as c,f,M as p,N as g,O as _,P as m,l as v,m as h,u as x,r as y,Q as b,j as V,$ as k,R as w,T as C,U as j,V as I,W as P,X as T,D as U,Y as $,B as z}from"./index-1b4d9c9a.js";import{g as F}from"./index.4dba0731.js";const O=a({__name:"set-language",setup(a){const x=e((()=>g[_()])),y=a=>{a&&a!==_()&&m(a)};return(a,e)=>{const g=s(t("uni-icons"),l),_=v,m=s(t("uni-data-select"),o),b=h;return d(),i(b,{class:"ti-language"},{default:n((()=>[u(g,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),u(_,{class:"ti-language-text"},{default:n((()=>[r(c(f(x)),1)])),_:1}),u(g,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),u(b,{class:"ti-language-select"},{default:n((()=>[u(m,{clear:!1,localdata:f(p)()||[],onChange:y},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-6b3feecf"]]),R=a({__name:"index",setup(a){x();const l=y(!1),o=y({address:"",port:8080,key:"admin"});b((()=>{o.value.address=F()}));const p=e((()=>!o.value.address||!o.value.port)),g=async()=>{var a,e,s,t;if(l.value)return;const d={...o.value};if(!d.address)return V({title:k("请输入地址"),icon:"none"});if(!d.port)return V({title:k("请输入端口"),icon:"none"});try{l.value=!0;const i=await w(C(`${null==d?void 0:d.address}:${d.port}`),{key:o.value.key,address:o.value.address,port:o.value.port});j(d),I(null==(e=null==(a=i.data)?void 0:a.shop)?void 0:e.app_id),P(null==(t=null==(s=i.data)?void 0:s.shop)?void 0:t.shop_supplier_id),setTimeout((()=>{T({url:"/pages/index/index"})}),100)}catch(i){V({title:k("绑定失败"),icon:"none"})}finally{l.value=!1}},_=()=>{o.value={ip:"",port:8080}};return(a,e)=>{const m=U,v=h,x=$,y=s(t("ti-button"),z);return d(),i(v,{class:"ti-login"},{default:n((()=>[u(v,{class:"ti-login-img"},{default:n((()=>[u(m,{src:"/assets/bg-93598f2d.png",mode:"widthFix"})])),_:1}),u(v,{class:"ti-login-form"},{default:n((()=>[u(v,{class:"ti-form-box"},{default:n((()=>[u(v,{class:"ti-form-head"},{default:n((()=>[u(v,{class:"ti-login-logo"},{default:n((()=>[u(m,{src:"/assets/login_logo-83575c4a.svg",mode:"widthFix"})])),_:1}),u(v,{class:"ti-login-title"},{default:n((()=>[r(c(f(k)("厨显端")),1)])),_:1})])),_:1}),u(v,{class:"ti-form-setting"},{default:n((()=>[u(v,{class:"ti-form-title"},{default:n((()=>[r(c(f(k)("服務器連接地址")),1)])),_:1}),u(v,{class:"ti-form-input"},{default:n((()=>[u(x,{class:"uni-input",focus:"",modelValue:o.value.address,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.address=a),placeholder:f(k)("請輸入IP")},null,8,["modelValue","placeholder"]),u(v,{class:"uni-point"},{default:n((()=>[r(":")])),_:1}),u(x,{class:"uni-input",focus:"",modelValue:o.value.port,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.port=a),placeholder:f(k)("請輸入PORT")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),u(v,{class:"ti-form-btn"},{default:n((()=>[u(y,{loading:l.value,onClick:_},{default:n((()=>[r(c(f(k)("重置")),1)])),_:1},8,["loading"]),u(y,{type:"primary",loading:l.value,disabled:f(p),onClick:g},{default:n((()=>[r(c(f(k)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1}),u(v,{class:"ti-language-box"},{default:n((()=>[u(O)])),_:1})])),_:1})}}},[["__scopeId","data-v-f00175f7"]]);export{R as default};
