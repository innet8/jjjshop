import{_ as a,r as e,u as l,c as s,a as t,b as i,d as o,o as d,e as u,w as n,f as c,g as r,t as f,h as p,i as v,F as g,j as m,l as _,n as k,k as y,m as h,p as x,q as b,s as C,v as w,x as V,y as I,z as U,A as j,B as z,$ as F,C as L,D as $,E as R,G as q,H as A,I as B,J as D,K as E}from"./index-da0d2eab.js";import{g as G}from"./index.17897208.js";const H=""+new URL("bg-93598f2d.png",import.meta.url).href,J=""+new URL("login_logo-83575c4a.svg",import.meta.url).href,K=a({__name:"set-language",setup(a){const I=e(!1),{changeLocale:U}=l(),j=s((()=>x[b()]));return(a,e)=>{const l=t(o("uni-icons"),i),s=C,x=w,z=V;return d(),u(x,{class:"ti-language"},{default:n((()=>[c(l,{"custom-prefix":"iconfont",type:"icon-global",size:"16",onClick:e[0]||(e[0]=()=>{I.value=!I.value})}),c(s,{class:"ti-language-text",onClick:e[1]||(e[1]=()=>{I.value=!I.value})},{default:n((()=>[r(f(p(j)),1)])),_:1}),c(l,{type:"right",size:"16",style:{transform:"rotate(90deg)"},onClick:e[2]||(e[2]=()=>{I.value=!I.value})}),I.value?(d(),u(x,{key:0,class:"ti-language-select"},{default:n((()=>[(d(!0),v(g,null,m(p(_)(),((a,e)=>(d(),u(x,{class:"ti-item-box",key:e},{default:n((()=>[c(x,{class:k(a.disable?"ti-item-content-select":"ti-item-content"),onClick:e=>{var l;(l=a.value)&&l!==b()&&(I.value=!1,U(l))}},{default:n((()=>[c(x,{class:"ti-content-title"},{default:n((()=>[r(f(a.text),1)])),_:2},1024),a.disable?(d(),u(z,{key:0,class:"ti-content-tick",src:y})):h("",!0)])),_:2},1032,["class","onClick"])])),_:2},1024)))),128))])),_:1})):h("",!0)])),_:1})}}},[["__scopeId","data-v-1efaad88"]]),T=a({__name:"index",setup(a){I();const l=e(!1),i=e({address:"",port:8080,key:"111"});U((()=>{i.value.address=G(),j({success:a=>{i.value.key=a.deviceId}})}));const v=s((()=>!i.value.address||!i.value.port)),g=async()=>{var a,e,s,t;if(l.value)return;const o={...i.value};if(!o.address)return z({title:F("请输入服務器地址"),icon:"none"});if(!o.port)return z({title:F("请输入端口"),icon:"none"});try{l.value=!0;const d=await L($(`${null==o?void 0:o.address}:${o.port}`),{key:i.value.key,address:i.value.address,port:i.value.port});R(o),q(null==(e=null==(a=d.data)?void 0:a.shop)?void 0:e.app_id),A(null==(t=null==(s=d.data)?void 0:s.shop)?void 0:t.shop_supplier_id),setTimeout((()=>{B({url:"/pages/index/index"})}),100)}catch(d){z({title:F("绑定失败"),icon:"none"})}finally{l.value=!1}},m=()=>{i.value={address:"",port:8080,key:"111"},i.value.address=G(),j({success:a=>{i.value.key=a.deviceId}})};return(a,e)=>{const s=V,_=w,k=D,y=t(o("ti-button"),E);return d(),u(_,{class:"ti-login"},{default:n((()=>[c(_,{class:"ti-login-img"},{default:n((()=>[c(s,{src:H,mode:"widthFix"})])),_:1}),c(_,{class:"ti-login-form"},{default:n((()=>[c(_,{class:"ti-form-box"},{default:n((()=>[c(_,{class:"ti-form-head"},{default:n((()=>[c(_,{class:"ti-login-logo"},{default:n((()=>[c(s,{src:J,mode:"widthFix"})])),_:1}),c(_,{class:"ti-login-title"},{default:n((()=>[r(f(p(F)("厨显端")),1)])),_:1})])),_:1}),c(_,{class:"ti-form-setting"},{default:n((()=>[c(_,{class:"ti-form-title"},{default:n((()=>[r(f(p(F)("服務器連接地址")),1)])),_:1}),c(_,{class:"ti-form-input"},{default:n((()=>[c(k,{class:"uni-input",modelValue:i.value.address,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value.address=a),placeholder:p(F)("服務器地址")},null,8,["modelValue","placeholder"]),c(_,{class:"uni-point"},{default:n((()=>[r(":")])),_:1}),c(k,{class:"uni-input",modelValue:i.value.port,"onUpdate:modelValue":e[1]||(e[1]=a=>i.value.port=a),placeholder:p(F)("端口")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),c(_,{class:"ti-form-btn"},{default:n((()=>[c(y,{loading:l.value,onClick:m},{default:n((()=>[r(f(p(F)("重置")),1)])),_:1},8,["loading"]),c(y,{type:"primary",loading:l.value,disabled:p(v),onClick:g},{default:n((()=>[r(f(p(F)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1}),c(_,{class:"ti-language-box"},{default:n((()=>[c(K)])),_:1})])),_:1})}}},[["__scopeId","data-v-993de041"]]);export{T as default};
