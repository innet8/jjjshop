import{_ as a,J as e,A as l,K as s,C as t,L as o,o as d,c as i,w as n,d as u,e as r,t as c,f,M as p,N as g,O as m,P as _,l as v,m as h,u as x,r as y,Q as b,j as V,$ as w,R as k,T as U,U as C,V as R,W as j,X as I,D as L,Y as P,B as T}from"./index-32083209.js";import{g as $}from"./index.0f7c17ff.js";const z=""+new URL("bg-93598f2d.png",import.meta.url).href,F=""+new URL("login_logo-83575c4a.svg",import.meta.url).href,O=a({__name:"set-language",setup(a){const x=e((()=>g[m()])),y=a=>{a&&a!==m()&&_(a)};return(a,e)=>{const g=l(t("uni-icons"),s),m=v,_=l(t("uni-data-select"),o),b=h;return d(),i(b,{class:"ti-language"},{default:n((()=>[u(g,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),u(m,{class:"ti-language-text"},{default:n((()=>[r(c(f(x)),1)])),_:1}),u(g,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),u(b,{class:"ti-language-select"},{default:n((()=>[u(_,{clear:!1,localdata:f(p)()||[],onChange:y},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-6b3feecf"]]),A=a({__name:"index",setup(a){x();const s=y(!1),o=y({address:"",port:8080,key:"admin"});b((()=>{o.value.address=$()}));const p=e((()=>!o.value.address||!o.value.port)),g=async()=>{var a,e,l,t;if(s.value)return;const d={...o.value};if(!d.address)return V({title:w("请输入地址"),icon:"none"});if(!d.port)return V({title:w("请输入端口"),icon:"none"});try{s.value=!0;const i=await k(U(`${null==d?void 0:d.address}:${d.port}`),{key:o.value.key,address:o.value.address,port:o.value.port});C(d),R(null==(e=null==(a=i.data)?void 0:a.shop)?void 0:e.app_id),j(null==(t=null==(l=i.data)?void 0:l.shop)?void 0:t.shop_supplier_id),setTimeout((()=>{I({url:"/pages/index/index"})}),100)}catch(i){V({title:w("绑定失败"),icon:"none"})}finally{s.value=!1}},m=()=>{o.value={ip:"",port:8080}};return(a,e)=>{const _=L,v=h,x=P,y=l(t("ti-button"),T);return d(),i(v,{class:"ti-login"},{default:n((()=>[u(v,{class:"ti-login-img"},{default:n((()=>[u(_,{src:z,mode:"widthFix"})])),_:1}),u(v,{class:"ti-login-form"},{default:n((()=>[u(v,{class:"ti-form-box"},{default:n((()=>[u(v,{class:"ti-form-head"},{default:n((()=>[u(v,{class:"ti-login-logo"},{default:n((()=>[u(_,{src:F,mode:"widthFix"})])),_:1}),u(v,{class:"ti-login-title"},{default:n((()=>[r(c(f(w)("厨显端")),1)])),_:1})])),_:1}),u(v,{class:"ti-form-setting"},{default:n((()=>[u(v,{class:"ti-form-title"},{default:n((()=>[r(c(f(w)("服務器連接地址")),1)])),_:1}),u(v,{class:"ti-form-input"},{default:n((()=>[u(x,{class:"uni-input",focus:"",modelValue:o.value.address,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.address=a),placeholder:f(w)("請輸入IP")},null,8,["modelValue","placeholder"]),u(v,{class:"uni-point"},{default:n((()=>[r(":")])),_:1}),u(x,{class:"uni-input",focus:"",modelValue:o.value.port,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.port=a),placeholder:f(w)("請輸入PORT")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),u(v,{class:"ti-form-btn"},{default:n((()=>[u(y,{loading:s.value,onClick:m},{default:n((()=>[r(c(f(w)("重置")),1)])),_:1},8,["loading"]),u(y,{type:"primary",loading:s.value,disabled:f(p),onClick:g},{default:n((()=>[r(c(f(w)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1}),u(v,{class:"ti-language-box"},{default:n((()=>[u(O)])),_:1})])),_:1})}}},[["__scopeId","data-v-f00175f7"]]);export{A as default};
