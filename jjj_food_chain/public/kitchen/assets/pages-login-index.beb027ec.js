import{_ as a,J as e,K as s,A as l,L as t,C as o,M as d,o as i,c as n,w as u,d as r,e as c,t as f,f as p,N as g,O as _,P as m,l as v,m as h,u as x,r as y,Q as b,j as V,$ as k,R as w,T as C,U as j,V as I,W as P,X as T,D as U,Y as $,B as z}from"./index-3a9d0a93.js";import{g as F}from"./index.b6cc1abe.js";const L=a({__name:"set-language",setup(a){const{changeLocale:x}=e(),y=s((()=>_[m()])),b=a=>{a&&a!==m()&&x(a)};return(a,e)=>{const s=l(o("uni-icons"),t),_=v,m=l(o("uni-data-select"),d),x=h;return i(),n(x,{class:"ti-language"},{default:u((()=>[r(s,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),r(_,{class:"ti-language-text"},{default:u((()=>[c(f(p(y)),1)])),_:1}),r(s,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),r(x,{class:"ti-language-select"},{default:u((()=>[r(m,{clear:!1,localdata:p(g)()||[],onChange:b},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-7a155b65"]]),O=a({__name:"index",setup(a){x();const e=y(!1),t=y({address:"",port:8080,key:"admin"});b((()=>{t.value.address=F()}));const d=s((()=>!t.value.address||!t.value.port)),g=async()=>{var a,s,l,o;if(e.value)return;const d={...t.value};if(!d.address)return V({title:k("请输入地址"),icon:"none"});if(!d.port)return V({title:k("请输入端口"),icon:"none"});try{e.value=!0;const i=await w(C(`${null==d?void 0:d.address}:${d.port}`),{key:t.value.key,address:t.value.address,port:t.value.port});j(d),I(null==(s=null==(a=i.data)?void 0:a.shop)?void 0:s.app_id),P(null==(o=null==(l=i.data)?void 0:l.shop)?void 0:o.shop_supplier_id),setTimeout((()=>{T({url:"/pages/index/index"})}),100)}catch(i){V({title:k("绑定失败"),icon:"none"})}finally{e.value=!1}},_=()=>{t.value={ip:"",port:8080}};return(a,s)=>{const m=U,v=h,x=$,y=l(o("ti-button"),z);return i(),n(v,{class:"ti-login"},{default:u((()=>[r(v,{class:"ti-login-img"},{default:u((()=>[r(m,{src:"/assets/bg-93598f2d.png",mode:"widthFix"})])),_:1}),r(v,{class:"ti-login-form"},{default:u((()=>[r(v,{class:"ti-form-box"},{default:u((()=>[r(v,{class:"ti-form-head"},{default:u((()=>[r(v,{class:"ti-login-logo"},{default:u((()=>[r(m,{src:"/assets/login_logo-83575c4a.svg",mode:"widthFix"})])),_:1}),r(v,{class:"ti-login-title"},{default:u((()=>[c(f(p(k)("厨显端")),1)])),_:1})])),_:1}),r(v,{class:"ti-form-setting"},{default:u((()=>[r(v,{class:"ti-form-title"},{default:u((()=>[c(f(p(k)("服務器連接地址")),1)])),_:1}),r(v,{class:"ti-form-input"},{default:u((()=>[r(x,{class:"uni-input",focus:"",modelValue:t.value.address,"onUpdate:modelValue":s[0]||(s[0]=a=>t.value.address=a),placeholder:p(k)("請輸入IP")},null,8,["modelValue","placeholder"]),r(v,{class:"uni-point"},{default:u((()=>[c(":")])),_:1}),r(x,{class:"uni-input",focus:"",modelValue:t.value.port,"onUpdate:modelValue":s[1]||(s[1]=a=>t.value.port=a),placeholder:p(k)("請輸入PORT")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),r(v,{class:"ti-form-btn"},{default:u((()=>[r(y,{loading:e.value,onClick:_},{default:u((()=>[c(f(p(k)("重置")),1)])),_:1},8,["loading"]),r(y,{type:"primary",loading:e.value,disabled:p(d),onClick:g},{default:u((()=>[c(f(p(k)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1}),r(v,{class:"ti-language-box"},{default:u((()=>[r(L)])),_:1})])),_:1})}}},[["__scopeId","data-v-f00175f7"]]);export{O as default};
