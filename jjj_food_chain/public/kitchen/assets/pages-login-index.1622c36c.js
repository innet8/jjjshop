import{_ as a,J as e,K as l,A as s,L as t,C as o,M as d,o as i,c as n,w as u,d as r,e as c,t as f,f as p,N as g,O as m,P as _,l as v,m as h,u as x,r as y,Q as b,j as V,$ as w,R as k,T as U,U as C,V as L,W as R,X as j,D as I,Y as P,B as T}from"./index-03e96364.js";import{g as $}from"./index.a682adab.js";const z=""+new URL("bg-93598f2d.png",import.meta.url).href,F=""+new URL("login_logo-83575c4a.svg",import.meta.url).href,O=a({__name:"set-language",setup(a){const{changeLocale:x}=e(),y=l((()=>m[_()])),b=a=>{a&&a!==_()&&x(a)};return(a,e)=>{const l=s(o("uni-icons"),t),m=v,_=s(o("uni-data-select"),d),x=h;return i(),n(x,{class:"ti-language"},{default:u((()=>[r(l,{"custom-prefix":"iconfont",type:"icon-global",size:"16"}),r(m,{class:"ti-language-text"},{default:u((()=>[c(f(p(y)),1)])),_:1}),r(l,{type:"right",size:"16",style:{transform:"rotate(90deg)"}}),r(x,{class:"ti-language-select"},{default:u((()=>[r(_,{clear:!1,localdata:p(g)()||[],onChange:b},null,8,["localdata"])])),_:1})])),_:1})}}},[["__scopeId","data-v-7a155b65"]]),A=a({__name:"index",setup(a){x();const e=y(!1),t=y({address:"",port:8080,key:"admin"});b((()=>{t.value.address=$()}));const d=l((()=>!t.value.address||!t.value.port)),g=async()=>{var a,l,s,o;if(e.value)return;const d={...t.value};if(!d.address)return V({title:w("请输入地址"),icon:"none"});if(!d.port)return V({title:w("请输入端口"),icon:"none"});try{e.value=!0;const i=await k(U(`${null==d?void 0:d.address}:${d.port}`),{key:t.value.key,address:t.value.address,port:t.value.port});C(d),L(null==(l=null==(a=i.data)?void 0:a.shop)?void 0:l.app_id),R(null==(o=null==(s=i.data)?void 0:s.shop)?void 0:o.shop_supplier_id),setTimeout((()=>{j({url:"/pages/index/index"})}),100)}catch(i){V({title:w("绑定失败"),icon:"none"})}finally{e.value=!1}},m=()=>{t.value={ip:"",port:8080}};return(a,l)=>{const _=I,v=h,x=P,y=s(o("ti-button"),T);return i(),n(v,{class:"ti-login"},{default:u((()=>[r(v,{class:"ti-login-img"},{default:u((()=>[r(_,{src:z,mode:"widthFix"})])),_:1}),r(v,{class:"ti-login-form"},{default:u((()=>[r(v,{class:"ti-form-box"},{default:u((()=>[r(v,{class:"ti-form-head"},{default:u((()=>[r(v,{class:"ti-login-logo"},{default:u((()=>[r(_,{src:F,mode:"widthFix"})])),_:1}),r(v,{class:"ti-login-title"},{default:u((()=>[c(f(p(w)("厨显端")),1)])),_:1})])),_:1}),r(v,{class:"ti-form-setting"},{default:u((()=>[r(v,{class:"ti-form-title"},{default:u((()=>[c(f(p(w)("服務器連接地址")),1)])),_:1}),r(v,{class:"ti-form-input"},{default:u((()=>[r(x,{class:"uni-input",focus:"",modelValue:t.value.address,"onUpdate:modelValue":l[0]||(l[0]=a=>t.value.address=a),placeholder:p(w)("請輸入IP")},null,8,["modelValue","placeholder"]),r(v,{class:"uni-point"},{default:u((()=>[c(":")])),_:1}),r(x,{class:"uni-input",focus:"",modelValue:t.value.port,"onUpdate:modelValue":l[1]||(l[1]=a=>t.value.port=a),placeholder:p(w)("請輸入PORT")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),r(v,{class:"ti-form-btn"},{default:u((()=>[r(y,{loading:e.value,onClick:m},{default:u((()=>[c(f(p(w)("重置")),1)])),_:1},8,["loading"]),r(y,{type:"primary",loading:e.value,disabled:p(d),onClick:g},{default:u((()=>[c(f(p(w)("确定")),1)])),_:1},8,["loading","disabled"])])),_:1})])),_:1})])),_:1}),r(v,{class:"ti-language-box"},{default:u((()=>[r(O)])),_:1})])),_:1})}}},[["__scopeId","data-v-f00175f7"]]);export{A as default};
