import{u as e,r as n,l as t}from"./index-315e32f5.js";import{u as s}from"./vue-router-cf371e7b.js";import{_ as a}from"./_plugin-vue_export-helper-1b428a4d.js";import{E as i,J as o,w as l,K as c,o as r,c as u,a as m,L as p,P as d,a8 as h,W as g,X as f,ad as v,O as j,R as x,S as _,V as b,a0 as L}from"./@vue-a14816bf.js";import{g as k,h as w,i as I,j as y,k as M,l as C}from"./element-plus-90e2c6dc.js";import"./pinia-dde4581d.js";import"./pinia-plugin-persistedstate-35ef556e.js";import"./@element-plus-0e7d7a79.js";import"./vue-i18n-0667e8d8.js";import"./@intlify-2339bc47.js";import"./lodash-es-493ac664.js";import"./@vueuse-91cd0e71.js";import"./dayjs-3a594381.js";import"./call-bind-8544b80b.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./@popperjs-b78c3215.js";import"./escape-html-1590d737.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";const N=i({setup(n,{emit:t}){const a=s(),{bus_emit:i}=e(),r=o({route:a,active_menu:null,active_child:0,menuList:[{name:"插件",icon:"icon-chajian",path:"/plugs",redirect:"/plugs/plugs/Index",children:[{name:"全部插件",icon:null,path:"/plugs/plugs/Index"}]},{name:"后台权限",icon:"icon-authority",path:"/access",redirect:"/access/Index",children:[{name:"权限列表",icon:null,path:"/access/Index"}]},{name:"平台",icon:"icon-zhuye",path:"/shop",redirect:"/shop/Index",children:[{name:"平台列表",icon:null,path:"/shop/Index"}]},{name:"消息",icon:"icon-xiaoxi1",path:"/message",redirect:"/message/Index",children:[{name:"消息列表",icon:null,path:"/message/Index"}]},{name:"设置",icon:"icon-icon-test1",path:"/setting",redirect:"/setting/Index",children:[{name:"设置",icon:null,path:"/setting/Index"}]},{name:"密码",icon:"icon-authority1",path:"/password",redirect:"/password/Index",children:[{name:"修改密码",icon:null,path:"/password/Index"}]}]}),u=async e=>{let n="首页",s="/"+e.path.split("/")[1];for(let t=0;t<r.menuList.length;t++){if(s==r.menuList[t].path){n=r.menuList[t].name,r.active_menu=t;let s=e.path;if(r.menuList[t].children){let e=r.menuList[t].children;for(let t=0;t<e.length;t++){if(s==e[t].path){n=e[t].name,r.active_child=t;break}r.active_child=0}}break}r.active_menu=null}i("MenuName",n),t("selectMenu",r.active_menu)};return l((()=>a),((e,n)=>{const t=e.path.split("/").length,s=n?n.path.split("/").length:0;r.transitionName=t<s?"slide-right":"slide-left",u(e)}),{deep:!0,immediate:!0}),{...c(r),selectMenu:u,route:a}},methods:{choseMenu(e){if(null!=e){let t=e.redirect||e.path;n.push(t)}else n.push("/Home")}}}),z={class:"left-menu-wrapper"},B={class:"menu-wrapper"},T={class:"home-login"},$=[m("span",{class:"icon iconfont icon-tubiaozhizuomoban-"},null,-1)],F={class:"nav-wrapper"},H={class:"first-menu-content"},R={class:"nav-ul"},S=["onClick"],E={class:"item-box"},J={class:"child-menu-wrapper"},K={class:"child-menu right-animation"},O={key:0},P=["onClick"],V={class:"name"};const W=a(N,[["render",function(e,n,t,s,a,i){return r(),u("div",z,[m("div",B,[m("div",T,[m("div",{class:p(null!=e.active_menu?"home-icon":"home-icon router-link-active"),onClick:n[0]||(n[0]=n=>e.choseMenu(null))},$,2)]),m("div",F,[m("div",H,[m("ul",R,[(r(!0),u(d,null,h(e.menuList,((n,t)=>(r(),u("li",{class:p(e.active_menu==t?"menu-item router-link-active":"menu-item"),key:t,onClick:t=>e.choseMenu(n)},[m("div",E,[m("span",{class:p("icon iconfont menu-item-icon "+n.icon)},null,2),m("span",null,g(n.name),1)])],10,S)))),128))])])])]),m("div",J,[m("div",K,[null!=e.active_menu?(r(),u("ul",O,[(r(!0),u(d,null,h(e.menuList[e.active_menu].children,((n,t)=>(r(),u("li",{class:p(e.active_child==t?"router-link router-link-active":"router-link"),key:t,onClick:t=>e.choseMenu(n)},[m("span",V,g(n.name),1)],10,P)))),128))])):f("",!0)])])])}]]),{userInfo:X,bus_on:q,afterLogout:A}=e(),D=i({setup(){const e=o({menu_title:"首页",userInfo:X}),n=t(),s=n.getLanguage().language,a=n.getLanguageList();return q("MenuName",(n=>{e.menu_title=n})),{...c(e),userInfo:X,afterLogout:A,languageList:a,languageNow:s,language:n}},methods:{exit(){k.confirm("此操作将退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.logout()})).catch((()=>{w({type:"info",message:"已取消退出"})}))},setLanguage(e){k.confirm("切换语言需要刷新后生效，是否确定刷新?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.language.setLanguage(e),location.reload()})).catch((()=>{w({type:"info",message:"已取消"})}))},async logout(){await this.afterLogout(),this.$router.push("/login")}}}),G={class:"common-header"},Q={class:"breadcrumb"},U={class:"baseInfo-left-base"},Y={class:"name"},Z={class:"header-navbar"},ee={class:"header-lang"},ne={class:"el-dropdown-link"},te={class:"header-navbar-icon"},se=m("span",{class:"ml4 icon iconfont icon-geren9"},null,-1),ae={class:"text ml4"},ie=[m("span",{class:"icon iconfont icon-tuichu"},null,-1),m("span",{class:"text ml4"},"退出",-1)];const oe=i({components:{Heads:a(D,[["render",function(e,n,t,s,a,i){const o=v("arrow-down"),l=I,c=y,p=M,f=C;return r(),u("div",G,[m("div",Q,[m("div",U,[m("span",Y,g(e.menu_title),1)]),m("div",Z,[m("div",ee,[j(f,{trigger:"click",onCommand:e.setLanguage},{dropdown:x((()=>[j(p,null,{default:x((()=>[(r(!0),u(d,null,h(e.languageList,(e=>(r(),_(c,{command:e.key},{default:x((()=>[b(g(e.label),1)])),_:2},1032,["command"])))),256))])),_:1})])),default:x((()=>[m("span",ne,[b(g(e.languageNow),1),j(l,{class:"el-icon--right"},{default:x((()=>[j(o)])),_:1})])])),_:1},8,["onCommand"])]),m("div",te,[se,m("span",ae,g(e.userInfo&&e.userInfo.userName)+"，"+g(e.$t("欢迎您！")),1)]),m("div",{class:"header-navbar-icon",onClick:n[0]||(n[0]=L(((...n)=>e.exit&&e.exit(...n)),["stop"]))},ie)])])])}]])}}),le={class:"right-content"},ce={class:"right-content-box"},re={class:"subject-wrap"};const ue=a(i({setup(){const e=o({hasChild:null});return{...c(e)}},components:{LeftMenu:W,RightContent:a(oe,[["render",function(e,n,t,s,a,i){const o=v("Heads"),l=v("router-view");return r(),u("div",le,[j(o),m("div",ce,[m("div",re,[j(l)])])])}]])},watch:{$route(e,n){n.path!=e.path&&this.$router.go(0)}},methods:{selectMenuFunc(e){this.hasChild=e}}}),[["render",function(e,n,t,s,a,i){const o=v("LeftMenu"),l=v("RightContent");return r(),u("div",{class:p((e.hasChild,"main right-big"))},[j(o,{onSelectMenu:e.selectMenuFunc},null,8,["onSelectMenu"]),j(l)],2)}]]);export{ue as default};
